2022-08-07 10:59:56.5336|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:00:01.7940|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (86ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2022-08-07 11:00:02.1377|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (108ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [EducationalPortal] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2022-08-07 11:00:02.1829|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (45ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [EducationalPortal];
2022-08-07 11:00:02.6449|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (293ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [EducationalPortal];
2022-08-07 11:00:02.7354|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (90ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [EducationalPortal] SET READ_COMMITTED_SNAPSHOT ON;
END;
2022-08-07 11:00:02.8425|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2022-08-07 11:00:03.1325|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Authors] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Authors] PRIMARY KEY ([Id])
);
2022-08-07 11:00:03.1325|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Extensions] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Extensions] PRIMARY KEY ([Id])
);
2022-08-07 11:00:03.1325|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Materials] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Link] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Materials] PRIMARY KEY ([Id])
);
2022-08-07 11:00:03.1456|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Qualities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Qualities] PRIMARY KEY ([Id])
);
2022-08-07 11:00:03.1456|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Resources] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Resources] PRIMARY KEY ([Id])
);
2022-08-07 11:00:03.1456|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Roles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_Roles] PRIMARY KEY ([Id])
);
2022-08-07 11:00:03.1456|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Skills] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Skills] PRIMARY KEY ([Id])
);
2022-08-07 11:00:03.1456|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UserToken] (
    [Id] int NOT NULL IDENTITY,
    [RefreshToken] nvarchar(max) NOT NULL,
    [RefreshTokenExpiryTime] datetime2 NOT NULL,
    CONSTRAINT [PK_UserToken] PRIMARY KEY ([Id])
);
2022-08-07 11:00:03.1456|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Books] (
    [Id] int NOT NULL,
    [PagesCount] int NOT NULL,
    [ExtensionId] int NOT NULL,
    [PublicationYear] int NOT NULL,
    CONSTRAINT [PK_Books] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Books_Extensions_ExtensionId] FOREIGN KEY ([ExtensionId]) REFERENCES [Extensions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Books_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id])
);
2022-08-07 11:00:03.1456|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Videos] (
    [Id] int NOT NULL,
    [Duration] datetime2 NOT NULL,
    [QualityId] int NOT NULL,
    CONSTRAINT [PK_Videos] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Videos_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id]),
    CONSTRAINT [FK_Videos_Qualities_QualityId] FOREIGN KEY ([QualityId]) REFERENCES [Qualities] ([Id]) ON DELETE CASCADE
);
2022-08-07 11:00:03.1614|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Articles] (
    [Id] int NOT NULL,
    [ResourceId] int NOT NULL,
    [PublicationDate] datetime2 NOT NULL,
    CONSTRAINT [PK_Articles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Articles_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id]),
    CONSTRAINT [FK_Articles_Resources_ResourceId] FOREIGN KEY ([ResourceId]) REFERENCES [Resources] ([Id]) ON DELETE CASCADE
);
2022-08-07 11:00:03.1614|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Position] nvarchar(max) NULL,
    [Avatar] nvarchar(max) NOT NULL,
    [Email] nvarchar(450) NOT NULL,
    [PasswordHash] nvarchar(max) NOT NULL,
    [Balance] int NOT NULL,
    [UserTokenId] int NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_UserToken_UserTokenId] FOREIGN KEY ([UserTokenId]) REFERENCES [UserToken] ([Id])
);
2022-08-07 11:00:03.1614|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AuthorBook] (
    [AuthorsId] int NOT NULL,
    [BooksId] int NOT NULL,
    CONSTRAINT [PK_AuthorBook] PRIMARY KEY ([AuthorsId], [BooksId]),
    CONSTRAINT [FK_AuthorBook_Authors_AuthorsId] FOREIGN KEY ([AuthorsId]) REFERENCES [Authors] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AuthorBook_Books_BooksId] FOREIGN KEY ([BooksId]) REFERENCES [Books] ([Id]) ON DELETE CASCADE
);
2022-08-07 11:00:03.1614|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Courses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Thumbnail] nvarchar(max) NOT NULL,
    [ShortDescription] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [Price] int NOT NULL,
    [AuthorId] nvarchar(450) NULL,
    CONSTRAINT [PK_Courses] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Courses_Users_AuthorId] FOREIGN KEY ([AuthorId]) REFERENCES [Users] ([Id])
);
2022-08-07 11:00:03.1614|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [MaterialsBaseUser] (
    [MaterialsId] int NOT NULL,
    [UsersId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_MaterialsBaseUser] PRIMARY KEY ([MaterialsId], [UsersId]),
    CONSTRAINT [FK_MaterialsBaseUser_Materials_MaterialsId] FOREIGN KEY ([MaterialsId]) REFERENCES [Materials] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_MaterialsBaseUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 11:00:03.1614|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [RoleUser] (
    [RolesId] int NOT NULL,
    [UsersId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_RoleUser] PRIMARY KEY ([RolesId], [UsersId]),
    CONSTRAINT [FK_RoleUser_Roles_RolesId] FOREIGN KEY ([RolesId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RoleUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 11:00:03.1788|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UsersSkills] (
    [UserId] nvarchar(450) NOT NULL,
    [SkillId] int NOT NULL,
    [Level] int NOT NULL,
    CONSTRAINT [PK_UsersSkills] PRIMARY KEY ([UserId], [SkillId]),
    CONSTRAINT [FK_UsersSkills_Skills_SkillId] FOREIGN KEY ([SkillId]) REFERENCES [Skills] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UsersSkills_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 11:00:03.1788|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CartItems] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NULL,
    [CourseId] int NOT NULL,
    CONSTRAINT [PK_CartItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_CartItems_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CartItems_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2022-08-07 11:00:03.1788|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CoursesMaterials] (
    [CourseId] int NOT NULL,
    [MaterialId] int NOT NULL,
    [Index] int NOT NULL,
    CONSTRAINT [PK_CoursesMaterials] PRIMARY KEY ([CourseId], [MaterialId]),
    CONSTRAINT [FK_CoursesMaterials_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CoursesMaterials_Materials_MaterialId] FOREIGN KEY ([MaterialId]) REFERENCES [Materials] ([Id]) ON DELETE CASCADE
);
2022-08-07 11:00:03.1788|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CoursesSkills] (
    [CourseId] int NOT NULL,
    [SkillId] int NOT NULL,
    CONSTRAINT [PK_CoursesSkills] PRIMARY KEY ([CourseId], [SkillId]),
    CONSTRAINT [FK_CoursesSkills_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CoursesSkills_Skills_SkillId] FOREIGN KEY ([SkillId]) REFERENCES [Skills] ([Id]) ON DELETE CASCADE
);
2022-08-07 11:00:03.1788|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [ShoppingHistory] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NULL,
    [CourseId] int NOT NULL,
    [Price] int NOT NULL,
    [Date] datetime2 NOT NULL,
    CONSTRAINT [PK_ShoppingHistory] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ShoppingHistory_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ShoppingHistory_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2022-08-07 11:00:03.1926|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UsersCourses] (
    [UserId] nvarchar(450) NOT NULL,
    [CourseId] int NOT NULL,
    [MaterialsCount] int NOT NULL,
    [LearnedMaterialsCount] int NOT NULL,
    CONSTRAINT [PK_UsersCourses] PRIMARY KEY ([UserId], [CourseId]),
    CONSTRAINT [FK_UsersCourses_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UsersCourses_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 11:00:03.1926|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Articles_ResourceId] ON [Articles] ([ResourceId]);
2022-08-07 11:00:03.1926|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_AuthorBook_BooksId] ON [AuthorBook] ([BooksId]);
2022-08-07 11:00:03.1926|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Books_ExtensionId] ON [Books] ([ExtensionId]);
2022-08-07 11:00:03.1926|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CartItems_CourseId] ON [CartItems] ([CourseId]);
2022-08-07 11:00:03.1926|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CartItems_UserId] ON [CartItems] ([UserId]);
2022-08-07 11:00:03.1926|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Courses_AuthorId] ON [Courses] ([AuthorId]);
2022-08-07 11:00:03.1926|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CoursesMaterials_MaterialId] ON [CoursesMaterials] ([MaterialId]);
2022-08-07 11:00:03.1926|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CoursesSkills_SkillId] ON [CoursesSkills] ([SkillId]);
2022-08-07 11:00:03.1926|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_MaterialsBaseUser_UsersId] ON [MaterialsBaseUser] ([UsersId]);
2022-08-07 11:00:03.2068|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Roles_Name] ON [Roles] ([Name]);
2022-08-07 11:00:03.2068|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_RoleUser_UsersId] ON [RoleUser] ([UsersId]);
2022-08-07 11:00:03.2068|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_ShoppingHistory_CourseId] ON [ShoppingHistory] ([CourseId]);
2022-08-07 11:00:03.2068|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_ShoppingHistory_UserId] ON [ShoppingHistory] ([UserId]);
2022-08-07 11:00:03.2068|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]);
2022-08-07 11:00:03.2068|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Users_UserTokenId] ON [Users] ([UserTokenId]);
2022-08-07 11:00:03.2068|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_UsersCourses_CourseId] ON [UsersCourses] ([CourseId]);
2022-08-07 11:00:03.2068|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_UsersSkills_SkillId] ON [UsersSkills] ([SkillId]);
2022-08-07 11:00:03.2068|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Videos_QualityId] ON [Videos] ([QualityId]);
2022-08-07 11:00:03.6924|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (85ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [Qualities] USING (
VALUES (@p0, 0),
(@p1, 1),
(@p2, 2),
(@p3, 3),
(@p4, 4),
(@p5, 5),
(@p6, 6),
(@p7, 7)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [i].[Id] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-08-07 11:00:03.8798|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:03.8798|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 11:00:03.9090|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Extensions] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Extensions]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:03.9287|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:04.0150|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:04.0246|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 11:00:04.0246|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 11:00:04.0445|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Resources] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Resources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:04.0571|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:04.0571|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 11:00:04.0814|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:04.0846|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:04.0846|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:04.1083|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:04.1083|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:04.1083|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:04.1226|INFO|EducationalPortal.Infrastructure.Services.Identity.PasswordHasher|Hashed password.
2022-08-07 11:00:04.2247|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Avatar], [Balance], [Email], [Name], [PasswordHash], [Position], [UserTokenId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2022-08-07 11:00:04.2383|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[@p8='?' (DbType = Int32), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (Size = 450), @p12='?' (DbType = Int32), @p13='?' (Size = 450), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Size = 450), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Size = 450), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RoleUser] ([RolesId], [UsersId])
VALUES (@p8, @p9),
(@p10, @p11);
INSERT INTO [UsersSkills] ([SkillId], [UserId], [Level])
VALUES (@p12, @p13, @p14),
(@p15, @p16, @p17),
(@p18, @p19, @p20);
2022-08-07 11:00:04.2929|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:04.3081|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11),
(@p12, @p13, @p14);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p15, @p16),
(@p17, @p18),
(@p19, @p20);
2022-08-07 11:00:04.3240|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UsersCourses] ([CourseId], [UserId], [LearnedMaterialsCount], [MaterialsCount])
VALUES (@p0, @p1, @p2, @p3);
2022-08-07 11:00:04.3345|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [Skills] USING (
VALUES (@p0, 0),
(@p1, 1),
(@p2, 2),
(@p3, 3),
(@p4, 4),
(@p5, 5),
(@p6, 6),
(@p7, 7),
(@p8, 8)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [i].[Id] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-08-07 11:00:04.3345|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:04.3345|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 11:00:04.3345|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:04.3345|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 11:00:04.3345|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:04.3345|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 11:00:04.3345|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:04.3488|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:04.3488|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 11:00:04.3488|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 11:00:04.3488|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:04.3488|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:04.3488|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 11:00:04.3488|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 11:00:04.3635|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Resources] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Resources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:04.3635|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:04.3635|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 11:00:04.3635|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:04.3635|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 11:00:04.3635|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:04.3801|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = Int32), @p32='?' (DbType = Int32), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = Int32), @p38='?' (DbType = Int32), @p39='?' (DbType = Int32), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11),
(@p12, @p13, @p14),
(@p15, @p16, @p17),
(@p18, @p19, @p20),
(@p21, @p22, @p23),
(@p24, @p25, @p26);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p27, @p28),
(@p29, @p30),
(@p31, @p32),
(@p33, @p34),
(@p35, @p36),
(@p37, @p38),
(@p39, @p40),
(@p41, @p42),
(@p43, @p44);
2022-08-07 11:00:04.3801|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:00:04.3801|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p12, @p13),
(@p14, @p15),
(@p16, @p17);
2022-08-07 11:00:05.5877|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\rareb\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-07 11:00:06.4155|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7106
2022-08-07 11:00:06.4155|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:7105
2022-08-07 11:00:06.4155|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2022-08-07 11:00:06.4155|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2022-08-07 11:00:06.4155|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\
2022-08-07 11:00:10.3822|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger - -
2022-08-07 11:00:10.6103|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger - - - 301 0 - 230.1870ms
2022-08-07 11:00:10.6103|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - -
2022-08-07 11:00:11.2580|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - -
2022-08-07 11:00:11.2580|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - -
2022-08-07 11:00:11.2580|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - -
2022-08-07 11:00:11.2580|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 11:00:11.2700|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 11.0125ms
2022-08-07 11:00:11.2700|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 11:00:11.2700|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - - - 200 - text/html;charset=utf-8 663.7770ms
2022-08-07 11:00:11.4013|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-07 11:00:11.4013|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - - - 200 143943 text/css 150.9126ms
2022-08-07 11:00:11.4999|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-07 11:00:11.4999|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 241.6540ms
2022-08-07 11:00:11.6769|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-07 11:00:11.6769|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - - - 200 1095087 application/javascript 418.9986ms
2022-08-07 11:00:11.7360|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 465.3378ms
2022-08-07 11:00:12.9487|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - -
2022-08-07 11:00:13.0706|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/favicon-32x32.png - -
2022-08-07 11:00:13.0706|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2022-08-07 11:00:13.0706|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/favicon-32x32.png - - - 200 628 image/png 1.4993ms
2022-08-07 11:00:13.8376|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 888.8561ms
2022-08-07 11:01:09.0729|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:01:09.2221|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:10.0119|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:01:10.0624|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:01:10.0788|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:01:11.0832|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 11:01:11.0832|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 11:01:11.3448|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (30ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 11:01:11.4237|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 11:01:11.4565|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 11:01:11.7668|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:01:11.8331|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 1764.1949ms
2022-08-07 11:01:11.8331|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:01:11.8549|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 2782.0235ms
2022-08-07 11:01:16.2863|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/3 - -
2022-08-07 11:01:16.2863|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:16.2863|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 11:01:16.3074|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseDto] GetCourseAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:01:16.3707|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:01:16.7526|WARN|Microsoft.EntityFrameworkCore.Query|Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2022-08-07 11:01:16.8574|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (42ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 11:01:16.9749|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:01:16.9907|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:01:17.0074|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:01:17.0074|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:01:17.0074|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:01:17.0074|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:01:17.0476|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE 0 = 1
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 11:01:17.0849|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course with id: 3.
2022-08-07 11:01:17.0849|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseDto'.
2022-08-07 11:01:17.1083|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API) in 800.7728ms
2022-08-07 11:01:17.1083|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 11:01:17.1083|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/3 - - - 200 2269 application/json;+charset=utf-8 822.5351ms
2022-08-07 11:01:32.1860|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/register - -
2022-08-07 11:01:32.2039|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:32.2039|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/register - - - 204 - - 20.5140ms
2022-08-07 11:01:32.2139|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/account/register application/json 81
2022-08-07 11:01:32.2139|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:32.2255|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.RegisterAsync (EducationalPortal.API)'
2022-08-07 11:01:32.2255|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RegisterAsync(EducationalPortal.Application.Models.RegisterModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:01:32.2255|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:01:32.5363|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:01:32.5532|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Name] = N'Student'
2022-08-07 11:01:32.5532|INFO|EducationalPortal.Infrastructure.Services.Identity.PasswordHasher|Hashed password.
2022-08-07 11:01:32.5532|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:01:32.5532|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned new refresh token.
2022-08-07 11:01:32.6349|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserToken] ([RefreshToken], [RefreshTokenExpiryTime])
VALUES (@p0, @p1);
SELECT [Id]
FROM [UserToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:01:32.6552|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (Size = 450), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Avatar], [Balance], [Email], [Name], [PasswordHash], [Position], [UserTokenId])
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2022-08-07 11:01:32.6643|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned claims for user with email: petro@petro.
2022-08-07 11:01:33.0129|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:01:33.0129|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned new access and refresh tokens.
2022-08-07 11:01:33.0129|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Created user with email: petro@petro.
2022-08-07 11:01:33.0129|INFO|EducationalPortal.Infrastructure.Services.AccountService|Registered user with email: petro@petro.
2022-08-07 11:01:33.0129|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:01:33.0129|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.RegisterAsync (EducationalPortal.API) in 784.6472ms
2022-08-07 11:01:33.0129|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.RegisterAsync (EducationalPortal.API)'
2022-08-07 11:01:33.0129|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/account/register application/json 81 - 200 568 application/json;+charset=utf-8 803.3762ms
2022-08-07 11:01:33.0701|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:01:33.0701|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:33.0701|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 0.5492ms
2022-08-07 11:01:33.0701|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:01:33.0701|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:33.2281|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:01:33.2281|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:01:33.2281|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:01:33.2428|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 11:01:33.2428|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 11:01:33.2428|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 11:01:33.2428|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:01:33.2428|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 22.1576ms
2022-08-07 11:01:33.2428|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:01:33.2428|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 177.0378ms
2022-08-07 11:01:45.2525|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/3 - -
2022-08-07 11:01:45.2594|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:45.2594|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/3 - - - 204 - - 7.1644ms
2022-08-07 11:01:45.2594|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/3 - -
2022-08-07 11:01:45.2594|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:45.2594|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 11:01:45.2594|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseDto] GetCourseAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:01:45.2594|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:01:45.2872|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 11:01:45.2872|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:01:45.2872|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:01:45.2872|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:01:45.2872|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:01:45.2872|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:01:45.3016|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:01:45.3190|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 11:01:45.3428|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course with id: 3.
2022-08-07 11:01:45.3428|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseDto'.
2022-08-07 11:01:45.3428|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API) in 78.9692ms
2022-08-07 11:01:45.3428|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 11:01:45.3428|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/3 - - - 200 2269 application/json;+charset=utf-8 81.8150ms
2022-08-07 11:01:47.9685|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 11:01:47.9685|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:47.9685|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 204 - - 1.6773ms
2022-08-07 11:01:47.9685|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 11:01:47.9685|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:47.9822|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 11:01:47.9822|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "MyLearning", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Core.Entities.JoinEntities.UsersCourses]] MyLearningAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:01:47.9822|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:01:48.0264|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 11:01:48.0264|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 11:01:48.0418|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[UserId], [t].[CourseId], [t].[LearnedMaterialsCount], [t].[MaterialsCount], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM (
    SELECT [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
    FROM [UsersCourses] AS [u]
    INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
    WHERE [u0].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c] ON [t].[CourseId] = [c].[Id]
2022-08-07 11:01:48.0418|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE [u0].[Email] = @__email_0
2022-08-07 11:01:48.0418|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned users courses page 1 from database.
2022-08-07 11:01:48.0418|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Core.Entities.JoinEntities.UsersCourses, EducationalPortal.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:01:48.0529|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API) in 66.7616ms
2022-08-07 11:01:48.0529|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 11:01:48.0529|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 200 2 application/json;+charset=utf-8 85.8612ms
2022-08-07 11:01:50.9672|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/3 - -
2022-08-07 11:01:50.9672|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:50.9672|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/3 - - - 204 - - 3.2268ms
2022-08-07 11:01:50.9753|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/3 - -
2022-08-07 11:01:50.9753|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:50.9753|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 11:01:50.9753|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseDto] GetCourseAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:01:50.9753|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:01:50.9933|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 11:01:50.9933|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:01:50.9933|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:01:50.9933|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:01:50.9933|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:01:51.0039|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:01:51.0039|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:01:51.0039|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 11:01:51.0259|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course with id: 3.
2022-08-07 11:01:51.0259|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseDto'.
2022-08-07 11:01:51.0259|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API) in 48.0487ms
2022-08-07 11:01:51.0259|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 11:01:51.0259|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/3 - - - 200 2269 application/json;+charset=utf-8 51.4827ms
2022-08-07 11:01:56.0369|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/add-to-cart/3 - -
2022-08-07 11:01:56.0369|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:56.0369|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/add-to-cart/3 - - - 204 - - 3.1446ms
2022-08-07 11:01:56.0369|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 PUT https://localhost:7106/api/shopping-cart/add-to-cart/3 application/json 2
2022-08-07 11:01:56.0369|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:56.0369|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.AddToCartAsync (EducationalPortal.API)'
2022-08-07 11:01:56.0515|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "AddToCart", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCartAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 11:01:56.0515|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:01:56.1113|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [CartItems] AS [c]
        INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
        LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
        WHERE ([c0].[Id] = @__courseId_0) AND ([u].[Email] = @__email_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-08-07 11:01:56.1217|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:01:56.1385|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CartItems] ([CourseId], [UserId])
VALUES (@p0, @p1);
SELECT [Id]
FROM [CartItems]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:01:56.1385|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Created cart item with id: 1.
2022-08-07 11:01:56.1505|INFO|Microsoft.AspNetCore.Mvc.StatusCodeResult|Executing StatusCodeResult, setting HTTP status code 200
2022-08-07 11:01:56.1505|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.AddToCartAsync (EducationalPortal.API) in 99.2214ms
2022-08-07 11:01:56.1505|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.AddToCartAsync (EducationalPortal.API)'
2022-08-07 11:01:56.1505|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 PUT https://localhost:7106/api/shopping-cart/add-to-cart/3 application/json 2 - 200 0 - 108.9314ms
2022-08-07 11:01:56.1692|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - -
2022-08-07 11:01:56.1692|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:56.1692|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - - - 204 - - 0.9505ms
2022-08-07 11:01:56.1692|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/total-price - -
2022-08-07 11:01:56.1692|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:56.1692|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/total-price - - - 204 - - 0.3859ms
2022-08-07 11:01:56.1785|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - -
2022-08-07 11:01:56.1785|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:56.1785|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/shopping-cart/total-price - -
2022-08-07 11:01:56.1785|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API)'
2022-08-07 11:01:56.1785|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:56.1785|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API)'
2022-08-07 11:01:56.1785|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetTotalPrice", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int32] GetTotalPriceAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 11:01:56.1785|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCart", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.CartItemDto]] GetCartAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 11:01:56.1785|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:01:56.1785|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:01:56.2087|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 11:01:56.2087|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 11:01:56.2398|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[CourseId], [t].[UserId], [c0].[Id], [c0].[AuthorId], [c0].[Description], [c0].[Name], [c0].[Price], [c0].[ShortDescription], [c0].[Thumbnail]
FROM (
    SELECT [c].[Id], [c].[CourseId], [c].[UserId]
    FROM [CartItems] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
    WHERE [u].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c0] ON [t].[CourseId] = [c0].[Id]
2022-08-07 11:01:56.2398|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([c0].[Price]), 0)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 11:01:56.2398|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Returned total price 110 for cart from database.
2022-08-07 11:01:56.2539|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Int32'.
2022-08-07 11:01:56.2539|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API) in 67.235ms
2022-08-07 11:01:56.2539|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API)'
2022-08-07 11:01:56.2539|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/shopping-cart/total-price - - - 200 3 application/json;+charset=utf-8 74.7768ms
2022-08-07 11:01:56.2539|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 11:01:56.2539|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Returned cart items page 1 from database.
2022-08-07 11:01:56.2539|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.CartItemDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:01:56.2712|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API) in 83.9479ms
2022-08-07 11:01:56.2712|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API)'
2022-08-07 11:01:56.2712|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - - - 200 345 application/json;+charset=utf-8 93.0880ms
2022-08-07 11:01:57.9854|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/buy - -
2022-08-07 11:01:57.9854|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:57.9854|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/buy - - - 204 - - 3.4397ms
2022-08-07 11:01:57.9905|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 PUT https://localhost:7106/api/shopping-cart/buy application/json 2
2022-08-07 11:01:57.9905|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:57.9905|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.BuyAsync (EducationalPortal.API)'
2022-08-07 11:01:57.9905|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Buy", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BuyAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 11:01:57.9905|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:01:58.0114|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:01:58.0262|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[CourseId], [c].[UserId], [c0].[Id], [c0].[AuthorId], [c0].[Description], [c0].[Name], [c0].[Price], [c0].[ShortDescription], [c0].[Thumbnail]
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 11:01:58.0262|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([c0].[Price]), 0)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 11:01:58.0520|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:01:58.1326|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|User with email petro@petro payed 110 points.
2022-08-07 11:01:58.1326|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CoursesMaterials] AS [c]
WHERE [c].[CourseId] = @__courseId_0
2022-08-07 11:01:58.1475|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 11:01:58.1962|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__user_Id_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CoursesMaterials] AS [c]
INNER JOIN (
    SELECT [m].[Id]
    FROM [Materials] AS [m]
) AS [t] ON [c].[MaterialId] = [t].[Id]
WHERE ([c].[CourseId] = @__courseId_0) AND EXISTS (
    SELECT 1
    FROM [MaterialsBaseUser] AS [m0]
    INNER JOIN [Users] AS [u] ON [m0].[UsersId] = [u].[Id]
    WHERE ([t].[Id] = [m0].[MaterialsId]) AND ([u].[Id] = @__user_Id_1))
2022-08-07 11:01:58.2098|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UsersCourses] ([CourseId], [UserId], [LearnedMaterialsCount], [MaterialsCount])
VALUES (@p0, @p1, @p2, @p3);
2022-08-07 11:01:58.2098|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Added course with id: 3 to user with email: petro@petro.
2022-08-07 11:01:58.2294|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
FROM [Users] AS [u]
WHERE EXISTS (
    SELECT 1
    FROM [Courses] AS [c]
    WHERE ([u].[Id] = [c].[AuthorId]) AND ([c].[Id] = @__courseId_0))
2022-08-07 11:01:58.2294|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:01:58.2294|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Added revenue to author with email default@gmail.com for selling course with id: 3.
2022-08-07 11:01:58.2957|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ShoppingHistory] ([CourseId], [Date], [Price], [UserId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [ShoppingHistory]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:01:58.2957|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Created shopping history with id 1.
2022-08-07 11:01:58.3257|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [CartItems]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-08-07 11:01:58.3328|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|User with email petro@petro bought courses.
2022-08-07 11:01:58.3328|INFO|Microsoft.AspNetCore.Mvc.StatusCodeResult|Executing StatusCodeResult, setting HTTP status code 200
2022-08-07 11:01:58.3328|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.BuyAsync (EducationalPortal.API) in 338.9669ms
2022-08-07 11:01:58.3328|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.BuyAsync (EducationalPortal.API)'
2022-08-07 11:01:58.3328|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 PUT https://localhost:7106/api/shopping-cart/buy application/json 2 - 200 0 - 342.9802ms
2022-08-07 11:01:58.3328|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - -
2022-08-07 11:01:58.3328|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:58.3328|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API)'
2022-08-07 11:01:58.3328|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/shopping-cart/total-price - -
2022-08-07 11:01:58.3328|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCart", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.CartItemDto]] GetCartAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 11:01:58.3328|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:58.3328|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API)'
2022-08-07 11:01:58.3328|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetTotalPrice", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int32] GetTotalPriceAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 11:01:58.3328|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:01:58.3328|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:01:58.3502|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[CourseId], [t].[UserId], [c0].[Id], [c0].[AuthorId], [c0].[Description], [c0].[Name], [c0].[Price], [c0].[ShortDescription], [c0].[Thumbnail]
FROM (
    SELECT [c].[Id], [c].[CourseId], [c].[UserId]
    FROM [CartItems] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
    WHERE [u].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c0] ON [t].[CourseId] = [c0].[Id]
2022-08-07 11:01:58.3502|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([c0].[Price]), 0)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 11:01:58.3502|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Returned total price 0 for cart from database.
2022-08-07 11:01:58.3502|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Int32'.
2022-08-07 11:01:58.3502|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 11:01:58.3502|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API) in 14.9282ms
2022-08-07 11:01:58.3502|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API)'
2022-08-07 11:01:58.3502|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/shopping-cart/total-price - - - 200 1 application/json;+charset=utf-8 16.2216ms
2022-08-07 11:01:58.3502|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Returned cart items page 1 from database.
2022-08-07 11:01:58.3502|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.CartItemDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:01:58.3502|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API) in 21.1887ms
2022-08-07 11:01:58.3628|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API)'
2022-08-07 11:01:58.3628|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - - - 200 2 application/json;+charset=utf-8 23.0641ms
2022-08-07 11:01:59.7830|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 11:01:59.7830|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:59.7850|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 204 - - 1.9596ms
2022-08-07 11:01:59.7850|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 11:01:59.7850|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:01:59.7850|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 11:01:59.7850|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "MyLearning", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Core.Entities.JoinEntities.UsersCourses]] MyLearningAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:01:59.7850|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:01:59.8154|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[UserId], [t].[CourseId], [t].[LearnedMaterialsCount], [t].[MaterialsCount], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM (
    SELECT [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
    FROM [UsersCourses] AS [u]
    INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
    WHERE [u0].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c] ON [t].[CourseId] = [c].[Id]
2022-08-07 11:01:59.8186|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE [u0].[Email] = @__email_0
2022-08-07 11:01:59.8186|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 11:01:59.8186|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__user_Id_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CoursesMaterials] AS [c]
INNER JOIN (
    SELECT [m].[Id]
    FROM [Materials] AS [m]
) AS [t] ON [c].[MaterialId] = [t].[Id]
WHERE ([c].[CourseId] = @__courseId_0) AND EXISTS (
    SELECT 1
    FROM [MaterialsBaseUser] AS [m0]
    INNER JOIN [Users] AS [u] ON [m0].[UsersId] = [u].[Id]
    WHERE ([t].[Id] = [m0].[MaterialsId]) AND ([u].[Id] = @__user_Id_1))
2022-08-07 11:01:59.8186|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UsersCourses] SET [LearnedMaterialsCount] = @p0, [MaterialsCount] = @p1
WHERE [CourseId] = @p2 AND [UserId] = @p3;
SELECT @@ROWCOUNT;
2022-08-07 11:01:59.8186|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned users courses page 1 from database.
2022-08-07 11:01:59.8186|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Core.Entities.JoinEntities.UsersCourses, EducationalPortal.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:01:59.8452|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API) in 55.854ms
2022-08-07 11:01:59.8452|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 11:01:59.8452|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 200 1531 application/json;+charset=utf-8 58.0278ms
2022-08-07 11:02:01.0388|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/learn/3 - -
2022-08-07 11:02:01.0388|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:02:01.0388|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/learn/3 - - - 204 - - 1.6651ms
2022-08-07 11:02:01.0388|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/learn/3 - -
2022-08-07 11:02:01.0388|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:02:01.0388|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseToLearnAsync (EducationalPortal.API)'
2022-08-07 11:02:01.0555|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourseToLearn", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseLearnDto] GetCourseToLearnAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:02:01.0555|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:02:01.0683|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 11:02:01.0683|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:02:01.0683|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:01.0683|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:01.0683|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:02:01.0818|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:01.0818|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:01.0818|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 11:02:01.1026|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[CourseId] = @__courseId_0) AND ([u0].[Email] = @__email_1)
2022-08-07 11:02:01.1026|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course learn with id: 3.
2022-08-07 11:02:01.1026|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseLearnDto'.
2022-08-07 11:02:01.1026|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseToLearnAsync (EducationalPortal.API) in 51.3449ms
2022-08-07 11:02:01.1026|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseToLearnAsync (EducationalPortal.API)'
2022-08-07 11:02:01.1026|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/learn/3 - - - 200 673 application/json;+charset=utf-8 60.7671ms
2022-08-07 11:02:02.5898|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/learned?materialId=10&courseId=3 - -
2022-08-07 11:02:02.5898|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:02:02.5898|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/learned?materialId=10&courseId=3 - - - 204 - - 2.6766ms
2022-08-07 11:02:02.5979|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 PUT https://localhost:7106/api/courses/learned?materialId=10&courseId=3 application/json 34
2022-08-07 11:02:02.5979|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:02:02.5979|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API)'
2022-08-07 11:02:02.5979|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Learned", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int32] LearnedAsync(Int32, Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:02:02.5979|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:02:02.6168|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[CourseId] = @__courseId_0) AND ([u0].[Email] = @__email_1)
2022-08-07 11:02:02.6168|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UsersCourses] SET [LearnedMaterialsCount] = @p0, [MaterialsCount] = @p1
WHERE [CourseId] = @p2 AND [UserId] = @p3;
SELECT @@ROWCOUNT;
2022-08-07 11:02:02.6168|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 11:02:02.6367|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
    WHEN [v].[Id] IS NOT NULL THEN N'Video'
    WHEN [b].[Id] IS NOT NULL THEN N'Book'
    WHEN [a].[Id] IS NOT NULL THEN N'Article'
END AS [Discriminator]
FROM [Materials] AS [m]
LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
WHERE [m].[Id] = @__id_0
2022-08-07 11:02:02.6531|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [MaterialsBaseUser] ([MaterialsId], [UsersId])
VALUES (@p0, @p1);
2022-08-07 11:02:02.6531|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:02:02.6531|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Material with id: 10 added to user with email: petro@petro. Material learned.
2022-08-07 11:02:02.6531|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Int32'.
2022-08-07 11:02:02.6531|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API) in 51.5022ms
2022-08-07 11:02:02.6531|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API)'
2022-08-07 11:02:02.6531|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 PUT https://localhost:7106/api/courses/learned?materialId=10&courseId=3 application/json 34 - 200 2 application/json;+charset=utf-8 57.6727ms
2022-08-07 11:02:10.7519|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:02:10.7519|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:02:10.7519|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 1.5221ms
2022-08-07 11:02:10.7583|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:02:10.7583|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:02:10.7583|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:02:10.7583|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:02:10.7583|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:02:10.7814|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 11:02:10.7850|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 11:02:10.7850|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 11:02:10.7850|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:02:10.7850|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 32.5603ms
2022-08-07 11:02:10.7850|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:02:10.7850|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 34.7385ms
2022-08-07 11:02:12.2949|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/2 - -
2022-08-07 11:02:12.3032|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:02:12.3032|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/2 - - - 204 - - 10.0361ms
2022-08-07 11:02:12.3032|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/2 - -
2022-08-07 11:02:12.3032|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:02:12.3032|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 11:02:12.3032|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseDto] GetCourseAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:02:12.3032|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:02:12.3258|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 11:02:12.3343|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:02:12.3343|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:12.3343|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:12.3343|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:02:12.3343|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:12.3343|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:12.3343|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:02:12.3343|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:12.3483|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:12.3483|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:02:12.3483|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:12.3483|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:12.3483|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:02:12.3483|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:12.3483|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:12.3483|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:02:12.3483|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:12.3483|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:12.3636|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:02:12.3636|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:12.3636|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:12.3854|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 11:02:12.4178|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course with id: 2.
2022-08-07 11:02:12.4178|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseDto'.
2022-08-07 11:02:12.4178|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API) in 112.9384ms
2022-08-07 11:02:12.4178|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 11:02:12.4178|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/2 - - - 200 3436 application/json;+charset=utf-8 114.1790ms
2022-08-07 11:02:15.7329|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 11:02:15.7329|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:02:15.7329|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 204 - - 1.9144ms
2022-08-07 11:02:15.7329|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 11:02:15.7329|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:02:15.7329|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 11:02:15.7380|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "MyLearning", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Core.Entities.JoinEntities.UsersCourses]] MyLearningAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:02:15.7380|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:02:15.7717|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[UserId], [t].[CourseId], [t].[LearnedMaterialsCount], [t].[MaterialsCount], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM (
    SELECT [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
    FROM [UsersCourses] AS [u]
    INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
    WHERE [u0].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c] ON [t].[CourseId] = [c].[Id]
2022-08-07 11:02:15.7717|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE [u0].[Email] = @__email_0
2022-08-07 11:02:15.7717|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 11:02:15.7897|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__user_Id_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CoursesMaterials] AS [c]
INNER JOIN (
    SELECT [m].[Id]
    FROM [Materials] AS [m]
) AS [t] ON [c].[MaterialId] = [t].[Id]
WHERE ([c].[CourseId] = @__courseId_0) AND EXISTS (
    SELECT 1
    FROM [MaterialsBaseUser] AS [m0]
    INNER JOIN [Users] AS [u] ON [m0].[UsersId] = [u].[Id]
    WHERE ([t].[Id] = [m0].[MaterialsId]) AND ([u].[Id] = @__user_Id_1))
2022-08-07 11:02:15.7897|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UsersCourses] SET [LearnedMaterialsCount] = @p0, [MaterialsCount] = @p1
WHERE [CourseId] = @p2 AND [UserId] = @p3;
SELECT @@ROWCOUNT;
2022-08-07 11:02:15.7897|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned users courses page 1 from database.
2022-08-07 11:02:15.7897|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Core.Entities.JoinEntities.UsersCourses, EducationalPortal.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:02:15.7897|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API) in 60.9633ms
2022-08-07 11:02:15.7897|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 11:02:15.7897|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 200 1758 application/json;+charset=utf-8 62.4464ms
2022-08-07 11:02:32.1601|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/courses-in-progress?pageSize=3&pageNumber=1 - -
2022-08-07 11:02:32.1669|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:02:32.1669|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/courses-in-progress?pageSize=3&pageNumber=1 - - - 204 - - 7.0312ms
2022-08-07 11:02:32.1669|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account/courses-in-progress?pageSize=3&pageNumber=1 - -
2022-08-07 11:02:32.1669|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:02:32.1669|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.CoursesInProgressAsync (EducationalPortal.API)'
2022-08-07 11:02:32.1861|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CoursesInProgress", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Core.Entities.JoinEntities.UsersCourses]] CoursesInProgressAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:02:32.1861|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:02:32.3435|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 11:02:32.3435|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 11:02:32.4799|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (114ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[UserId], [t].[CourseId], [t].[LearnedMaterialsCount], [t].[MaterialsCount], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM (
    SELECT [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
    FROM [UsersCourses] AS [u]
    INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
    WHERE ([u0].[Email] = @__email_0) AND (([u].[MaterialsCount] > [u].[LearnedMaterialsCount]) AND ([u].[LearnedMaterialsCount] > 0))
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c] ON [t].[CourseId] = [c].[Id]
2022-08-07 11:02:32.4947|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u0].[Email] = @__email_0) AND (([u].[MaterialsCount] > [u].[LearnedMaterialsCount]) AND ([u].[LearnedMaterialsCount] > 0))
2022-08-07 11:02:32.4947|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 11:02:38.7293|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__user_Id_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CoursesMaterials] AS [c]
INNER JOIN (
    SELECT [m].[Id]
    FROM [Materials] AS [m]
) AS [t] ON [c].[MaterialId] = [t].[Id]
WHERE ([c].[CourseId] = @__courseId_0) AND EXISTS (
    SELECT 1
    FROM [MaterialsBaseUser] AS [m0]
    INNER JOIN [Users] AS [u] ON [m0].[UsersId] = [u].[Id]
    WHERE ([t].[Id] = [m0].[MaterialsId]) AND ([u].[Id] = @__user_Id_1))
2022-08-07 11:02:45.5990|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UsersCourses] SET [LearnedMaterialsCount] = @p0, [MaterialsCount] = @p1
WHERE [CourseId] = @p2 AND [UserId] = @p3;
SELECT @@ROWCOUNT;
2022-08-07 11:02:45.5990|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned users courses page 1 from database.
2022-08-07 11:02:45.5990|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Core.Entities.JoinEntities.UsersCourses, EducationalPortal.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:02:45.5990|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.CoursesInProgressAsync (EducationalPortal.API) in 13420.5088ms
2022-08-07 11:02:45.5990|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.CoursesInProgressAsync (EducationalPortal.API)'
2022-08-07 11:02:45.5990|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account/courses-in-progress?pageSize=3&pageNumber=1 - - - 200 1758 application/json;+charset=utf-8 13436.8887ms
2022-08-07 11:02:50.2586|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:02:50.2586|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:02:50.2586|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 2.6518ms
2022-08-07 11:02:50.2586|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:02:50.2586|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:02:50.2586|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:02:50.2586|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:02:50.2586|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:02:50.2843|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 11:02:50.2869|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 11:02:50.2869|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 11:02:50.2869|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:02:50.2869|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 28.1069ms
2022-08-07 11:02:50.2869|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:02:50.2869|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 31.3379ms
2022-08-07 11:02:51.4718|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/2 - -
2022-08-07 11:02:51.4824|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:02:51.4824|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/2 - - - 204 - - 10.8802ms
2022-08-07 11:02:51.4824|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/2 - -
2022-08-07 11:02:51.4824|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:02:51.4824|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 11:02:51.4824|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseDto] GetCourseAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:02:51.4885|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:02:51.4885|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 11:02:51.5119|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:02:51.5119|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:51.5119|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:51.5119|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:02:51.5119|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:51.5119|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:51.5203|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:02:51.5203|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:51.5203|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:51.5203|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:02:51.5203|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:51.5203|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:51.5203|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:02:51.5203|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:51.5203|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:51.5353|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:02:51.5353|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:51.5353|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:51.5353|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:02:51.5353|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:51.5353|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:51.5353|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 11:02:51.5663|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course with id: 2.
2022-08-07 11:02:51.5663|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseDto'.
2022-08-07 11:02:51.5663|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API) in 79.6037ms
2022-08-07 11:02:51.5663|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 11:02:51.5663|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/2 - - - 200 3436 application/json;+charset=utf-8 80.9370ms
2022-08-07 11:02:53.9227|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/author/default@gmail.com - -
2022-08-07 11:02:53.9227|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:02:53.9315|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/author/default@gmail.com - - - 204 - - 8.7485ms
2022-08-07 11:02:53.9315|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account/author/default@gmail.com - -
2022-08-07 11:02:53.9315|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:02:53.9315|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.GetAuthorAsync (EducationalPortal.API)'
2022-08-07 11:02:53.9532|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAuthor", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.DTO.UserDto]] GetAuthorAsync(System.String, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:02:53.9532|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:02:54.0105|WARN|Microsoft.EntityFrameworkCore.Query|Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2022-08-07 11:02:54.0399|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [t0].[UserId], [t0].[SkillId], [t0].[Level], [t0].[Id], [t0].[Name], [t1].[RolesId], [t1].[UsersId], [t1].[Id], [t1].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN [Courses] AS [c] ON [t].[Id] = [c].[AuthorId]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[SkillId], [u0].[Level], [s].[Id], [s].[Name]
    FROM [UsersSkills] AS [u0]
    INNER JOIN [Skills] AS [s] ON [u0].[SkillId] = [s].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsersId]
ORDER BY [t].[Id], [c].[Id], [t0].[UserId], [t0].[SkillId], [t0].[Id], [t1].[RolesId], [t1].[UsersId]
2022-08-07 11:02:54.0548|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned user as author with email: default@gmail.com.
2022-08-07 11:02:54.0548|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.UserDto'.
2022-08-07 11:02:54.0548|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.GetAuthorAsync (EducationalPortal.API) in 102.8981ms
2022-08-07 11:02:54.0548|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.GetAuthorAsync (EducationalPortal.API)'
2022-08-07 11:02:54.0548|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account/author/default@gmail.com - - - 200 1238 application/json;+charset=utf-8 117.1657ms
2022-08-07 11:02:56.0604|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/1 - -
2022-08-07 11:02:56.0665|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:02:56.0665|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/1 - - - 204 - - 6.7564ms
2022-08-07 11:02:56.0665|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/1 - -
2022-08-07 11:02:56.0665|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:02:56.0665|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 11:02:56.0665|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseDto] GetCourseAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:02:56.0665|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:02:56.0892|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 11:02:56.0892|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:02:56.0892|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:56.0892|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:56.0892|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:02:56.0984|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:56.0984|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:56.0984|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:02:56.0984|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:56.0984|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:02:56.0984|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 11:02:56.1276|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course with id: 1.
2022-08-07 11:02:56.1276|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseDto'.
2022-08-07 11:02:56.1276|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API) in 51.9026ms
2022-08-07 11:02:56.1276|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 11:02:56.1276|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/1 - - - 200 2605 application/json;+charset=utf-8 53.2008ms
2022-08-07 11:02:58.1122|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account/author/default@gmail.com - -
2022-08-07 11:02:58.1122|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:02:58.1138|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.GetAuthorAsync (EducationalPortal.API)'
2022-08-07 11:02:58.1138|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAuthor", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.DTO.UserDto]] GetAuthorAsync(System.String, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:02:58.1138|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:02:58.1394|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [t0].[UserId], [t0].[SkillId], [t0].[Level], [t0].[Id], [t0].[Name], [t1].[RolesId], [t1].[UsersId], [t1].[Id], [t1].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN [Courses] AS [c] ON [t].[Id] = [c].[AuthorId]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[SkillId], [u0].[Level], [s].[Id], [s].[Name]
    FROM [UsersSkills] AS [u0]
    INNER JOIN [Skills] AS [s] ON [u0].[SkillId] = [s].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsersId]
ORDER BY [t].[Id], [c].[Id], [t0].[UserId], [t0].[SkillId], [t0].[Id], [t1].[RolesId], [t1].[UsersId]
2022-08-07 11:02:58.1519|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned user as author with email: default@gmail.com.
2022-08-07 11:02:58.1519|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.UserDto'.
2022-08-07 11:02:58.1519|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.GetAuthorAsync (EducationalPortal.API) in 38.4547ms
2022-08-07 11:02:58.1519|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.GetAuthorAsync (EducationalPortal.API)'
2022-08-07 11:02:58.1519|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account/author/default@gmail.com - - - 200 1238 application/json;+charset=utf-8 40.5660ms
2022-08-07 11:03:02.2941|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:03:02.2941|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:03:02.2941|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 3.8066ms
2022-08-07 11:03:02.3061|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:03:02.3061|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:03:02.3061|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:03:02.3061|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:03:02.3061|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:03:02.3061|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 11:03:02.3199|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 11:03:02.3199|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 11:03:02.3199|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:03:02.3199|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 17.3425ms
2022-08-07 11:03:02.3199|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:03:02.3199|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 18.5104ms
2022-08-07 11:04:22.3827|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 11:04:22.3827|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:04:22.3827|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 204 - - 2.3438ms
2022-08-07 11:04:22.3827|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 11:04:22.3988|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:04:22.3988|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 11:04:22.3988|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "MyLearning", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Core.Entities.JoinEntities.UsersCourses]] MyLearningAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:04:22.3988|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:04:22.4373|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[UserId], [t].[CourseId], [t].[LearnedMaterialsCount], [t].[MaterialsCount], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM (
    SELECT [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
    FROM [UsersCourses] AS [u]
    INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
    WHERE [u0].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c] ON [t].[CourseId] = [c].[Id]
2022-08-07 11:04:22.4373|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE [u0].[Email] = @__email_0
2022-08-07 11:04:22.4431|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 11:04:29.6389|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__user_Id_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CoursesMaterials] AS [c]
INNER JOIN (
    SELECT [m].[Id]
    FROM [Materials] AS [m]
) AS [t] ON [c].[MaterialId] = [t].[Id]
WHERE ([c].[CourseId] = @__courseId_0) AND EXISTS (
    SELECT 1
    FROM [MaterialsBaseUser] AS [m0]
    INNER JOIN [Users] AS [u] ON [m0].[UsersId] = [u].[Id]
    WHERE ([t].[Id] = [m0].[MaterialsId]) AND ([u].[Id] = @__user_Id_1))
2022-08-07 11:04:29.6600|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UsersCourses] SET [LearnedMaterialsCount] = @p0, [MaterialsCount] = @p1
WHERE [CourseId] = @p2 AND [UserId] = @p3;
SELECT @@ROWCOUNT;
2022-08-07 11:04:29.6609|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned users courses page 1 from database.
2022-08-07 11:04:29.6609|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Core.Entities.JoinEntities.UsersCourses, EducationalPortal.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:04:29.6609|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API) in 7259.7147ms
2022-08-07 11:04:29.6609|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 11:04:29.6609|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 200 1758 application/json;+charset=utf-8 7269.5243ms
2022-08-07 11:05:12.7949|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:05:12.7949|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:05:12.7949|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 2.0150ms
2022-08-07 11:05:12.8113|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:05:12.8113|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:05:12.8113|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:05:12.8113|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:05:12.8113|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:05:12.8331|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 11:05:12.8331|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 11:05:12.8331|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 11:05:12.8331|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:05:12.8331|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 32.9304ms
2022-08-07 11:05:12.8331|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:05:12.8331|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 34.2139ms
2022-08-07 11:06:32.2738|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/token/refresh - -
2022-08-07 11:06:32.2738|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:06:32.2738|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/token/refresh - - - 204 - - 2.6909ms
2022-08-07 11:06:32.2738|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/token/refresh application/json 568
2022-08-07 11:06:32.2738|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:06:32.2851|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/token/refresh application/json 568 - 404 0 - 0.8654ms
2022-08-07 11:11:32.4638|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:11:32.4638|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:11:32.4638|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 3.4354ms
2022-08-07 11:11:32.4757|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:11:32.4757|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:11:32.4757|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Failed to validate the token.|Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-07 11:11:32.7837|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-08-07 11:11:32.7837|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:11:32.7837|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:11:32.7837|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:11:32.9295|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 11:11:32.9295|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 11:11:32.9295|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 11:11:32.9295|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:11:32.9295|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 154.6031ms
2022-08-07 11:11:32.9295|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:11:32.9295|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 463.3870ms
2022-08-07 11:11:43.0025|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/login - -
2022-08-07 11:11:43.0041|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:11:43.0041|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/login - - - 204 - - 1.8619ms
2022-08-07 11:11:43.0041|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/account/login application/json 85
2022-08-07 11:11:43.0041|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:11:43.0041|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Failed to validate the token.|Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-07 11:11:43.0041|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-08-07 11:11:43.0041|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API)'
2022-08-07 11:11:43.0041|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] LoginAsync(EducationalPortal.Application.Models.LoginModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:11:43.0041|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:11:43.0588|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:11:43.0588|INFO|EducationalPortal.Infrastructure.Services.Identity.PasswordHasher|Checked password.
2022-08-07 11:11:43.0588|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:11:43.0588|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned new refresh token.
2022-08-07 11:11:43.0716|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserToken] ([RefreshToken], [RefreshTokenExpiryTime])
VALUES (@p0, @p1);
SELECT [Id]
FROM [UserToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:11:43.0716|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@p9='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 450), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p2, [Balance] = @p3, [Email] = @p4, [Name] = @p5, [PasswordHash] = @p6, [Position] = @p7, [UserTokenId] = @p8
WHERE [Id] = @p9;
SELECT @@ROWCOUNT;
2022-08-07 11:11:43.0716|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned claims for user with email: petro@petro.
2022-08-07 11:11:43.0716|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:11:43.0716|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned new access and refresh tokens.
2022-08-07 11:11:43.0716|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Logged in user with email: petro@petro.
2022-08-07 11:11:43.0716|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:11:43.0716|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API) in 68.4936ms
2022-08-07 11:11:43.0716|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API)'
2022-08-07 11:11:43.0716|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/account/login application/json 85 - 200 471 application/json;+charset=utf-8 74.4180ms
2022-08-07 11:11:43.1176|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:11:43.1176|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:11:43.1176|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 0.3615ms
2022-08-07 11:11:43.1176|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:11:43.1176|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:11:43.1291|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:11:43.1291|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:11:43.1291|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:11:43.1291|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 11:11:43.1444|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 11:11:43.1444|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 11:11:43.1444|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:11:43.1444|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 18.9607ms
2022-08-07 11:11:43.1444|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:11:43.1444|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 26.9096ms
2022-08-07 11:16:15.1919|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:16:15.1919|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:16:15.1919|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 8.7004ms
2022-08-07 11:16:15.1919|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:16:15.1919|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:16:15.1919|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:16:15.1919|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:16:15.1919|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:16:15.3812|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 11:16:15.3812|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 11:16:15.3812|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 11:16:15.3812|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:16:15.3812|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 188.7676ms
2022-08-07 11:16:15.3812|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:16:15.3812|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 190.1764ms
2022-08-07 11:16:35.9992|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account - -
2022-08-07 11:16:35.9992|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:16:35.9992|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account - - - 204 - - 2.9096ms
2022-08-07 11:16:36.0161|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account - -
2022-08-07 11:16:36.0161|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:16:36.0161|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API)'
2022-08-07 11:16:36.0233|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetProfile", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.DTO.UserDto]] GetProfileAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:16:36.0233|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:16:36.1214|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (54ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [t0].[UserId], [t0].[SkillId], [t0].[Level], [t0].[Id], [t0].[Name], [t1].[RolesId], [t1].[UsersId], [t1].[Id], [t1].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN [Courses] AS [c] ON [t].[Id] = [c].[AuthorId]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[SkillId], [u0].[Level], [s].[Id], [s].[Name]
    FROM [UsersSkills] AS [u0]
    INNER JOIN [Skills] AS [s] ON [u0].[SkillId] = [s].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsersId]
ORDER BY [t].[Id], [c].[Id], [t0].[UserId], [t0].[SkillId], [t0].[Id], [t1].[RolesId], [t1].[UsersId]
2022-08-07 11:16:36.1328|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned user with email: petro@petro.
2022-08-07 11:16:36.1328|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.UserDto'.
2022-08-07 11:16:36.1328|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API) in 110.1493ms
2022-08-07 11:16:36.1328|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API)'
2022-08-07 11:16:36.1328|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account - - - 200 193 application/json;+charset=utf-8 117.7080ms
2022-08-07 11:16:47.7593|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/token/refresh - -
2022-08-07 11:16:47.7593|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:16:47.7593|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/token/refresh - - - 204 - - 1.2313ms
2022-08-07 11:16:47.7593|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/token/refresh application/json 471
2022-08-07 11:16:47.7593|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:16:47.7593|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/token/refresh application/json 471 - 404 0 - 0.7219ms
2022-08-07 11:17:49.9422|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/login - -
2022-08-07 11:17:49.9422|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:17:49.9422|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/login - - - 204 - - 5.7107ms
2022-08-07 11:17:49.9422|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/account/login application/json 85
2022-08-07 11:17:49.9422|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:17:49.9422|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API)'
2022-08-07 11:17:49.9422|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] LoginAsync(EducationalPortal.Application.Models.LoginModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:17:49.9422|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:17:49.9793|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:17:49.9793|INFO|EducationalPortal.Infrastructure.Services.Identity.PasswordHasher|Checked password.
2022-08-07 11:17:49.9793|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:17:49.9793|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned new refresh token.
2022-08-07 11:17:49.9793|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserToken] ([RefreshToken], [RefreshTokenExpiryTime])
VALUES (@p0, @p1);
SELECT [Id]
FROM [UserToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:17:49.9923|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@p9='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 450), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p2, [Balance] = @p3, [Email] = @p4, [Name] = @p5, [PasswordHash] = @p6, [Position] = @p7, [UserTokenId] = @p8
WHERE [Id] = @p9;
SELECT @@ROWCOUNT;
2022-08-07 11:17:49.9923|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned claims for user with email: petro@petro.
2022-08-07 11:17:49.9923|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:17:49.9923|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned new access and refresh tokens.
2022-08-07 11:17:49.9923|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Logged in user with email: petro@petro.
2022-08-07 11:17:49.9923|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:17:49.9923|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API) in 42.9232ms
2022-08-07 11:17:49.9923|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API)'
2022-08-07 11:17:49.9923|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/account/login application/json 85 - 200 471 application/json;+charset=utf-8 43.9951ms
2022-08-07 11:17:50.0447|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account - -
2022-08-07 11:17:50.0447|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:17:50.0447|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account - - - 204 - - 0.3913ms
2022-08-07 11:17:50.0548|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account - -
2022-08-07 11:17:50.0548|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:17:50.0548|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API)'
2022-08-07 11:17:50.0548|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetProfile", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.DTO.UserDto]] GetProfileAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:17:50.0548|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:17:50.0925|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [t0].[UserId], [t0].[SkillId], [t0].[Level], [t0].[Id], [t0].[Name], [t1].[RolesId], [t1].[UsersId], [t1].[Id], [t1].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN [Courses] AS [c] ON [t].[Id] = [c].[AuthorId]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[SkillId], [u0].[Level], [s].[Id], [s].[Name]
    FROM [UsersSkills] AS [u0]
    INNER JOIN [Skills] AS [s] ON [u0].[SkillId] = [s].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsersId]
ORDER BY [t].[Id], [c].[Id], [t0].[UserId], [t0].[SkillId], [t0].[Id], [t1].[RolesId], [t1].[UsersId]
2022-08-07 11:17:50.1024|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned user with email: petro@petro.
2022-08-07 11:17:50.1024|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.UserDto'.
2022-08-07 11:17:50.1024|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API) in 46.6904ms
2022-08-07 11:17:50.1024|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API)'
2022-08-07 11:17:50.1024|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account - - - 200 193 application/json;+charset=utf-8 48.3283ms
2022-08-07 11:17:51.6812|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:17:51.6812|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:17:51.6812|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 2.8638ms
2022-08-07 11:17:51.6812|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:17:51.6812|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:17:51.6812|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:17:51.6812|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:17:51.6812|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:17:51.6958|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 11:17:51.6958|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 11:17:51.6958|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 11:17:51.7075|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:17:51.7075|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 20.3658ms
2022-08-07 11:17:51.7075|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:17:51.7075|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 22.1903ms
2022-08-07 11:19:37.9076|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:19:37.9207|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:19:37.9207|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 13.4209ms
2022-08-07 11:19:38.0025|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:19:38.0025|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:19:38.0025|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:19:38.0025|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:19:38.0043|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:19:38.0043|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 11:19:38.0043|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 11:19:38.0219|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 11:19:38.0219|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:19:38.0219|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 19.2695ms
2022-08-07 11:19:38.0219|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:19:38.0219|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 20.4503ms
2022-08-07 11:21:16.5075|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/2 - -
2022-08-07 11:21:16.5075|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:21:16.5075|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/2 - - - 204 - - 7.4457ms
2022-08-07 11:21:16.5357|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/2 - -
2022-08-07 11:21:16.5357|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:21:16.5357|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 11:21:16.5357|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseDto] GetCourseAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:21:16.5850|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:21:16.6294|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (32ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 11:21:16.6500|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:21:16.6500|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:21:16.6704|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:21:16.6704|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:21:16.6704|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:21:16.6767|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:21:16.6767|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:21:16.6767|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:21:16.6767|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:21:16.6767|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:21:16.6767|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:21:16.6767|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:21:16.6767|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:21:16.6767|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:21:16.6923|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:21:16.6923|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:21:16.6923|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:21:16.6923|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:21:16.6923|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:21:16.6923|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:21:16.6923|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:21:16.7196|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 11:21:16.7412|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course with id: 2.
2022-08-07 11:21:16.7412|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseDto'.
2022-08-07 11:21:16.7412|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API) in 161.3274ms
2022-08-07 11:21:16.7412|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 11:21:16.7412|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/2 - - - 200 3436 application/json;+charset=utf-8 206.5165ms
2022-08-07 11:21:18.8693|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:21:18.8693|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:21:18.8693|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 3.8994ms
2022-08-07 11:21:18.8800|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:21:18.8800|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:21:18.8800|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:21:18.8800|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:21:18.8800|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:21:18.8800|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 11:21:18.8957|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 11:21:18.8957|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 11:21:18.8957|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:21:18.8957|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 21.2341ms
2022-08-07 11:21:18.8957|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:21:18.8957|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 22.3953ms
2022-08-07 11:21:22.1272|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account - -
2022-08-07 11:21:22.1272|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:21:22.1272|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account - - - 204 - - 1.1836ms
2022-08-07 11:21:22.1319|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account - -
2022-08-07 11:21:22.1319|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:21:22.1319|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API)'
2022-08-07 11:21:22.1319|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetProfile", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.DTO.UserDto]] GetProfileAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:21:22.1319|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:21:22.1834|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [t0].[UserId], [t0].[SkillId], [t0].[Level], [t0].[Id], [t0].[Name], [t1].[RolesId], [t1].[UsersId], [t1].[Id], [t1].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN [Courses] AS [c] ON [t].[Id] = [c].[AuthorId]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[SkillId], [u0].[Level], [s].[Id], [s].[Name]
    FROM [UsersSkills] AS [u0]
    INNER JOIN [Skills] AS [s] ON [u0].[SkillId] = [s].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsersId]
ORDER BY [t].[Id], [c].[Id], [t0].[UserId], [t0].[SkillId], [t0].[Id], [t1].[RolesId], [t1].[UsersId]
2022-08-07 11:21:22.1942|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned user with email: petro@petro.
2022-08-07 11:21:22.1942|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.UserDto'.
2022-08-07 11:21:22.1942|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API) in 61.7015ms
2022-08-07 11:21:22.1942|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API)'
2022-08-07 11:21:22.1942|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account - - - 200 193 application/json;+charset=utf-8 63.1712ms
2022-08-07 11:21:46.9337|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account - -
2022-08-07 11:21:46.9416|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:21:46.9416|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account - - - 204 - - 8.2077ms
2022-08-07 11:21:46.9416|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account - -
2022-08-07 11:21:46.9416|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:21:46.9416|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API)'
2022-08-07 11:21:46.9416|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetProfile", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.DTO.UserDto]] GetProfileAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:21:46.9416|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:21:47.0178|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [t0].[UserId], [t0].[SkillId], [t0].[Level], [t0].[Id], [t0].[Name], [t1].[RolesId], [t1].[UsersId], [t1].[Id], [t1].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN [Courses] AS [c] ON [t].[Id] = [c].[AuthorId]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[SkillId], [u0].[Level], [s].[Id], [s].[Name]
    FROM [UsersSkills] AS [u0]
    INNER JOIN [Skills] AS [s] ON [u0].[SkillId] = [s].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsersId]
ORDER BY [t].[Id], [c].[Id], [t0].[UserId], [t0].[SkillId], [t0].[Id], [t1].[RolesId], [t1].[UsersId]
2022-08-07 11:21:47.0393|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned user with email: petro@petro.
2022-08-07 11:21:47.0393|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.UserDto'.
2022-08-07 11:21:47.0393|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API) in 92.2233ms
2022-08-07 11:21:47.0393|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API)'
2022-08-07 11:21:47.0393|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account - - - 200 193 application/json;+charset=utf-8 94.9424ms
2022-08-07 11:26:01.3611|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:26:02.4231|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (106ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2022-08-07 11:26:02.6847|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (76ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [EducationalPortal] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2022-08-07 11:26:02.7160|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [EducationalPortal];
2022-08-07 11:26:03.2153|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (281ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [EducationalPortal];
2022-08-07 11:26:03.2881|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (73ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [EducationalPortal] SET READ_COMMITTED_SNAPSHOT ON;
END;
2022-08-07 11:26:03.3047|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2022-08-07 11:26:03.6085|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Authors] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Authors] PRIMARY KEY ([Id])
);
2022-08-07 11:26:03.6179|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Extensions] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Extensions] PRIMARY KEY ([Id])
);
2022-08-07 11:26:03.6341|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Materials] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Link] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Materials] PRIMARY KEY ([Id])
);
2022-08-07 11:26:03.6341|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Qualities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Qualities] PRIMARY KEY ([Id])
);
2022-08-07 11:26:03.6341|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Resources] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Resources] PRIMARY KEY ([Id])
);
2022-08-07 11:26:03.6341|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Roles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_Roles] PRIMARY KEY ([Id])
);
2022-08-07 11:26:03.6341|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Skills] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Skills] PRIMARY KEY ([Id])
);
2022-08-07 11:26:03.6488|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UserToken] (
    [Id] int NOT NULL IDENTITY,
    [RefreshToken] nvarchar(max) NOT NULL,
    [RefreshTokenExpiryTime] datetime2 NOT NULL,
    CONSTRAINT [PK_UserToken] PRIMARY KEY ([Id])
);
2022-08-07 11:26:03.6488|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Books] (
    [Id] int NOT NULL,
    [PagesCount] int NOT NULL,
    [ExtensionId] int NOT NULL,
    [PublicationYear] int NOT NULL,
    CONSTRAINT [PK_Books] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Books_Extensions_ExtensionId] FOREIGN KEY ([ExtensionId]) REFERENCES [Extensions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Books_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id])
);
2022-08-07 11:26:03.6633|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Videos] (
    [Id] int NOT NULL,
    [Duration] datetime2 NOT NULL,
    [QualityId] int NOT NULL,
    CONSTRAINT [PK_Videos] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Videos_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id]),
    CONSTRAINT [FK_Videos_Qualities_QualityId] FOREIGN KEY ([QualityId]) REFERENCES [Qualities] ([Id]) ON DELETE CASCADE
);
2022-08-07 11:26:03.6633|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Articles] (
    [Id] int NOT NULL,
    [ResourceId] int NOT NULL,
    [PublicationDate] datetime2 NOT NULL,
    CONSTRAINT [PK_Articles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Articles_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id]),
    CONSTRAINT [FK_Articles_Resources_ResourceId] FOREIGN KEY ([ResourceId]) REFERENCES [Resources] ([Id]) ON DELETE CASCADE
);
2022-08-07 11:26:03.6633|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Position] nvarchar(max) NULL,
    [Avatar] nvarchar(max) NOT NULL,
    [Email] nvarchar(450) NOT NULL,
    [PasswordHash] nvarchar(max) NOT NULL,
    [Balance] int NOT NULL,
    [UserTokenId] int NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_UserToken_UserTokenId] FOREIGN KEY ([UserTokenId]) REFERENCES [UserToken] ([Id])
);
2022-08-07 11:26:03.6633|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AuthorBook] (
    [AuthorsId] int NOT NULL,
    [BooksId] int NOT NULL,
    CONSTRAINT [PK_AuthorBook] PRIMARY KEY ([AuthorsId], [BooksId]),
    CONSTRAINT [FK_AuthorBook_Authors_AuthorsId] FOREIGN KEY ([AuthorsId]) REFERENCES [Authors] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AuthorBook_Books_BooksId] FOREIGN KEY ([BooksId]) REFERENCES [Books] ([Id]) ON DELETE CASCADE
);
2022-08-07 11:26:03.6633|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Courses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Thumbnail] nvarchar(max) NOT NULL,
    [ShortDescription] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [Price] int NOT NULL,
    [AuthorId] nvarchar(450) NULL,
    CONSTRAINT [PK_Courses] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Courses_Users_AuthorId] FOREIGN KEY ([AuthorId]) REFERENCES [Users] ([Id])
);
2022-08-07 11:26:03.6762|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [MaterialsBaseUser] (
    [MaterialsId] int NOT NULL,
    [UsersId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_MaterialsBaseUser] PRIMARY KEY ([MaterialsId], [UsersId]),
    CONSTRAINT [FK_MaterialsBaseUser_Materials_MaterialsId] FOREIGN KEY ([MaterialsId]) REFERENCES [Materials] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_MaterialsBaseUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 11:26:03.6762|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [RoleUser] (
    [RolesId] int NOT NULL,
    [UsersId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_RoleUser] PRIMARY KEY ([RolesId], [UsersId]),
    CONSTRAINT [FK_RoleUser_Roles_RolesId] FOREIGN KEY ([RolesId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RoleUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 11:26:03.6762|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UsersSkills] (
    [UserId] nvarchar(450) NOT NULL,
    [SkillId] int NOT NULL,
    [Level] int NOT NULL,
    CONSTRAINT [PK_UsersSkills] PRIMARY KEY ([UserId], [SkillId]),
    CONSTRAINT [FK_UsersSkills_Skills_SkillId] FOREIGN KEY ([SkillId]) REFERENCES [Skills] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UsersSkills_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 11:26:03.6762|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CartItems] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NULL,
    [CourseId] int NOT NULL,
    CONSTRAINT [PK_CartItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_CartItems_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CartItems_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2022-08-07 11:26:03.6762|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CoursesMaterials] (
    [CourseId] int NOT NULL,
    [MaterialId] int NOT NULL,
    [Index] int NOT NULL,
    CONSTRAINT [PK_CoursesMaterials] PRIMARY KEY ([CourseId], [MaterialId]),
    CONSTRAINT [FK_CoursesMaterials_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CoursesMaterials_Materials_MaterialId] FOREIGN KEY ([MaterialId]) REFERENCES [Materials] ([Id]) ON DELETE CASCADE
);
2022-08-07 11:26:03.6931|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CoursesSkills] (
    [CourseId] int NOT NULL,
    [SkillId] int NOT NULL,
    CONSTRAINT [PK_CoursesSkills] PRIMARY KEY ([CourseId], [SkillId]),
    CONSTRAINT [FK_CoursesSkills_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CoursesSkills_Skills_SkillId] FOREIGN KEY ([SkillId]) REFERENCES [Skills] ([Id]) ON DELETE CASCADE
);
2022-08-07 11:26:03.6931|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [ShoppingHistory] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NULL,
    [CourseId] int NOT NULL,
    [Price] int NOT NULL,
    [Date] datetime2 NOT NULL,
    CONSTRAINT [PK_ShoppingHistory] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ShoppingHistory_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ShoppingHistory_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2022-08-07 11:26:03.6931|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UsersCourses] (
    [UserId] nvarchar(450) NOT NULL,
    [CourseId] int NOT NULL,
    [MaterialsCount] int NOT NULL,
    [LearnedMaterialsCount] int NOT NULL,
    CONSTRAINT [PK_UsersCourses] PRIMARY KEY ([UserId], [CourseId]),
    CONSTRAINT [FK_UsersCourses_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UsersCourses_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 11:26:03.6931|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Articles_ResourceId] ON [Articles] ([ResourceId]);
2022-08-07 11:26:03.6931|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_AuthorBook_BooksId] ON [AuthorBook] ([BooksId]);
2022-08-07 11:26:03.6931|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Books_ExtensionId] ON [Books] ([ExtensionId]);
2022-08-07 11:26:03.6931|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CartItems_CourseId] ON [CartItems] ([CourseId]);
2022-08-07 11:26:03.7073|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CartItems_UserId] ON [CartItems] ([UserId]);
2022-08-07 11:26:03.7073|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Courses_AuthorId] ON [Courses] ([AuthorId]);
2022-08-07 11:26:03.7073|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CoursesMaterials_MaterialId] ON [CoursesMaterials] ([MaterialId]);
2022-08-07 11:26:03.7073|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CoursesSkills_SkillId] ON [CoursesSkills] ([SkillId]);
2022-08-07 11:26:03.7073|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_MaterialsBaseUser_UsersId] ON [MaterialsBaseUser] ([UsersId]);
2022-08-07 11:26:03.7073|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Roles_Name] ON [Roles] ([Name]);
2022-08-07 11:26:03.7073|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_RoleUser_UsersId] ON [RoleUser] ([UsersId]);
2022-08-07 11:26:03.7073|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_ShoppingHistory_CourseId] ON [ShoppingHistory] ([CourseId]);
2022-08-07 11:26:03.7073|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_ShoppingHistory_UserId] ON [ShoppingHistory] ([UserId]);
2022-08-07 11:26:03.7073|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]);
2022-08-07 11:26:03.7073|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Users_UserTokenId] ON [Users] ([UserTokenId]);
2022-08-07 11:26:03.7073|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_UsersCourses_CourseId] ON [UsersCourses] ([CourseId]);
2022-08-07 11:26:03.7073|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_UsersSkills_SkillId] ON [UsersSkills] ([SkillId]);
2022-08-07 11:26:03.7073|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Videos_QualityId] ON [Videos] ([QualityId]);
2022-08-07 11:26:04.2647|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (97ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [Qualities] USING (
VALUES (@p0, 0),
(@p1, 1),
(@p2, 2),
(@p3, 3),
(@p4, 4),
(@p5, 5),
(@p6, 6),
(@p7, 7)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [i].[Id] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-08-07 11:26:04.4808|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:04.4921|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 11:26:04.5063|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Extensions] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Extensions]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:04.5255|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:04.5879|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:04.5879|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 11:26:04.5989|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 11:26:04.5989|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Resources] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Resources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:04.6240|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:04.6240|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 11:26:04.6676|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:04.6676|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:04.6676|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:04.7067|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:04.7082|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:04.7082|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:04.7082|INFO|EducationalPortal.Infrastructure.Services.Identity.PasswordHasher|Hashed password.
2022-08-07 11:26:04.8101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Avatar], [Balance], [Email], [Name], [PasswordHash], [Position], [UserTokenId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2022-08-07 11:26:04.8233|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[@p8='?' (DbType = Int32), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (Size = 450), @p12='?' (DbType = Int32), @p13='?' (Size = 450), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Size = 450), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Size = 450), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RoleUser] ([RolesId], [UsersId])
VALUES (@p8, @p9),
(@p10, @p11);
INSERT INTO [UsersSkills] ([SkillId], [UserId], [Level])
VALUES (@p12, @p13, @p14),
(@p15, @p16, @p17),
(@p18, @p19, @p20);
2022-08-07 11:26:04.9228|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:04.9392|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11),
(@p12, @p13, @p14);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p15, @p16),
(@p17, @p18),
(@p19, @p20);
2022-08-07 11:26:04.9582|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UsersCourses] ([CourseId], [UserId], [LearnedMaterialsCount], [MaterialsCount])
VALUES (@p0, @p1, @p2, @p3);
2022-08-07 11:26:04.9582|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [Skills] USING (
VALUES (@p0, 0),
(@p1, 1),
(@p2, 2),
(@p3, 3),
(@p4, 4),
(@p5, 5),
(@p6, 6),
(@p7, 7),
(@p8, 8)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [i].[Id] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-08-07 11:26:05.0476|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:05.0476|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 11:26:05.0476|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:05.0476|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 11:26:05.0526|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:05.0526|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 11:26:05.0526|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:05.0526|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:05.0526|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 11:26:05.0526|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 11:26:05.0526|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:05.0686|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:05.0686|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 11:26:05.0686|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 11:26:05.0686|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Resources] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Resources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:05.0686|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:05.0686|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 11:26:05.0686|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:05.0820|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 11:26:05.0820|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:05.0981|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = Int32), @p32='?' (DbType = Int32), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = Int32), @p38='?' (DbType = Int32), @p39='?' (DbType = Int32), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11),
(@p12, @p13, @p14),
(@p15, @p16, @p17),
(@p18, @p19, @p20),
(@p21, @p22, @p23),
(@p24, @p25, @p26);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p27, @p28),
(@p29, @p30),
(@p31, @p32),
(@p33, @p34),
(@p35, @p36),
(@p37, @p38),
(@p39, @p40),
(@p41, @p42),
(@p43, @p44);
2022-08-07 11:26:05.0981|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:26:05.0981|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p12, @p13),
(@p14, @p15),
(@p16, @p17);
2022-08-07 11:26:05.4597|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\rareb\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-07 11:26:05.8134|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7106
2022-08-07 11:26:05.8134|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:7105
2022-08-07 11:26:05.8213|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2022-08-07 11:26:05.8213|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2022-08-07 11:26:05.8213|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\
2022-08-07 11:26:08.1754|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger - -
2022-08-07 11:26:08.3294|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger - - - 301 0 - 161.5673ms
2022-08-07 11:26:08.3471|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - -
2022-08-07 11:26:08.7582|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - -
2022-08-07 11:26:08.7582|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - -
2022-08-07 11:26:08.7582|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - -
2022-08-07 11:26:08.7582|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 11:26:08.7582|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - - - 200 - text/html;charset=utf-8 418.0855ms
2022-08-07 11:26:08.7984|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 11:26:08.8869|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 127.2624ms
2022-08-07 11:26:08.9501|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-07 11:26:08.9501|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-07 11:26:08.9501|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-07 11:26:08.9501|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 191.1498ms
2022-08-07 11:26:08.9501|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - - - 200 143943 text/css 192.3672ms
2022-08-07 11:26:08.9501|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - - - 200 1095087 application/javascript 191.7225ms
2022-08-07 11:26:09.0634|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 264.9822ms
2022-08-07 11:26:10.4435|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - -
2022-08-07 11:26:10.9211|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 477.6830ms
2022-08-07 11:26:34.1952|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:26:34.2912|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:26:34.3079|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 112.7221ms
2022-08-07 11:26:34.3423|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 471
2022-08-07 11:26:34.4048|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:26:34.8919|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:26:34.9239|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:26:38.4026|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:26:38.4231|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:26:39.8866|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (54ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:26:40.1422|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 5212.1364ms
2022-08-07 11:26:40.1449|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:26:40.4329|ERROR|EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware|Something went wrong: Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: SecurityToken has Expired
   at EducationalPortal.Infrastructure.Services.Identity.TokensService.RefreshAsync(TokensModel tokensModel, String email, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\Services\Identity\TokensService.cs:line 39
   at EducationalPortal.API.Controllers.TokensController.RefreshAsync(TokensModel tokensModel, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\Controllers\TokensController.cs:line 20
   at lambda_method678(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\ExceptionHandling\ExceptionMiddleware.cs:line 25
2022-08-07 11:26:40.5957|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 471 - 500 - application/json 6253.4633ms
2022-08-07 11:27:02.4059|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/login - -
2022-08-07 11:27:02.4216|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:02.4216|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/login - - - 204 - - 15.9453ms
2022-08-07 11:27:02.4260|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/account/login application/json 85
2022-08-07 11:27:02.4260|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:02.4260|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API)'
2022-08-07 11:27:02.4479|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] LoginAsync(EducationalPortal.Application.Models.LoginModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:27:02.6962|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:27:03.1074|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:27:03.3506|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API) in 902.5149ms
2022-08-07 11:27:03.3506|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API)'
2022-08-07 11:27:03.5520|ERROR|EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware|Entity not found: EducationalPortal.Application.Exceptions.NotFoundException: "User" was not found.
   at EducationalPortal.Infrastructure.Services.Identity.UserManager.LoginAsync(LoginModel login, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\Services\Identity\UserManager.cs:line 72
   at EducationalPortal.Infrastructure.Services.AccountService.LoginAsync(LoginModel login, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\Services\AccountService.cs:line 54
   at EducationalPortal.API.Controllers.AccountController.LoginAsync(LoginModel model, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\Controllers\AccountController.cs:line 86
   at lambda_method703(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\ExceptionHandling\ExceptionMiddleware.cs:line 25
2022-08-07 11:27:03.5520|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/account/login application/json 85 - 404 - application/json 1127.4596ms
2022-08-07 11:27:16.3675|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/register - -
2022-08-07 11:27:16.3675|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:16.3675|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/register - - - 204 - - 1.8771ms
2022-08-07 11:27:16.3675|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/account/register application/json 77
2022-08-07 11:27:16.3675|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:16.3675|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.RegisterAsync (EducationalPortal.API)'
2022-08-07 11:27:16.3675|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RegisterAsync(EducationalPortal.Application.Models.RegisterModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:27:16.3794|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:27:16.4524|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-08-07 11:27:16.5360|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.RegisterAsync (EducationalPortal.API) in 157.1823ms
2022-08-07 11:27:16.5360|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.RegisterAsync (EducationalPortal.API)'
2022-08-07 11:27:16.5360|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/account/register application/json 77 - 400 350 application/problem+json;+charset=utf-8 165.0021ms
2022-08-07 11:27:21.2061|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/account/register application/json 81
2022-08-07 11:27:21.2061|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:21.2081|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.RegisterAsync (EducationalPortal.API)'
2022-08-07 11:27:21.2081|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RegisterAsync(EducationalPortal.Application.Models.RegisterModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:27:21.2081|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:27:21.2389|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:27:21.2570|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Name] = N'Student'
2022-08-07 11:27:21.2570|INFO|EducationalPortal.Infrastructure.Services.Identity.PasswordHasher|Hashed password.
2022-08-07 11:27:21.2570|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:27:21.2570|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned new refresh token.
2022-08-07 11:27:21.3327|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserToken] ([RefreshToken], [RefreshTokenExpiryTime])
VALUES (@p0, @p1);
SELECT [Id]
FROM [UserToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:27:21.3575|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (Size = 450), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Avatar], [Balance], [Email], [Name], [PasswordHash], [Position], [UserTokenId])
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2022-08-07 11:27:21.3718|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned claims for user with email: petro@petro.
2022-08-07 11:27:21.3990|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:27:21.3990|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned new access and refresh tokens.
2022-08-07 11:27:21.3990|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Created user with email: petro@petro.
2022-08-07 11:27:21.3990|INFO|EducationalPortal.Infrastructure.Services.AccountService|Registered user with email: petro@petro.
2022-08-07 11:27:21.3990|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:27:21.3990|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.RegisterAsync (EducationalPortal.API) in 194.4842ms
2022-08-07 11:27:21.3990|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.RegisterAsync (EducationalPortal.API)'
2022-08-07 11:27:21.3990|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/account/register application/json 81 - 200 568 application/json;+charset=utf-8 197.0556ms
2022-08-07 11:27:21.4211|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:27:21.4211|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:21.4211|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 1.0220ms
2022-08-07 11:27:21.4368|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:27:21.4368|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:21.4368|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:27:21.4479|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:27:21.4479|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:27:21.4967|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 11:27:21.4967|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 11:27:21.5039|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 11:27:21.5529|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 11:27:21.6018|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 11:27:21.6018|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:27:21.6159|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 167.8587ms
2022-08-07 11:27:21.6159|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:27:21.6159|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 179.3735ms
2022-08-07 11:27:32.2575|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:27:32.2575|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:32.2575|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 1.1718ms
2022-08-07 11:27:32.2575|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:27:32.2575|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:32.2575|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:27:32.2575|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:27:32.2575|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:27:32.3375|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (48ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 11:27:32.3375|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 11:27:32.3524|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 11:27:32.3524|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:27:32.3524|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 90.5509ms
2022-08-07 11:27:32.3524|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:27:32.3524|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 91.6825ms
2022-08-07 11:27:37.6507|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/3 - -
2022-08-07 11:27:37.6507|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:37.6507|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/3 - - - 204 - - 1.7250ms
2022-08-07 11:27:37.6507|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/3 - -
2022-08-07 11:27:37.6507|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:37.6507|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 11:27:37.6666|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseDto] GetCourseAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:27:37.6666|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:27:37.9061|WARN|Microsoft.EntityFrameworkCore.Query|Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2022-08-07 11:27:38.0149|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (31ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 11:27:38.1384|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:27:38.2077|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:27:38.2330|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:27:38.2330|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:27:38.2386|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:27:38.2386|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:27:38.2820|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (15ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 11:27:38.3157|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course with id: 3.
2022-08-07 11:27:38.3157|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseDto'.
2022-08-07 11:27:38.3423|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API) in 675.5825ms
2022-08-07 11:27:38.3423|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 11:27:38.3423|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/3 - - - 200 2269 application/json;+charset=utf-8 686.9964ms
2022-08-07 11:27:39.3243|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/add-to-cart/3 - -
2022-08-07 11:27:39.3243|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:39.3243|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/add-to-cart/3 - - - 204 - - 3.1432ms
2022-08-07 11:27:39.3243|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 PUT https://localhost:7106/api/shopping-cart/add-to-cart/3 application/json 2
2022-08-07 11:27:39.3346|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:39.3346|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.AddToCartAsync (EducationalPortal.API)'
2022-08-07 11:27:39.3346|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "AddToCart", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCartAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 11:27:39.3346|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:27:39.4665|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (21ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [CartItems] AS [c]
        INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
        LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
        WHERE ([c0].[Id] = @__courseId_0) AND ([u].[Email] = @__email_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-08-07 11:27:39.4903|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:27:39.5144|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CartItems] ([CourseId], [UserId])
VALUES (@p0, @p1);
SELECT [Id]
FROM [CartItems]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:27:39.5256|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Created cart item with id: 1.
2022-08-07 11:27:39.5256|INFO|Microsoft.AspNetCore.Mvc.StatusCodeResult|Executing StatusCodeResult, setting HTTP status code 200
2022-08-07 11:27:39.5256|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.AddToCartAsync (EducationalPortal.API) in 187.0867ms
2022-08-07 11:27:39.5256|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.AddToCartAsync (EducationalPortal.API)'
2022-08-07 11:27:39.5406|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 PUT https://localhost:7106/api/shopping-cart/add-to-cart/3 application/json 2 - 200 0 - 210.1425ms
2022-08-07 11:27:39.5814|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - -
2022-08-07 11:27:39.5820|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:39.5820|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - - - 204 - - 1.1087ms
2022-08-07 11:27:39.5820|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - -
2022-08-07 11:27:39.5820|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:39.6031|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API)'
2022-08-07 11:27:39.6281|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCart", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.CartItemDto]] GetCartAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 11:27:39.6293|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:27:39.6561|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/total-price - -
2022-08-07 11:27:39.6561|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:39.6561|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/total-price - - - 204 - - 0.4098ms
2022-08-07 11:27:39.6743|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/shopping-cart/total-price - -
2022-08-07 11:27:39.6743|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:39.6743|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API)'
2022-08-07 11:27:39.6776|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 11:27:39.6776|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 11:27:39.6776|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetTotalPrice", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int32] GetTotalPriceAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 11:27:39.6776|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:27:39.7009|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[CourseId], [t].[UserId], [c0].[Id], [c0].[AuthorId], [c0].[Description], [c0].[Name], [c0].[Price], [c0].[ShortDescription], [c0].[Thumbnail]
FROM (
    SELECT [c].[Id], [c].[CourseId], [c].[UserId]
    FROM [CartItems] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
    WHERE [u].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c0] ON [t].[CourseId] = [c0].[Id]
2022-08-07 11:27:39.7144|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 11:27:39.7144|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Returned cart items page 1 from database.
2022-08-07 11:27:39.7144|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.CartItemDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:27:39.7264|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API) in 98.032ms
2022-08-07 11:27:39.7264|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API)'
2022-08-07 11:27:39.7264|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - - - 200 345 application/json;+charset=utf-8 135.2355ms
2022-08-07 11:27:39.7264|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([c0].[Price]), 0)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 11:27:39.7264|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Returned total price 110 for cart from database.
2022-08-07 11:27:39.7264|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Int32'.
2022-08-07 11:27:39.7264|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API) in 51.1293ms
2022-08-07 11:27:39.7264|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API)'
2022-08-07 11:27:39.7381|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/shopping-cart/total-price - - - 200 3 application/json;+charset=utf-8 63.7766ms
2022-08-07 11:27:40.7690|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/buy - -
2022-08-07 11:27:40.7738|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:40.7738|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/buy - - - 204 - - 5.0874ms
2022-08-07 11:27:40.7738|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 PUT https://localhost:7106/api/shopping-cart/buy application/json 2
2022-08-07 11:27:40.7738|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:40.7738|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.BuyAsync (EducationalPortal.API)'
2022-08-07 11:27:40.7738|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Buy", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BuyAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 11:27:40.7738|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:27:40.7942|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:27:40.8093|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[CourseId], [c].[UserId], [c0].[Id], [c0].[AuthorId], [c0].[Description], [c0].[Name], [c0].[Price], [c0].[ShortDescription], [c0].[Thumbnail]
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 11:27:40.8093|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([c0].[Price]), 0)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 11:27:40.8346|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:27:40.8346|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|User with email petro@petro payed 110 points.
2022-08-07 11:27:40.8489|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CoursesMaterials] AS [c]
WHERE [c].[CourseId] = @__courseId_0
2022-08-07 11:27:40.9144|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (22ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CoursesMaterials] AS [c]
INNER JOIN (
    SELECT [m].[Id]
    FROM [Materials] AS [m]
) AS [t] ON [c].[MaterialId] = [t].[Id]
WHERE ([c].[CourseId] = @__courseId_0) AND EXISTS (
    SELECT 1
    FROM [MaterialsBaseUser] AS [m0]
    INNER JOIN [Users] AS [u] ON [m0].[UsersId] = [u].[Id]
    WHERE ([t].[Id] = [m0].[MaterialsId]) AND ([u].[Id] = (
        SELECT TOP(1) [u0].[Id]
        FROM [Users] AS [u0]
        WHERE [u0].[Email] = @__email_1)))
2022-08-07 11:27:40.9144|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UsersCourses] ([CourseId], [UserId], [LearnedMaterialsCount], [MaterialsCount])
VALUES (@p0, @p1, @p2, @p3);
2022-08-07 11:27:40.9144|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Added course with id: 3 to user with email: petro@petro.
2022-08-07 11:27:40.9341|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
FROM [Users] AS [u]
WHERE EXISTS (
    SELECT 1
    FROM [Courses] AS [c]
    WHERE ([u].[Id] = [c].[AuthorId]) AND ([c].[Id] = @__courseId_0))
2022-08-07 11:27:40.9341|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:27:40.9341|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Added revenue to author with email default@gmail.com for selling course with id: 3.
2022-08-07 11:27:40.9600|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ShoppingHistory] ([CourseId], [Date], [Price], [UserId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [ShoppingHistory]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:27:40.9600|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Created shopping history with id 1.
2022-08-07 11:27:40.9824|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [CartItems]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-08-07 11:27:40.9899|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|User with email petro@petro bought courses.
2022-08-07 11:27:40.9899|INFO|Microsoft.AspNetCore.Mvc.StatusCodeResult|Executing StatusCodeResult, setting HTTP status code 200
2022-08-07 11:27:40.9899|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.BuyAsync (EducationalPortal.API) in 209.0693ms
2022-08-07 11:27:40.9899|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.BuyAsync (EducationalPortal.API)'
2022-08-07 11:27:40.9899|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 PUT https://localhost:7106/api/shopping-cart/buy application/json 2 - 200 0 - 214.6546ms
2022-08-07 11:27:40.9899|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - -
2022-08-07 11:27:40.9899|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:40.9899|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API)'
2022-08-07 11:27:40.9899|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/shopping-cart/total-price - -
2022-08-07 11:27:40.9899|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCart", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.CartItemDto]] GetCartAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 11:27:40.9899|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:40.9899|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API)'
2022-08-07 11:27:40.9899|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetTotalPrice", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int32] GetTotalPriceAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 11:27:40.9899|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:27:40.9899|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:27:41.0118|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([c0].[Price]), 0)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 11:27:41.0118|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Returned total price 0 for cart from database.
2022-08-07 11:27:41.0118|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Int32'.
2022-08-07 11:27:41.0118|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API) in 14.2465ms
2022-08-07 11:27:41.0118|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[CourseId], [t].[UserId], [c0].[Id], [c0].[AuthorId], [c0].[Description], [c0].[Name], [c0].[Price], [c0].[ShortDescription], [c0].[Thumbnail]
FROM (
    SELECT [c].[Id], [c].[CourseId], [c].[UserId]
    FROM [CartItems] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
    WHERE [u].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c0] ON [t].[CourseId] = [c0].[Id]
2022-08-07 11:27:41.0118|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API)'
2022-08-07 11:27:41.0118|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/shopping-cart/total-price - - - 200 1 application/json;+charset=utf-8 18.7476ms
2022-08-07 11:27:41.0204|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 11:27:41.0204|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Returned cart items page 1 from database.
2022-08-07 11:27:41.0204|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.CartItemDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:27:41.0204|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API) in 27.6938ms
2022-08-07 11:27:41.0204|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API)'
2022-08-07 11:27:41.0204|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - - - 200 2 application/json;+charset=utf-8 29.5112ms
2022-08-07 11:27:42.9525|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 11:27:42.9525|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:42.9525|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 204 - - 0.9648ms
2022-08-07 11:27:42.9638|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 11:27:42.9638|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:42.9638|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 11:27:42.9843|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "MyLearning", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Core.Entities.JoinEntities.UsersCourses]] MyLearningAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:27:42.9843|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:27:43.0348|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 11:27:43.0348|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 11:27:43.0534|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[UserId], [t].[CourseId], [t].[LearnedMaterialsCount], [t].[MaterialsCount], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM (
    SELECT [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
    FROM [UsersCourses] AS [u]
    INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
    WHERE [u0].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c] ON [t].[CourseId] = [c].[Id]
2022-08-07 11:27:43.0829|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (22ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE [u0].[Email] = @__email_0
2022-08-07 11:27:43.0829|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CoursesMaterials] AS [c]
INNER JOIN (
    SELECT [m].[Id]
    FROM [Materials] AS [m]
) AS [t] ON [c].[MaterialId] = [t].[Id]
WHERE ([c].[CourseId] = @__courseId_0) AND EXISTS (
    SELECT 1
    FROM [MaterialsBaseUser] AS [m0]
    INNER JOIN [Users] AS [u] ON [m0].[UsersId] = [u].[Id]
    WHERE ([t].[Id] = [m0].[MaterialsId]) AND ([u].[Id] = (
        SELECT TOP(1) [u0].[Id]
        FROM [Users] AS [u0]
        WHERE [u0].[Email] = @__email_1)))
2022-08-07 11:27:43.0829|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UsersCourses] SET [LearnedMaterialsCount] = @p0, [MaterialsCount] = @p1
WHERE [CourseId] = @p2 AND [UserId] = @p3;
SELECT @@ROWCOUNT;
2022-08-07 11:27:43.0829|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned users courses page 1 from database.
2022-08-07 11:27:43.0829|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Core.Entities.JoinEntities.UsersCourses, EducationalPortal.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:27:43.1228|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API) in 138.3597ms
2022-08-07 11:27:43.1228|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 11:27:43.1228|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 200 1158 application/json;+charset=utf-8 159.3590ms
2022-08-07 11:27:43.9183|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/learn/3 - -
2022-08-07 11:27:43.9183|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:43.9183|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/learn/3 - - - 204 - - 0.6280ms
2022-08-07 11:27:43.9183|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/learn/3 - -
2022-08-07 11:27:43.9255|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:43.9255|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseToLearnAsync (EducationalPortal.API)'
2022-08-07 11:27:43.9255|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourseToLearn", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseLearnDto] GetCourseToLearnAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:27:43.9255|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:27:43.9474|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 11:27:43.9474|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:27:43.9474|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:27:43.9474|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:27:43.9585|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:27:43.9585|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:27:43.9585|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:27:43.9585|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 11:27:43.9903|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[CourseId] = @__courseId_0) AND ([u0].[Email] = @__email_1)
2022-08-07 11:27:43.9903|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course learn with id: 3.
2022-08-07 11:27:43.9903|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseLearnDto'.
2022-08-07 11:27:43.9903|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseToLearnAsync (EducationalPortal.API) in 65.0388ms
2022-08-07 11:27:43.9903|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseToLearnAsync (EducationalPortal.API)'
2022-08-07 11:27:43.9903|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/learn/3 - - - 200 673 application/json;+charset=utf-8 75.9546ms
2022-08-07 11:27:47.0448|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/learned?materialId=10&courseId=3 - -
2022-08-07 11:27:47.0448|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:47.0448|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/learned?materialId=10&courseId=3 - - - 204 - - 1.6186ms
2022-08-07 11:27:47.0448|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 PUT https://localhost:7106/api/courses/learned?materialId=10&courseId=3 application/json 34
2022-08-07 11:27:47.0448|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:47.0448|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API)'
2022-08-07 11:27:47.0545|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Learned", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int32] LearnedAsync(Int32, Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:27:47.0545|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:27:47.0744|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[CourseId] = @__courseId_0) AND ([u0].[Email] = @__email_1)
2022-08-07 11:27:47.0744|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UsersCourses] SET [LearnedMaterialsCount] = @p0, [MaterialsCount] = @p1
WHERE [CourseId] = @p2 AND [UserId] = @p3;
SELECT @@ROWCOUNT;
2022-08-07 11:27:47.0825|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 11:27:47.1052|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
    WHEN [v].[Id] IS NOT NULL THEN N'Video'
    WHEN [b].[Id] IS NOT NULL THEN N'Book'
    WHEN [a].[Id] IS NOT NULL THEN N'Article'
END AS [Discriminator]
FROM [Materials] AS [m]
LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
WHERE [m].[Id] = @__id_0
2022-08-07 11:27:47.1382|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [MaterialsBaseUser] ([MaterialsId], [UsersId])
VALUES (@p0, @p1);
2022-08-07 11:27:47.1382|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:27:47.1382|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Material with id: 10 added to user with email: petro@petro. Material learned.
2022-08-07 11:27:47.1382|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Int32'.
2022-08-07 11:27:47.1382|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API) in 87.3006ms
2022-08-07 11:27:47.1382|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API)'
2022-08-07 11:27:47.1382|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 PUT https://localhost:7106/api/courses/learned?materialId=10&courseId=3 application/json 34 - 200 2 application/json;+charset=utf-8 93.5493ms
2022-08-07 11:27:48.8499|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 11:27:48.8499|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:48.8499|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 204 - - 2.6749ms
2022-08-07 11:27:48.8499|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 11:27:48.8499|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:48.8499|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 11:27:48.8499|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "MyLearning", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Core.Entities.JoinEntities.UsersCourses]] MyLearningAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:27:48.8632|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:27:48.8853|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[UserId], [t].[CourseId], [t].[LearnedMaterialsCount], [t].[MaterialsCount], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM (
    SELECT [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
    FROM [UsersCourses] AS [u]
    INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
    WHERE [u0].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c] ON [t].[CourseId] = [c].[Id]
2022-08-07 11:27:48.8853|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE [u0].[Email] = @__email_0
2022-08-07 11:27:48.9065|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CoursesMaterials] AS [c]
INNER JOIN (
    SELECT [m].[Id]
    FROM [Materials] AS [m]
) AS [t] ON [c].[MaterialId] = [t].[Id]
WHERE ([c].[CourseId] = @__courseId_0) AND EXISTS (
    SELECT 1
    FROM [MaterialsBaseUser] AS [m0]
    INNER JOIN [Users] AS [u] ON [m0].[UsersId] = [u].[Id]
    WHERE ([t].[Id] = [m0].[MaterialsId]) AND ([u].[Id] = (
        SELECT TOP(1) [u0].[Id]
        FROM [Users] AS [u0]
        WHERE [u0].[Email] = @__email_1)))
2022-08-07 11:27:48.9065|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UsersCourses] SET [LearnedMaterialsCount] = @p0, [MaterialsCount] = @p1
WHERE [CourseId] = @p2 AND [UserId] = @p3;
SELECT @@ROWCOUNT;
2022-08-07 11:27:48.9065|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned users courses page 1 from database.
2022-08-07 11:27:48.9065|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Core.Entities.JoinEntities.UsersCourses, EducationalPortal.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:27:48.9103|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API) in 48.2304ms
2022-08-07 11:27:48.9103|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 11:27:48.9103|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 200 1158 application/json;+charset=utf-8 50.4786ms
2022-08-07 11:27:58.6709|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 11:27:58.6709|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:58.6709|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 204 - - 2.4986ms
2022-08-07 11:27:58.6962|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 11:27:58.6962|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:27:58.6962|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 11:27:58.6962|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "MyLearning", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Core.Entities.JoinEntities.UsersCourses]] MyLearningAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:27:58.6962|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:27:58.7446|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[UserId], [t].[CourseId], [t].[LearnedMaterialsCount], [t].[MaterialsCount], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM (
    SELECT [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
    FROM [UsersCourses] AS [u]
    INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
    WHERE [u0].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c] ON [t].[CourseId] = [c].[Id]
2022-08-07 11:27:58.7446|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE [u0].[Email] = @__email_0
2022-08-07 11:28:03.2113|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CoursesMaterials] AS [c]
INNER JOIN (
    SELECT [m].[Id]
    FROM [Materials] AS [m]
) AS [t] ON [c].[MaterialId] = [t].[Id]
WHERE ([c].[CourseId] = @__courseId_0) AND EXISTS (
    SELECT 1
    FROM [MaterialsBaseUser] AS [m0]
    INNER JOIN [Users] AS [u] ON [m0].[UsersId] = [u].[Id]
    WHERE ([t].[Id] = [m0].[MaterialsId]) AND ([u].[Id] = (
        SELECT TOP(1) [u0].[Id]
        FROM [Users] AS [u0]
        WHERE [u0].[Email] = @__email_1)))
2022-08-07 11:28:08.0655|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UsersCourses] SET [LearnedMaterialsCount] = @p0, [MaterialsCount] = @p1
WHERE [CourseId] = @p2 AND [UserId] = @p3;
SELECT @@ROWCOUNT;
2022-08-07 11:28:08.0702|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned users courses page 1 from database.
2022-08-07 11:28:08.0702|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Core.Entities.JoinEntities.UsersCourses, EducationalPortal.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:28:08.0702|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API) in 9370.7466ms
2022-08-07 11:28:08.0702|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 11:28:08.0702|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 200 1158 application/json;+charset=utf-8 9375.4348ms
2022-08-07 11:28:10.8571|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:28:10.8656|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:28:10.8656|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 9.0912ms
2022-08-07 11:28:10.8656|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:28:10.8656|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:28:10.8656|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:28:10.8656|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:28:10.8656|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:28:10.8798|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 11:28:10.8798|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 11:28:10.8798|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 11:28:10.8798|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:28:10.8798|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 18.3075ms
2022-08-07 11:28:10.8798|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:28:10.8798|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 19.6237ms
2022-08-07 11:28:19.8718|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/2 - -
2022-08-07 11:28:19.8718|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:28:19.8718|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/2 - - - 204 - - 3.6381ms
2022-08-07 11:28:19.8898|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/2 - -
2022-08-07 11:28:19.8898|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:28:19.8898|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 11:28:19.8898|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseDto] GetCourseAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:28:19.8898|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:28:19.9079|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 11:28:19.9200|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:28:19.9200|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:19.9200|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:19.9273|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:28:19.9273|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:19.9273|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:19.9273|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:28:19.9273|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:19.9273|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:19.9429|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:28:19.9429|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:19.9429|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:19.9429|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:28:19.9429|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:19.9429|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:19.9579|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:28:19.9579|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:19.9579|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:19.9579|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:28:19.9579|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:19.9579|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:19.9934|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (23ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 11:28:20.0335|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course with id: 2.
2022-08-07 11:28:20.0335|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseDto'.
2022-08-07 11:28:20.0419|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API) in 151.2399ms
2022-08-07 11:28:20.0419|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 11:28:20.0419|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/2 - - - 200 3436 application/json;+charset=utf-8 152.4945ms
2022-08-07 11:28:24.2299|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/author/default@gmail.com - -
2022-08-07 11:28:24.2299|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:28:24.2299|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/author/default@gmail.com - - - 204 - - 1.1683ms
2022-08-07 11:28:24.2299|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account/author/default@gmail.com - -
2022-08-07 11:28:24.2299|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:28:24.2299|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.GetAuthorAsync (EducationalPortal.API)'
2022-08-07 11:28:24.2481|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAuthor", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.DTO.UserDto]] GetAuthorAsync(System.String, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:28:24.2481|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:28:24.3332|WARN|Microsoft.EntityFrameworkCore.Query|Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2022-08-07 11:28:24.3656|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (22ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [t0].[UserId], [t0].[SkillId], [t0].[Level], [t0].[Id], [t0].[Name], [t1].[RolesId], [t1].[UsersId], [t1].[Id], [t1].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN [Courses] AS [c] ON [t].[Id] = [c].[AuthorId]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[SkillId], [u0].[Level], [s].[Id], [s].[Name]
    FROM [UsersSkills] AS [u0]
    INNER JOIN [Skills] AS [s] ON [u0].[SkillId] = [s].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsersId]
ORDER BY [t].[Id], [c].[Id], [t0].[UserId], [t0].[SkillId], [t0].[Id], [t1].[RolesId], [t1].[UsersId]
2022-08-07 11:28:24.3813|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned user as author with email: default@gmail.com.
2022-08-07 11:28:24.3813|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.UserDto'.
2022-08-07 11:28:24.3813|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.GetAuthorAsync (EducationalPortal.API) in 135.0138ms
2022-08-07 11:28:24.3813|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.GetAuthorAsync (EducationalPortal.API)'
2022-08-07 11:28:24.3813|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account/author/default@gmail.com - - - 200 1238 application/json;+charset=utf-8 149.3039ms
2022-08-07 11:28:25.2267|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:28:25.2267|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:28:25.2267|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 0.8089ms
2022-08-07 11:28:25.2267|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:28:25.2267|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:28:25.2267|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:28:25.2267|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:28:25.2267|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:28:25.2526|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 11:28:25.2573|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 11:28:25.2573|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 11:28:25.2573|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:28:25.2573|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 30.0105ms
2022-08-07 11:28:25.2573|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:28:25.2573|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 31.3517ms
2022-08-07 11:28:26.6956|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/page-from-cookie?pageSize=10&pageNumber=1&cookie=-2 - -
2022-08-07 11:28:26.6956|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:28:26.6956|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/page-from-cookie?pageSize=10&pageNumber=1&cookie=-2 - - - 204 - - 1.6833ms
2022-08-07 11:28:26.6956|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/total-price-from-cookie?cookie=-2 - -
2022-08-07 11:28:26.6956|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/shopping-cart/page-from-cookie?pageSize=10&pageNumber=1&cookie=-2 - -
2022-08-07 11:28:26.6956|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:28:26.6956|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/total-price-from-cookie?cookie=-2 - - - 204 - - 1.7649ms
2022-08-07 11:28:26.6956|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:28:26.6956|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API)'
2022-08-07 11:28:26.7154|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCart", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.CartItemDto]] GetCartAsync(System.String, EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 11:28:26.7154|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/shopping-cart/total-price-from-cookie?cookie=-2 - -
2022-08-07 11:28:26.7154|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:28:26.7154|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:28:26.7154|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API)'
2022-08-07 11:28:26.7532|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetTotalPrice", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int32] GetTotalPriceAsync(System.String, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 11:28:26.7532|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:28:26.7860|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__id_0
2022-08-07 11:28:26.7860|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Returned cart items page 1 from cookies.
2022-08-07 11:28:26.7860|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.CartItemDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:28:26.7860|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API) in 82.2956ms
2022-08-07 11:28:26.7860|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API)'
2022-08-07 11:28:26.7860|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/shopping-cart/page-from-cookie?pageSize=10&pageNumber=1&cookie=-2 - - - 200 286 application/json;+charset=utf-8 95.5672ms
2022-08-07 11:28:26.8089|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__id_0
2022-08-07 11:28:26.8218|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Returned all cart items from cookies.
2022-08-07 11:28:26.8218|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Returned total price 150 for cart from cookies.
2022-08-07 11:28:26.8218|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Int32'.
2022-08-07 11:28:26.8218|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API) in 69.9908ms
2022-08-07 11:28:26.8218|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API)'
2022-08-07 11:28:26.8218|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/shopping-cart/total-price-from-cookie?cookie=-2 - - - 200 3 application/json;+charset=utf-8 107.6176ms
2022-08-07 11:28:44.0091|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/login - -
2022-08-07 11:28:44.0091|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:28:44.0091|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/login - - - 204 - - 3.5327ms
2022-08-07 11:28:44.0091|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/account/login application/json 87
2022-08-07 11:28:44.0091|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:28:44.0091|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API)'
2022-08-07 11:28:44.0091|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] LoginAsync(EducationalPortal.Application.Models.LoginModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:28:44.0203|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:28:44.0406|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:28:44.0406|INFO|EducationalPortal.Infrastructure.Services.Identity.PasswordHasher|Checked password.
2022-08-07 11:28:44.0406|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:28:44.0406|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned new refresh token.
2022-08-07 11:28:44.0542|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserToken] ([RefreshToken], [RefreshTokenExpiryTime])
VALUES (@p0, @p1);
SELECT [Id]
FROM [UserToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 11:28:44.0542|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p9='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 450), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p2, [Balance] = @p3, [Email] = @p4, [Name] = @p5, [PasswordHash] = @p6, [Position] = @p7, [UserTokenId] = @p8
WHERE [Id] = @p9;
SELECT @@ROWCOUNT;
2022-08-07 11:28:44.0542|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned claims for user with email: petro@petro.
2022-08-07 11:28:44.0542|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:28:44.0542|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned new access and refresh tokens.
2022-08-07 11:28:44.0542|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Logged in user with email: petro@petro.
2022-08-07 11:28:44.0542|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:28:44.0542|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API) in 40.2459ms
2022-08-07 11:28:44.0542|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API)'
2022-08-07 11:28:44.0542|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/account/login application/json 87 - 200 471 application/json;+charset=utf-8 41.3728ms
2022-08-07 11:28:44.0917|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:28:44.0917|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:28:44.0917|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 0.3457ms
2022-08-07 11:28:44.0917|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:28:44.0917|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:28:44.0917|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:28:44.0917|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:28:44.0917|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:28:44.1160|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 11:28:44.1160|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 11:28:44.1160|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 11:28:44.1160|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:28:44.1291|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 32.38ms
2022-08-07 11:28:44.1291|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:28:44.1291|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 33.7410ms
2022-08-07 11:28:47.4839|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/2 - -
2022-08-07 11:28:47.4839|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:28:47.4839|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/2 - - - 204 - - 3.6065ms
2022-08-07 11:28:47.4983|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/2 - -
2022-08-07 11:28:47.4983|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:28:47.4983|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 11:28:47.4983|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseDto] GetCourseAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:28:47.4983|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:28:47.5264|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 11:28:47.5264|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:28:47.5361|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:47.5361|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:47.5361|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:28:47.5361|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:47.5361|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:47.5361|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:28:47.5361|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:47.5361|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:47.5361|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:28:47.5510|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:47.5510|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:47.5510|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:28:47.5510|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:47.5510|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:47.5510|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:28:47.5510|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:47.5510|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:47.5510|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:28:47.5668|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:47.5668|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:28:47.5668|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 11:28:47.5930|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course with id: 2.
2022-08-07 11:28:47.5930|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseDto'.
2022-08-07 11:28:47.5930|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API) in 94.2647ms
2022-08-07 11:28:47.5930|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 11:28:47.5930|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/2 - - - 200 3436 application/json;+charset=utf-8 96.1773ms
2022-08-07 11:28:49.6077|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/author/default@gmail.com - -
2022-08-07 11:28:49.6077|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:28:49.6077|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/author/default@gmail.com - - - 204 - - 1.5245ms
2022-08-07 11:28:49.6077|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account/author/default@gmail.com - -
2022-08-07 11:28:49.6077|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:28:49.6137|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.GetAuthorAsync (EducationalPortal.API)'
2022-08-07 11:28:49.6137|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAuthor", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.DTO.UserDto]] GetAuthorAsync(System.String, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:28:49.6137|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:28:49.6384|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [t0].[UserId], [t0].[SkillId], [t0].[Level], [t0].[Id], [t0].[Name], [t1].[RolesId], [t1].[UsersId], [t1].[Id], [t1].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN [Courses] AS [c] ON [t].[Id] = [c].[AuthorId]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[SkillId], [u0].[Level], [s].[Id], [s].[Name]
    FROM [UsersSkills] AS [u0]
    INNER JOIN [Skills] AS [s] ON [u0].[SkillId] = [s].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsersId]
ORDER BY [t].[Id], [c].[Id], [t0].[UserId], [t0].[SkillId], [t0].[Id], [t1].[RolesId], [t1].[UsersId]
2022-08-07 11:28:49.6519|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned user as author with email: default@gmail.com.
2022-08-07 11:28:49.6519|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.UserDto'.
2022-08-07 11:28:49.6519|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.GetAuthorAsync (EducationalPortal.API) in 38.2849ms
2022-08-07 11:28:49.6519|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.GetAuthorAsync (EducationalPortal.API)'
2022-08-07 11:28:49.6519|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account/author/default@gmail.com - - - 200 1238 application/json;+charset=utf-8 39.8198ms
2022-08-07 11:28:51.4106|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:28:51.4106|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:28:51.4106|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 10.2916ms
2022-08-07 11:28:51.4106|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:28:51.4262|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:28:51.4262|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:28:51.4262|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:28:51.4262|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:28:51.4262|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 11:28:51.4439|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 11:28:51.4439|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 11:28:51.4439|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:28:51.4439|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 21.63ms
2022-08-07 11:28:51.4439|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:28:51.4439|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 23.6571ms
2022-08-07 11:29:02.8408|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account - -
2022-08-07 11:29:02.8505|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:29:02.8505|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account - - - 204 - - 10.0539ms
2022-08-07 11:29:02.8716|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account - -
2022-08-07 11:29:02.8716|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:29:02.8806|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API)'
2022-08-07 11:29:02.8806|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetProfile", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.DTO.UserDto]] GetProfileAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 11:29:02.8806|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:29:02.9330|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [t0].[UserId], [t0].[SkillId], [t0].[Level], [t0].[Id], [t0].[Name], [t1].[RolesId], [t1].[UsersId], [t1].[Id], [t1].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN [Courses] AS [c] ON [t].[Id] = [c].[AuthorId]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[SkillId], [u0].[Level], [s].[Id], [s].[Name]
    FROM [UsersSkills] AS [u0]
    INNER JOIN [Skills] AS [s] ON [u0].[SkillId] = [s].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsersId]
ORDER BY [t].[Id], [c].[Id], [t0].[UserId], [t0].[SkillId], [t0].[Id], [t1].[RolesId], [t1].[UsersId]
2022-08-07 11:29:02.9507|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned user with email: petro@petro.
2022-08-07 11:29:02.9507|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.UserDto'.
2022-08-07 11:29:02.9507|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API) in 59.2121ms
2022-08-07 11:29:02.9507|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API)'
2022-08-07 11:29:02.9507|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account - - - 200 193 application/json;+charset=utf-8 80.3856ms
2022-08-07 11:29:14.0157|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:29:14.0157|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:29:14.0157|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 3.3442ms
2022-08-07 11:29:14.0280|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 471
2022-08-07 11:29:14.0280|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:29:14.0280|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:29:14.0280|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:29:19.4797|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:29:20.7572|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:29:20.7572|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:29:23.2861|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:29:24.5818|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:29:26.2122|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:29:26.2640|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:29:27.4317|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:29:30.1222|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:29:30.1299|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 16099.0822ms
2022-08-07 11:29:30.1299|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:29:30.1299|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 471 - 200 507 application/json;+charset=utf-8 16102.3777ms
2022-08-07 11:29:53.0203|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:29:53.0203|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:29:53.0203|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 8.9071ms
2022-08-07 11:29:53.0203|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 507
2022-08-07 11:29:53.0203|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:29:53.0793|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:29:53.0793|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:29:56.5073|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:29:56.5073|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:29:56.5073|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:29:56.5073|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:29:56.5073|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:29:56.5193|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:29:56.5193|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:29:56.5193|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:29:56.5193|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:29:56.5193|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 3443.0533ms
2022-08-07 11:29:56.5193|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:29:56.5193|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 507 - 200 540 application/json;+charset=utf-8 3490.8754ms
2022-08-07 11:30:04.2515|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:30:04.2562|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:30:04.2562|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 4.9873ms
2022-08-07 11:30:04.2562|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:30:04.2562|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:30:04.2562|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:30:04.2562|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:30:04.2562|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:30:04.2803|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 11:30:04.2803|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 11:30:04.2942|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 11:30:04.2942|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:30:04.2942|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 32.4917ms
2022-08-07 11:30:04.2942|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:30:04.2942|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 33.6669ms
2022-08-07 11:30:26.0351|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:30:26.0351|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:30:26.0351|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 11.7177ms
2022-08-07 11:30:26.0757|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 540
2022-08-07 11:30:26.0757|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:30:26.0757|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:30:26.0757|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:30:29.8144|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:30:29.8361|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:30:29.8361|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:30:29.8361|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:30:29.8361|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:30:29.8361|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:30:29.8361|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:30:29.8361|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:30:29.8361|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:30:29.8361|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 3763.8415ms
2022-08-07 11:30:29.8361|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:30:29.8361|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 540 - 200 573 application/json;+charset=utf-8 3769.8829ms
2022-08-07 11:30:38.2489|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/2 - -
2022-08-07 11:30:38.2489|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:30:38.2489|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/2 - - - 204 - - 3.7871ms
2022-08-07 11:30:38.2568|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/2 - -
2022-08-07 11:30:38.2568|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:30:38.2568|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 11:30:38.2568|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseDto] GetCourseAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:30:38.2568|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:30:38.2778|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 11:30:38.2922|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:30:38.2922|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:30:38.2922|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:30:38.2922|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:30:38.3106|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:30:38.3193|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:30:38.3193|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:30:38.3554|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:30:38.3554|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:30:38.3554|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:30:38.3554|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:30:38.3632|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:30:38.3632|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:30:38.3632|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:30:38.3632|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:30:38.3632|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:30:38.3632|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:30:38.3632|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:30:38.3795|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 11:30:38.3795|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:30:38.3795|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 11:30:38.3795|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 11:30:38.4496|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course with id: 2.
2022-08-07 11:30:38.4496|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseDto'.
2022-08-07 11:30:38.4496|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API) in 193.013ms
2022-08-07 11:30:38.4496|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 11:30:38.4496|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/2 - - - 200 3436 application/json;+charset=utf-8 194.3724ms
2022-08-07 11:30:59.0141|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:30:59.0212|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:30:59.0212|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 7.2932ms
2022-08-07 11:30:59.0212|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 573
2022-08-07 11:30:59.0212|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:30:59.0212|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:30:59.0212|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:31:01.3564|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:31:01.3564|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:31:01.3642|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:31:01.3642|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:31:01.3642|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:31:01.3642|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:31:01.3642|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:31:01.3642|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:31:01.3642|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:31:01.3642|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 2344.4831ms
2022-08-07 11:31:01.3642|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:31:01.3642|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 573 - 200 607 application/json;+charset=utf-8 2345.6314ms
2022-08-07 11:31:30.8525|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:31:30.8525|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:31:30.8525|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 4.3138ms
2022-08-07 11:31:30.9006|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 11:31:30.9006|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:31:30.9006|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:31:30.9006|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 11:31:30.9006|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:31:30.9337|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 11:31:30.9337|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 11:31:30.9487|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 11:31:30.9487|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 11:31:30.9487|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 51.1964ms
2022-08-07 11:31:30.9487|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 11:31:30.9487|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 53.3564ms
2022-08-07 11:31:31.1009|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:31:31.1009|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:31:31.1009|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 0.3769ms
2022-08-07 11:31:31.1009|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 607
2022-08-07 11:31:31.1009|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:31:31.1009|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:31:31.1009|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:31:32.5699|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:31:32.5699|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:31:32.5699|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:31:32.5699|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:31:32.5699|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:31:32.5699|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:31:32.5830|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:31:32.5830|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:31:32.5830|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:31:32.5830|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 1477.0672ms
2022-08-07 11:31:32.5830|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:31:32.5830|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 607 - 200 640 application/json;+charset=utf-8 1478.1596ms
2022-08-07 11:32:02.0144|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:32:02.0144|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:32:02.0144|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1.5697ms
2022-08-07 11:32:02.0144|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 640
2022-08-07 11:32:02.0144|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:32:02.0144|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:32:02.0144|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:32:04.1562|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:32:04.1562|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:32:04.1623|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:32:04.1623|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:32:04.1623|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:32:04.1623|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:32:04.1623|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:32:04.1623|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:32:04.1623|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:32:04.1623|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 2150.2659ms
2022-08-07 11:32:04.1623|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:32:04.1623|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 640 - 200 673 application/json;+charset=utf-8 2151.7911ms
2022-08-07 11:32:34.0226|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:32:34.0226|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:32:34.0226|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 10.4684ms
2022-08-07 11:32:34.0508|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 673
2022-08-07 11:32:34.0508|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:32:34.0508|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:32:34.0508|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:32:34.0508|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:32:34.0508|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:32:34.0681|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:32:34.0681|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:32:34.0681|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:32:34.0681|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:32:34.0681|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:32:34.0681|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:32:34.0681|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:32:34.0681|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 12.4389ms
2022-08-07 11:32:34.0681|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:32:34.0681|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 673 - 200 707 application/json;+charset=utf-8 25.5689ms
2022-08-07 11:33:04.5343|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:33:04.6176|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:33:04.6176|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 83.5140ms
2022-08-07 11:33:04.7188|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 707
2022-08-07 11:33:04.7188|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:33:04.7188|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:33:04.7188|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:33:04.7188|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:33:04.7237|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:33:04.9823|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (257ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:33:04.9823|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:33:04.9823|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:33:04.9945|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:33:04.9945|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:33:04.9945|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:33:04.9945|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:33:04.9945|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 279.3426ms
2022-08-07 11:33:04.9945|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:33:04.9945|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 707 - 200 740 application/json;+charset=utf-8 281.0668ms
2022-08-07 11:33:34.2720|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:33:34.2720|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:33:34.2720|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 8.5219ms
2022-08-07 11:33:34.2720|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 740
2022-08-07 11:33:34.2720|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:33:34.2720|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:33:34.2720|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:33:34.2720|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:33:34.2855|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:33:34.2855|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:33:34.2855|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:33:34.2855|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:33:34.2855|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:33:34.3034|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:33:34.3034|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:33:34.3034|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:33:34.3034|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 21.2078ms
2022-08-07 11:33:34.3034|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:33:34.3034|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 740 - 200 773 application/json;+charset=utf-8 22.6725ms
2022-08-07 11:34:04.2792|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:34:04.2792|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:34:04.2792|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 2.6557ms
2022-08-07 11:34:04.2870|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 773
2022-08-07 11:34:04.2870|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:34:04.2870|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:34:04.2870|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:34:04.2870|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:34:04.2870|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:34:04.2870|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:34:04.2870|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:34:04.2870|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:34:04.2870|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:34:04.2870|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:34:04.2870|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:34:04.2870|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:34:04.2870|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 12.1931ms
2022-08-07 11:34:04.2870|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:34:04.2870|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 773 - 200 807 application/json;+charset=utf-8 13.8462ms
2022-08-07 11:34:34.2803|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:34:34.2803|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:34:34.2878|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 7.5556ms
2022-08-07 11:34:34.2878|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 807
2022-08-07 11:34:34.2878|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:34:34.2878|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:34:34.2878|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:34:34.2878|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:34:34.2878|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:34:34.2878|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:34:34.2878|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:34:34.2878|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:34:34.3033|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:34:34.3204|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:34:34.3204|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:34:34.3204|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:34:34.3204|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 30.4393ms
2022-08-07 11:34:34.3204|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:34:34.3204|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 807 - 200 840 application/json;+charset=utf-8 31.9900ms
2022-08-07 11:35:04.2790|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:35:04.2790|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:35:04.2790|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1.6617ms
2022-08-07 11:35:04.2790|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 840
2022-08-07 11:35:04.2790|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:35:04.2790|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:35:04.2790|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:35:04.2790|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:35:04.2856|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:35:04.2856|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:35:04.2856|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:35:04.2856|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:35:04.2856|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:35:04.2856|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:35:04.3020|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:35:04.3020|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:35:04.3020|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 19.5014ms
2022-08-07 11:35:04.3020|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:35:04.3020|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 840 - 200 873 application/json;+charset=utf-8 20.9580ms
2022-08-07 11:35:34.2758|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:35:34.2758|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:35:34.2758|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1.5362ms
2022-08-07 11:35:34.2758|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 873
2022-08-07 11:35:34.2758|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:35:34.2758|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:35:34.2758|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:35:34.2758|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:35:34.2758|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:35:34.2758|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:35:34.2877|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:35:34.2877|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:35:34.2877|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:35:34.2877|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:35:34.2877|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:35:34.2877|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:35:34.2877|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 12.763ms
2022-08-07 11:35:34.2877|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:35:34.2877|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 873 - 200 907 application/json;+charset=utf-8 14.3070ms
2022-08-07 11:36:04.2693|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:36:04.2709|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:36:04.2709|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1.9590ms
2022-08-07 11:36:04.2709|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 907
2022-08-07 11:36:04.2709|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:36:04.2709|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:36:04.2709|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:36:04.2709|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:36:04.2709|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:36:04.2709|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:36:04.2709|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:36:04.2709|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:36:04.2709|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:36:04.2709|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:36:04.2856|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:36:04.2856|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:36:04.2856|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 11.2593ms
2022-08-07 11:36:04.2856|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:36:04.2856|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 907 - 200 940 application/json;+charset=utf-8 12.7881ms
2022-08-07 11:36:34.2777|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:36:34.2777|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:36:34.2777|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 5.8687ms
2022-08-07 11:36:34.2904|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 940
2022-08-07 11:36:34.2904|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:36:34.2904|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:36:34.2904|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:36:34.2904|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:36:34.2904|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:36:34.2904|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:36:34.3014|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:36:34.3014|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:36:34.3014|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:36:34.3014|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:36:34.3014|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:36:34.3014|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:36:34.3014|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 11.2844ms
2022-08-07 11:36:34.3014|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:36:34.3014|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 940 - 200 973 application/json;+charset=utf-8 16.0196ms
2022-08-07 11:37:04.2781|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:37:04.2781|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:37:04.2781|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 6.0992ms
2022-08-07 11:37:04.2868|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 973
2022-08-07 11:37:04.2868|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:37:04.2868|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:37:04.2868|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:37:04.2868|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:37:04.2868|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:37:04.2868|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:37:04.2868|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:37:04.2868|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:37:04.2868|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:37:04.2868|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:37:04.2868|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:37:04.2868|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:37:04.2868|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 11.4815ms
2022-08-07 11:37:04.2868|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:37:04.2868|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 973 - 200 1007 application/json;+charset=utf-8 13.1581ms
2022-08-07 11:37:34.2831|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:37:34.2856|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:37:34.2856|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 6.8861ms
2022-08-07 11:37:34.2856|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1007
2022-08-07 11:37:34.2856|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:37:34.2856|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:37:34.2856|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:37:34.2856|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:37:34.2856|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:37:34.2856|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:37:34.2856|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:37:34.2856|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:37:34.3014|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:37:34.3014|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:37:34.3014|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:37:34.3014|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:37:34.3014|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 11.1637ms
2022-08-07 11:37:34.3014|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:37:34.3014|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1007 - 200 1040 application/json;+charset=utf-8 12.6523ms
2022-08-07 11:38:04.2794|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:38:04.2794|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:38:04.2794|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1.7906ms
2022-08-07 11:38:04.2794|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1040
2022-08-07 11:38:04.2794|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:38:04.2794|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:38:04.2794|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:38:04.2850|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:38:04.2850|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:38:04.2850|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:38:04.2850|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:38:04.2850|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:38:04.2850|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:38:04.2850|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:38:04.2850|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:38:04.2850|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:38:04.2850|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 12.3255ms
2022-08-07 11:38:04.2850|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:38:04.2850|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1040 - 200 1073 application/json;+charset=utf-8 13.5380ms
2022-08-07 11:38:34.2692|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:38:34.2707|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:38:34.2707|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1.8797ms
2022-08-07 11:38:34.2707|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1073
2022-08-07 11:38:34.2707|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:38:34.2707|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:38:34.2707|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:38:34.2707|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:38:34.2707|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:38:34.2707|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:38:34.2707|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:38:34.2707|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:38:34.2707|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:38:34.2707|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:38:34.2707|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:38:34.2857|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:38:34.2857|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 11.548ms
2022-08-07 11:38:34.2857|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:38:34.2857|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1073 - 200 1107 application/json;+charset=utf-8 12.9582ms
2022-08-07 11:39:04.2863|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:39:04.2863|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:39:04.2863|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 8.7735ms
2022-08-07 11:39:04.2863|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1107
2022-08-07 11:39:04.2863|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:39:04.2863|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:39:04.2863|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:39:04.2863|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:39:04.3007|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:39:04.3007|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:39:04.3007|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:39:04.3007|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:39:04.3007|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:39:04.3007|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:39:04.3007|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:39:04.3007|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:39:04.3007|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 12.917ms
2022-08-07 11:39:04.3007|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:39:04.3007|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1107 - 200 1140 application/json;+charset=utf-8 14.3490ms
2022-08-07 11:39:34.2800|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:39:34.2800|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:39:34.2800|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 3.2859ms
2022-08-07 11:39:34.2912|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1140
2022-08-07 11:39:34.2912|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:39:34.2912|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:39:34.2912|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:39:34.2912|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:39:34.2912|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:39:34.2912|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:39:34.2912|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:39:34.2912|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:39:34.3013|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:39:34.3013|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:39:34.3013|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:39:34.3013|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:39:34.3013|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 12.1991ms
2022-08-07 11:39:34.3013|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:39:34.3013|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1140 - 200 1173 application/json;+charset=utf-8 13.6810ms
2022-08-07 11:40:04.2723|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:40:04.2723|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:40:04.2723|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 6.7125ms
2022-08-07 11:40:04.2723|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1173
2022-08-07 11:40:04.2723|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:40:04.2723|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:40:04.2723|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:40:04.2723|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:40:04.2723|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:40:04.2877|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:40:04.2877|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:40:04.2877|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:40:04.2877|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:40:04.2877|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:40:04.2877|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:40:04.2877|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:40:04.2877|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 12.8011ms
2022-08-07 11:40:04.2877|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:40:04.2877|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1173 - 200 1207 application/json;+charset=utf-8 14.4232ms
2022-08-07 11:40:34.2829|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:40:34.2920|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:40:34.2920|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 9.5475ms
2022-08-07 11:40:34.2920|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1207
2022-08-07 11:40:34.2920|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:40:34.2920|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:40:34.2920|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:40:34.2920|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:40:34.2920|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:40:34.3051|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:40:34.3051|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:40:34.3051|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:40:34.3051|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:40:34.3051|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:40:34.3051|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:40:34.3051|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:40:34.3051|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 15.642ms
2022-08-07 11:40:34.3051|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:40:34.3051|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1207 - 200 1240 application/json;+charset=utf-8 17.4282ms
2022-08-07 11:41:04.2817|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:41:04.2817|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:41:04.2817|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1.7874ms
2022-08-07 11:41:04.2854|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1240
2022-08-07 11:41:04.2854|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:41:04.2854|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:41:04.2854|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:41:04.2854|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:41:04.2854|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:41:04.3064|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:41:04.3064|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:41:04.3064|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:41:04.3064|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:41:04.3185|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:41:04.3185|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:41:04.3185|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:41:04.3185|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 33.6479ms
2022-08-07 11:41:04.3185|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:41:04.3185|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1240 - 200 1273 application/json;+charset=utf-8 35.4459ms
2022-08-07 11:41:34.2681|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:41:34.2681|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:41:34.2681|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1.6063ms
2022-08-07 11:41:34.2718|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1273
2022-08-07 11:41:34.2718|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:41:34.2718|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:41:34.2718|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:41:34.2718|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:41:34.2718|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:41:34.2718|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:41:34.2718|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:41:34.2718|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:41:34.2718|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:41:34.2852|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:41:34.2852|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:41:34.2852|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:41:34.2852|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 14.0824ms
2022-08-07 11:41:34.2852|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:41:34.2852|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1273 - 200 1307 application/json;+charset=utf-8 15.6091ms
2022-08-07 11:42:04.2869|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:42:04.2869|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:42:04.2869|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 2.1241ms
2022-08-07 11:42:04.2869|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1307
2022-08-07 11:42:04.2869|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:42:04.2869|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:42:04.2869|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:42:04.2869|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:42:04.2869|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:42:04.2869|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:42:04.2869|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:42:04.2869|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:42:04.3011|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:42:04.3011|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:42:04.3011|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:42:04.3011|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:42:04.3011|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 19.0819ms
2022-08-07 11:42:04.3011|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:42:04.3011|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1307 - 200 1340 application/json;+charset=utf-8 20.4600ms
2022-08-07 11:42:34.2722|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:42:34.2722|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:42:34.2722|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 2.0214ms
2022-08-07 11:42:34.2722|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1340
2022-08-07 11:42:34.2722|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:42:34.2722|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:42:34.2722|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:42:34.2722|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:42:34.2722|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:42:34.2722|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:42:34.2880|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:42:34.2880|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:42:34.2880|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:42:34.2880|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:42:34.2880|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:42:34.2880|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:42:34.2880|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 15.9362ms
2022-08-07 11:42:34.2880|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:42:34.2880|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1340 - 200 1373 application/json;+charset=utf-8 17.7827ms
2022-08-07 11:43:04.2745|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:43:04.2745|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:43:04.2745|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1.4978ms
2022-08-07 11:43:04.2745|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1373
2022-08-07 11:43:04.2745|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:43:04.2745|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:43:04.2745|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:43:04.2745|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:43:04.2745|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:43:04.2745|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:43:04.2868|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:43:04.2868|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:43:04.2868|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:43:04.2868|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:43:04.2868|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:43:04.2868|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:43:04.2868|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 12.7162ms
2022-08-07 11:43:04.2868|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:43:04.2868|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1373 - 200 1407 application/json;+charset=utf-8 14.2796ms
2022-08-07 11:43:34.2891|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 11:43:34.2891|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:43:34.2891|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 7.3801ms
2022-08-07 11:43:34.3048|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1407
2022-08-07 11:43:34.3048|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 11:43:34.3048|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:43:34.3048|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 11:43:34.3048|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 11:43:34.3048|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 11:43:34.3048|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 11:43:34.3169|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 11:43:34.3169|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 11:43:34.3169|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 11:43:34.3169|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 11:43:34.3169|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 11:43:34.3169|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 11:43:34.3169|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 14.3838ms
2022-08-07 11:43:34.3169|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 11:43:34.3169|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1407 - 200 1440 application/json;+charset=utf-8 17.6184ms
2022-08-07 12:36:22.7176|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:36:27.1649|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (154ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2022-08-07 12:36:27.4593|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (94ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [EducationalPortal] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2022-08-07 12:36:27.5310|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (65ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [EducationalPortal];
2022-08-07 12:36:28.4538|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (695ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [EducationalPortal];
2022-08-07 12:36:28.5573|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (102ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [EducationalPortal] SET READ_COMMITTED_SNAPSHOT ON;
END;
2022-08-07 12:36:28.5845|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2022-08-07 12:36:28.8781|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Authors] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Authors] PRIMARY KEY ([Id])
);
2022-08-07 12:36:28.8806|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Extensions] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Extensions] PRIMARY KEY ([Id])
);
2022-08-07 12:36:28.8806|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Materials] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Link] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Materials] PRIMARY KEY ([Id])
);
2022-08-07 12:36:28.8806|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Qualities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Qualities] PRIMARY KEY ([Id])
);
2022-08-07 12:36:28.8806|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Resources] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Resources] PRIMARY KEY ([Id])
);
2022-08-07 12:36:28.8806|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Roles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_Roles] PRIMARY KEY ([Id])
);
2022-08-07 12:36:28.8806|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Skills] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Skills] PRIMARY KEY ([Id])
);
2022-08-07 12:36:28.8963|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UserToken] (
    [Id] int NOT NULL IDENTITY,
    [RefreshToken] nvarchar(max) NOT NULL,
    [RefreshTokenExpiryTime] datetime2 NOT NULL,
    CONSTRAINT [PK_UserToken] PRIMARY KEY ([Id])
);
2022-08-07 12:36:28.8963|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Books] (
    [Id] int NOT NULL,
    [PagesCount] int NOT NULL,
    [ExtensionId] int NOT NULL,
    [PublicationYear] int NOT NULL,
    CONSTRAINT [PK_Books] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Books_Extensions_ExtensionId] FOREIGN KEY ([ExtensionId]) REFERENCES [Extensions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Books_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id])
);
2022-08-07 12:36:28.8963|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Videos] (
    [Id] int NOT NULL,
    [Duration] datetime2 NOT NULL,
    [QualityId] int NOT NULL,
    CONSTRAINT [PK_Videos] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Videos_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id]),
    CONSTRAINT [FK_Videos_Qualities_QualityId] FOREIGN KEY ([QualityId]) REFERENCES [Qualities] ([Id]) ON DELETE CASCADE
);
2022-08-07 12:36:28.8963|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Articles] (
    [Id] int NOT NULL,
    [ResourceId] int NOT NULL,
    [PublicationDate] datetime2 NOT NULL,
    CONSTRAINT [PK_Articles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Articles_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id]),
    CONSTRAINT [FK_Articles_Resources_ResourceId] FOREIGN KEY ([ResourceId]) REFERENCES [Resources] ([Id]) ON DELETE CASCADE
);
2022-08-07 12:36:28.8963|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Position] nvarchar(max) NULL,
    [Avatar] nvarchar(max) NOT NULL,
    [Email] nvarchar(450) NOT NULL,
    [PasswordHash] nvarchar(max) NOT NULL,
    [Balance] int NOT NULL,
    [UserTokenId] int NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_UserToken_UserTokenId] FOREIGN KEY ([UserTokenId]) REFERENCES [UserToken] ([Id])
);
2022-08-07 12:36:28.9107|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AuthorBook] (
    [AuthorsId] int NOT NULL,
    [BooksId] int NOT NULL,
    CONSTRAINT [PK_AuthorBook] PRIMARY KEY ([AuthorsId], [BooksId]),
    CONSTRAINT [FK_AuthorBook_Authors_AuthorsId] FOREIGN KEY ([AuthorsId]) REFERENCES [Authors] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AuthorBook_Books_BooksId] FOREIGN KEY ([BooksId]) REFERENCES [Books] ([Id]) ON DELETE CASCADE
);
2022-08-07 12:36:28.9107|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Courses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Thumbnail] nvarchar(max) NOT NULL,
    [ShortDescription] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [Price] int NOT NULL,
    [AuthorId] nvarchar(450) NULL,
    CONSTRAINT [PK_Courses] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Courses_Users_AuthorId] FOREIGN KEY ([AuthorId]) REFERENCES [Users] ([Id])
);
2022-08-07 12:36:28.9107|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [MaterialsBaseUser] (
    [MaterialsId] int NOT NULL,
    [UsersId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_MaterialsBaseUser] PRIMARY KEY ([MaterialsId], [UsersId]),
    CONSTRAINT [FK_MaterialsBaseUser_Materials_MaterialsId] FOREIGN KEY ([MaterialsId]) REFERENCES [Materials] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_MaterialsBaseUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 12:36:28.9107|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [RoleUser] (
    [RolesId] int NOT NULL,
    [UsersId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_RoleUser] PRIMARY KEY ([RolesId], [UsersId]),
    CONSTRAINT [FK_RoleUser_Roles_RolesId] FOREIGN KEY ([RolesId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RoleUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 12:36:28.9107|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UsersSkills] (
    [UserId] nvarchar(450) NOT NULL,
    [SkillId] int NOT NULL,
    [Level] int NOT NULL,
    CONSTRAINT [PK_UsersSkills] PRIMARY KEY ([UserId], [SkillId]),
    CONSTRAINT [FK_UsersSkills_Skills_SkillId] FOREIGN KEY ([SkillId]) REFERENCES [Skills] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UsersSkills_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 12:36:28.9107|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CartItems] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NULL,
    [CourseId] int NOT NULL,
    CONSTRAINT [PK_CartItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_CartItems_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CartItems_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2022-08-07 12:36:28.9278|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CoursesMaterials] (
    [CourseId] int NOT NULL,
    [MaterialId] int NOT NULL,
    [Index] int NOT NULL,
    CONSTRAINT [PK_CoursesMaterials] PRIMARY KEY ([CourseId], [MaterialId]),
    CONSTRAINT [FK_CoursesMaterials_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CoursesMaterials_Materials_MaterialId] FOREIGN KEY ([MaterialId]) REFERENCES [Materials] ([Id]) ON DELETE CASCADE
);
2022-08-07 12:36:28.9278|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CoursesSkills] (
    [CourseId] int NOT NULL,
    [SkillId] int NOT NULL,
    CONSTRAINT [PK_CoursesSkills] PRIMARY KEY ([CourseId], [SkillId]),
    CONSTRAINT [FK_CoursesSkills_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CoursesSkills_Skills_SkillId] FOREIGN KEY ([SkillId]) REFERENCES [Skills] ([Id]) ON DELETE CASCADE
);
2022-08-07 12:36:28.9278|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [ShoppingHistory] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NULL,
    [CourseId] int NOT NULL,
    [Price] int NOT NULL,
    [Date] datetime2 NOT NULL,
    CONSTRAINT [PK_ShoppingHistory] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ShoppingHistory_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ShoppingHistory_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2022-08-07 12:36:28.9278|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UsersCourses] (
    [UserId] nvarchar(450) NOT NULL,
    [CourseId] int NOT NULL,
    [MaterialsCount] int NOT NULL,
    [LearnedMaterialsCount] int NOT NULL,
    CONSTRAINT [PK_UsersCourses] PRIMARY KEY ([UserId], [CourseId]),
    CONSTRAINT [FK_UsersCourses_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UsersCourses_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 12:36:28.9444|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Articles_ResourceId] ON [Articles] ([ResourceId]);
2022-08-07 12:36:28.9444|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_AuthorBook_BooksId] ON [AuthorBook] ([BooksId]);
2022-08-07 12:36:28.9444|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Books_ExtensionId] ON [Books] ([ExtensionId]);
2022-08-07 12:36:28.9444|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CartItems_CourseId] ON [CartItems] ([CourseId]);
2022-08-07 12:36:28.9579|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CartItems_UserId] ON [CartItems] ([UserId]);
2022-08-07 12:36:28.9579|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Courses_AuthorId] ON [Courses] ([AuthorId]);
2022-08-07 12:36:28.9579|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CoursesMaterials_MaterialId] ON [CoursesMaterials] ([MaterialId]);
2022-08-07 12:36:28.9579|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CoursesSkills_SkillId] ON [CoursesSkills] ([SkillId]);
2022-08-07 12:36:28.9579|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_MaterialsBaseUser_UsersId] ON [MaterialsBaseUser] ([UsersId]);
2022-08-07 12:36:28.9579|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Roles_Name] ON [Roles] ([Name]);
2022-08-07 12:36:28.9579|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_RoleUser_UsersId] ON [RoleUser] ([UsersId]);
2022-08-07 12:36:28.9751|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_ShoppingHistory_CourseId] ON [ShoppingHistory] ([CourseId]);
2022-08-07 12:36:28.9751|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_ShoppingHistory_UserId] ON [ShoppingHistory] ([UserId]);
2022-08-07 12:36:28.9751|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]);
2022-08-07 12:36:28.9751|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Users_UserTokenId] ON [Users] ([UserTokenId]);
2022-08-07 12:36:28.9751|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_UsersCourses_CourseId] ON [UsersCourses] ([CourseId]);
2022-08-07 12:36:28.9904|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_UsersSkills_SkillId] ON [UsersSkills] ([SkillId]);
2022-08-07 12:36:28.9904|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Videos_QualityId] ON [Videos] ([QualityId]);
2022-08-07 12:36:29.6252|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (110ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [Qualities] USING (
VALUES (@p0, 0),
(@p1, 1),
(@p2, 2),
(@p3, 3),
(@p4, 4),
(@p5, 5),
(@p6, 6),
(@p7, 7)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [i].[Id] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-08-07 12:36:30.1191|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (56ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:30.1676|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (39ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 12:36:30.2137|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Extensions] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Extensions]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:30.3341|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:30.5848|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:30.6138|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 12:36:30.6138|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 12:36:30.6454|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Resources] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Resources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:30.7015|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:30.7087|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 12:36:30.7847|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:30.7979|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:30.7979|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:30.9292|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (32ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:30.9493|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:30.9663|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:31.0246|INFO|EducationalPortal.Infrastructure.Services.Identity.PasswordHasher|Hashed password.
2022-08-07 12:36:31.3380|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Avatar], [Balance], [Email], [Name], [PasswordHash], [Position], [UserTokenId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2022-08-07 12:36:31.3616|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[@p8='?' (DbType = Int32), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (Size = 450), @p12='?' (DbType = Int32), @p13='?' (Size = 450), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Size = 450), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Size = 450), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RoleUser] ([RolesId], [UsersId])
VALUES (@p8, @p9),
(@p10, @p11);
INSERT INTO [UsersSkills] ([SkillId], [UserId], [Level])
VALUES (@p12, @p13, @p14),
(@p15, @p16, @p17),
(@p18, @p19, @p20);
2022-08-07 12:36:31.5396|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:31.5707|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11),
(@p12, @p13, @p14);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p15, @p16),
(@p17, @p18),
(@p19, @p20);
2022-08-07 12:36:31.5930|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UsersCourses] ([CourseId], [UserId], [LearnedMaterialsCount], [MaterialsCount])
VALUES (@p0, @p1, @p2, @p3);
2022-08-07 12:36:31.6113|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [Skills] USING (
VALUES (@p0, 0),
(@p1, 1),
(@p2, 2),
(@p3, 3),
(@p4, 4),
(@p5, 5),
(@p6, 6),
(@p7, 7),
(@p8, 8)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [i].[Id] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-08-07 12:36:31.6152|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:31.6152|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 12:36:31.6152|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:31.6152|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 12:36:31.6152|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:31.6152|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 12:36:31.6152|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:31.6373|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:31.6373|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 12:36:31.6373|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 12:36:31.6373|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:31.6486|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:31.6486|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 12:36:31.6486|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 12:36:31.6486|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Resources] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Resources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:31.6486|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:31.6630|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 12:36:31.6630|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:31.6843|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (15ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 12:36:31.7056|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:31.7411|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (33ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = Int32), @p32='?' (DbType = Int32), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = Int32), @p38='?' (DbType = Int32), @p39='?' (DbType = Int32), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11),
(@p12, @p13, @p14),
(@p15, @p16, @p17),
(@p18, @p19, @p20),
(@p21, @p22, @p23),
(@p24, @p25, @p26);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p27, @p28),
(@p29, @p30),
(@p31, @p32),
(@p33, @p34),
(@p35, @p36),
(@p37, @p38),
(@p39, @p40),
(@p41, @p42),
(@p43, @p44);
2022-08-07 12:36:31.7411|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:36:31.7610|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p12, @p13),
(@p14, @p15),
(@p16, @p17);
2022-08-07 12:36:32.2765|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\rareb\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-07 12:36:32.8036|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7106
2022-08-07 12:36:32.8036|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:7105
2022-08-07 12:36:32.8036|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2022-08-07 12:36:32.8036|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2022-08-07 12:36:32.8036|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\
2022-08-07 12:36:36.2641|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger - -
2022-08-07 12:36:36.4751|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger - - - 301 0 - 216.2183ms
2022-08-07 12:36:36.5079|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - -
2022-08-07 12:36:36.9943|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - -
2022-08-07 12:36:37.0219|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - - - 200 - text/html;charset=utf-8 513.9522ms
2022-08-07 12:36:37.0672|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-07 12:36:37.0672|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - - - 200 143943 text/css 73.0475ms
2022-08-07 12:36:37.0672|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - -
2022-08-07 12:36:37.0672|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - -
2022-08-07 12:36:37.1203|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 12:36:37.1301|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-07 12:36:37.1301|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 63.4078ms
2022-08-07 12:36:37.1470|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-07 12:36:37.1470|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - - - 200 1095087 application/javascript 79.3561ms
2022-08-07 12:36:37.1470|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 34.2836ms
2022-08-07 12:36:37.3879|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 12:36:37.9560|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 568.1160ms
2022-08-07 12:36:40.5091|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - -
2022-08-07 12:36:41.2089|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 700.0203ms
2022-08-07 12:37:10.0627|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/login - -
2022-08-07 12:37:10.1171|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:37:10.1171|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/login - - - 204 - - 58.1080ms
2022-08-07 12:37:10.1299|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/account/login application/json 85
2022-08-07 12:37:10.1299|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:37:10.5312|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Failed to validate the token.|Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-07 12:37:10.5678|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-08-07 12:37:10.5678|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API)'
2022-08-07 12:37:10.6075|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] LoginAsync(EducationalPortal.Application.Models.LoginModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 12:37:10.6231|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:37:12.6096|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (53ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:37:12.9382|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API) in 2324.6259ms
2022-08-07 12:37:12.9382|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API)'
2022-08-07 12:37:13.1985|ERROR|EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware|Entity not found: EducationalPortal.Application.Exceptions.NotFoundException: "User" was not found.
   at EducationalPortal.Infrastructure.Services.Identity.UserManager.LoginAsync(LoginModel login, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\Services\Identity\UserManager.cs:line 72
   at EducationalPortal.Infrastructure.Services.AccountService.LoginAsync(LoginModel login, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\Services\AccountService.cs:line 54
   at EducationalPortal.API.Controllers.AccountController.LoginAsync(LoginModel model, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\Controllers\AccountController.cs:line 86
   at lambda_method677(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\ExceptionHandling\ExceptionMiddleware.cs:line 25
2022-08-07 12:37:13.2731|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/account/login application/json 85 - 404 - application/json 3143.2282ms
2022-08-07 12:37:14.5568|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/account/login application/json 85
2022-08-07 12:37:14.5721|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:37:14.5721|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Failed to validate the token.|Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-07 12:37:14.5721|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-08-07 12:37:14.5721|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API)'
2022-08-07 12:37:14.5721|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] LoginAsync(EducationalPortal.Application.Models.LoginModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 12:37:14.6569|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:37:14.6824|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:37:14.8880|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API) in 308.412ms
2022-08-07 12:37:14.8880|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API)'
2022-08-07 12:37:15.0616|ERROR|EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware|Entity not found: EducationalPortal.Application.Exceptions.NotFoundException: "User" was not found.
   at EducationalPortal.Infrastructure.Services.Identity.UserManager.LoginAsync(LoginModel login, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\Services\Identity\UserManager.cs:line 72
   at EducationalPortal.Infrastructure.Services.AccountService.LoginAsync(LoginModel login, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\Services\AccountService.cs:line 54
   at EducationalPortal.API.Controllers.AccountController.LoginAsync(LoginModel model, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\Controllers\AccountController.cs:line 86
   at lambda_method677(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\ExceptionHandling\ExceptionMiddleware.cs:line 25
2022-08-07 12:37:15.0616|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/account/login application/json 85 - 404 - application/json 505.4009ms
2022-08-07 12:37:26.6150|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/register - -
2022-08-07 12:37:26.6150|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:37:26.6150|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/register - - - 204 - - 2.6257ms
2022-08-07 12:37:26.6150|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/account/register application/json 81
2022-08-07 12:37:26.6150|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:37:26.6150|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Failed to validate the token.|Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-07 12:37:26.6150|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-08-07 12:37:26.6150|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.RegisterAsync (EducationalPortal.API)'
2022-08-07 12:37:26.6326|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RegisterAsync(EducationalPortal.Application.Models.RegisterModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 12:37:26.6326|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:37:26.6791|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:37:26.7000|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Name] = N'Student'
2022-08-07 12:37:26.7110|INFO|EducationalPortal.Infrastructure.Services.Identity.PasswordHasher|Hashed password.
2022-08-07 12:37:26.7110|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:37:26.7110|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned new refresh token.
2022-08-07 12:37:26.8013|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserToken] ([RefreshToken], [RefreshTokenExpiryTime])
VALUES (@p0, @p1);
SELECT [Id]
FROM [UserToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:37:26.8200|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (Size = 450), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Avatar], [Balance], [Email], [Name], [PasswordHash], [Position], [UserTokenId])
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2022-08-07 12:37:26.8200|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned claims for user with email: petro@petro.
2022-08-07 12:37:26.8673|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:37:26.8673|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned new access and refresh tokens.
2022-08-07 12:37:26.8673|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Created user with email: petro@petro.
2022-08-07 12:37:26.8673|INFO|EducationalPortal.Infrastructure.Services.AccountService|Registered user with email: petro@petro.
2022-08-07 12:37:26.8673|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:37:26.8982|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.RegisterAsync (EducationalPortal.API) in 265.5106ms
2022-08-07 12:37:26.8982|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.RegisterAsync (EducationalPortal.API)'
2022-08-07 12:37:26.8982|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/account/register application/json 81 - 200 568 application/json;+charset=utf-8 278.7753ms
2022-08-07 12:37:26.9280|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:37:26.9280|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:37:26.9280|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 8.3439ms
2022-08-07 12:37:26.9519|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:37:26.9519|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:37:26.9993|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:37:27.0083|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:37:27.0083|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:37:27.0696|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 12:37:27.0696|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 12:37:27.0846|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 12:37:27.1478|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 12:37:27.1823|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 12:37:27.1823|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:37:27.2203|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 211.9431ms
2022-08-07 12:37:27.2203|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:37:27.2203|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 268.8114ms
2022-08-07 12:37:56.0368|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:37:56.0368|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:37:56.0368|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 5.1823ms
2022-08-07 12:37:56.0563|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 568
2022-08-07 12:37:56.0563|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:37:56.0563|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:37:56.0822|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:38:11.8617|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:38:32.2873|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:38:32.2873|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:38:34.7968|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:38:47.0904|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:38:49.1326|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:38:49.1863|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:38:50.7039|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:38:54.4783|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:38:56.5147|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 60432.3506ms
2022-08-07 12:38:56.5147|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:38:56.5147|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 568 - 200 604 application/json;+charset=utf-8 60462.6851ms
2022-08-07 12:39:01.0797|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account - -
2022-08-07 12:39:01.0797|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:39:01.0797|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account - - - 204 - - 1.9794ms
2022-08-07 12:39:01.0864|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account - -
2022-08-07 12:39:01.0864|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:39:01.1528|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API)'
2022-08-07 12:39:01.1783|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetProfile", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.DTO.UserDto]] GetProfileAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 12:39:01.1783|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:39:01.3298|WARN|Microsoft.EntityFrameworkCore.Query|Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2022-08-07 12:39:01.3927|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (49ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [t0].[UserId], [t0].[SkillId], [t0].[Level], [t0].[Id], [t0].[Name], [t1].[RolesId], [t1].[UsersId], [t1].[Id], [t1].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN [Courses] AS [c] ON [t].[Id] = [c].[AuthorId]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[SkillId], [u0].[Level], [s].[Id], [s].[Name]
    FROM [UsersSkills] AS [u0]
    INNER JOIN [Skills] AS [s] ON [u0].[SkillId] = [s].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsersId]
ORDER BY [t].[Id], [c].[Id], [t0].[UserId], [t0].[SkillId], [t0].[Id], [t1].[RolesId], [t1].[UsersId]
2022-08-07 12:39:01.4242|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned user with email: petro@petro.
2022-08-07 12:39:01.4242|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.UserDto'.
2022-08-07 12:39:01.4350|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API) in 256.4731ms
2022-08-07 12:39:01.4350|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API)'
2022-08-07 12:39:01.4350|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account - - - 200 190 application/json;+charset=utf-8 351.8235ms
2022-08-07 12:39:04.0214|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:39:04.0214|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:39:04.0214|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 2.6981ms
2022-08-07 12:39:04.0214|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 604
2022-08-07 12:39:04.0214|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:39:04.0214|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:39:04.0214|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:39:07.1117|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:39:17.9487|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:39:17.9487|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:39:17.9487|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:39:17.9487|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:39:17.9583|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:39:17.9583|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:39:17.9583|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:39:17.9583|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:39:17.9583|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 13932.4168ms
2022-08-07 12:39:17.9583|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:39:17.9583|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 604 - 200 637 application/json;+charset=utf-8 13933.8751ms
2022-08-07 12:39:23.5416|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:39:23.5416|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:39:23.5416|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 7.7107ms
2022-08-07 12:39:23.5591|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:39:23.5591|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:39:23.5591|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:39:23.5591|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:39:23.5591|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:39:23.5891|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 12:39:23.6119|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 12:39:23.6165|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 12:39:23.6165|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:39:23.6165|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 56.7044ms
2022-08-07 12:39:23.6165|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:39:23.6165|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 58.4670ms
2022-08-07 12:39:43.4966|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/2 - -
2022-08-07 12:39:43.5102|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:39:43.5102|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/2 - - - 204 - - 13.7952ms
2022-08-07 12:39:43.5102|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/2 - -
2022-08-07 12:39:43.5102|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:39:43.5102|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 12:39:43.5286|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseDto] GetCourseAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:39:43.5286|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:39:43.7004|WARN|Microsoft.EntityFrameworkCore.Query|Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2022-08-07 12:39:43.7631|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (33ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 12:39:43.8331|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 12:39:43.8596|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:39:43.8768|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:39:43.8768|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 12:39:43.8809|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:39:43.8809|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:39:43.8809|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 12:39:43.8809|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:39:43.8809|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:39:43.8809|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 12:39:43.8809|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:39:43.8809|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:39:43.8809|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 12:39:43.8809|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:39:43.8809|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:39:43.8969|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 12:39:43.8969|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:39:43.8969|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:39:43.8969|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 12:39:43.8969|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:39:43.8969|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:39:43.9409|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 12:39:43.9699|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course with id: 2.
2022-08-07 12:39:43.9699|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseDto'.
2022-08-07 12:39:43.9951|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API) in 466.3489ms
2022-08-07 12:39:43.9951|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 12:39:43.9951|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/2 - - - 200 3435 application/json;+charset=utf-8 481.1118ms
2022-08-07 12:39:47.0216|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:39:47.0216|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:39:47.0216|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 4.6316ms
2022-08-07 12:39:47.0357|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 637
2022-08-07 12:39:47.0357|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:39:47.0357|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:39:47.0357|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:39:54.1334|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:40:23.1657|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:40:23.1825|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:40:23.1825|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:40:23.1825|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:40:23.1825|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:40:23.1825|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:40:23.1825|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:40:23.1825|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:40:23.1825|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 36149.8815ms
2022-08-07 12:40:23.1825|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:40:23.1825|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 637 - 200 671 application/json;+charset=utf-8 36153.9311ms
2022-08-07 12:40:30.7278|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/2 - -
2022-08-07 12:40:30.7278|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:40:30.7278|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/2 - - - 204 - - 4.0106ms
2022-08-07 12:40:30.8183|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/2 - -
2022-08-07 12:40:30.8183|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:40:30.8183|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 12:40:30.8183|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseDto] GetCourseAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:40:30.8183|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:40:30.8368|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 12:40:30.8368|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 12:40:30.8368|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:40:30.8700|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:40:30.8790|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 12:40:30.8790|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:40:30.8790|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:40:30.8790|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 12:40:30.8790|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:40:30.8790|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:40:30.8790|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 12:40:30.8944|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:40:30.8944|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:40:30.8944|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 12:40:30.8944|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:40:30.9124|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:40:30.9124|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 12:40:30.9261|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:40:30.9261|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:40:30.9556|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (27ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 12:40:30.9844|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (28ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:40:30.9844|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:40:31.0204|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (33ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 12:40:31.0702|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course with id: 2.
2022-08-07 12:40:31.0702|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseDto'.
2022-08-07 12:40:31.0702|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API) in 251.6816ms
2022-08-07 12:40:31.0702|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 12:40:31.0702|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/2 - - - 200 3435 application/json;+charset=utf-8 252.8467ms
2022-08-07 12:40:58.4936|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:40:58.5041|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:40:58.5041|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 10.7678ms
2022-08-07 12:40:58.5041|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:40:58.5041|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:40:58.5041|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:40:58.5041|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:40:58.5041|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:40:58.5041|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 12:40:58.5222|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 12:40:58.5222|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 12:40:58.5222|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:40:58.5222|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 16.4184ms
2022-08-07 12:40:58.5222|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:40:58.5222|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 17.8252ms
2022-08-07 12:41:02.9252|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/2 - -
2022-08-07 12:41:02.9266|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:41:02.9266|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/2 - - - 204 - - 1.8366ms
2022-08-07 12:41:02.9266|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/2 - -
2022-08-07 12:41:02.9266|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:41:02.9266|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 12:41:02.9266|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseDto] GetCourseAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:41:02.9266|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:41:02.9431|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 12:41:02.9602|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 12:41:02.9602|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:41:02.9602|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:41:02.9602|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 12:41:02.9602|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:41:02.9602|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:41:02.9726|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 12:41:02.9726|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:41:02.9726|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:41:02.9726|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 12:41:02.9726|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:41:02.9726|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:41:02.9726|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 12:41:02.9726|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:41:02.9726|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:41:02.9726|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 12:41:02.9894|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:41:02.9894|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:41:02.9894|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 12:41:02.9894|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:41:02.9894|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:41:02.9894|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 12:41:03.0310|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course with id: 2.
2022-08-07 12:41:03.0310|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseDto'.
2022-08-07 12:41:03.0310|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API) in 101.0398ms
2022-08-07 12:41:03.0310|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 12:41:03.0310|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/2 - - - 200 3435 application/json;+charset=utf-8 102.5338ms
2022-08-07 12:41:10.2152|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:41:10.2152|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:41:10.2152|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 3.5595ms
2022-08-07 12:41:10.2223|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:41:10.2223|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:41:10.2223|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:41:10.2223|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:41:10.2223|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:41:10.2223|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 12:41:10.2223|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 12:41:10.2420|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 12:41:10.2420|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:41:10.2420|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 19.3844ms
2022-08-07 12:41:10.2420|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:41:10.2420|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 20.6404ms
2022-08-07 12:41:40.6966|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/0 - -
2022-08-07 12:41:40.6966|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:41:40.6966|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/0 - - - 204 - - 1.7046ms
2022-08-07 12:41:40.6966|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/0 - -
2022-08-07 12:41:40.7103|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:41:40.7103|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 12:41:40.7103|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseDto] GetCourseAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:41:40.7103|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:41:40.7592|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (24ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 12:41:40.9703|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API) in 258.6406ms
2022-08-07 12:41:40.9703|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 12:41:41.1377|ERROR|EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware|Entity not found: EducationalPortal.Application.Exceptions.NotFoundException: "Course" was not found.
   at EducationalPortal.Infrastructure.Services.CoursesService.GetCourseAsync(Int32 id, String email, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\Services\CoursesService.cs:line 84
   at EducationalPortal.API.Controllers.CoursesController.GetCourseAsync(Int32 id, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\Controllers\CoursesController.cs:line 34
   at lambda_method856(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\ExceptionHandling\ExceptionMiddleware.cs:line 25
2022-08-07 12:41:41.1377|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/0 - - - 404 - application/json 434.3187ms
2022-08-07 12:41:47.3242|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:41:47.3242|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:41:47.3242|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 2.2200ms
2022-08-07 12:41:47.3549|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:41:47.3549|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:41:47.3549|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:41:47.3549|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:41:47.3549|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:41:47.4041|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 12:41:47.4041|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 12:41:47.4439|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 12:41:47.4439|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:41:47.4590|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 102.4693ms
2022-08-07 12:41:47.4590|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:41:47.4759|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 121.1484ms
2022-08-07 12:41:51.9797|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:41:51.9797|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:41:51.9797|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1.9087ms
2022-08-07 12:41:51.9797|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 671
2022-08-07 12:41:51.9797|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:41:51.9797|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:41:51.9797|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:41:55.2934|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:41:55.2934|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:41:55.3024|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:41:55.3024|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:41:55.3024|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:41:55.3024|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:41:55.3024|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:41:55.3024|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:41:55.3024|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:41:55.3024|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 3323.2172ms
2022-08-07 12:41:55.3024|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:41:55.3024|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 671 - 200 704 application/json;+charset=utf-8 3324.2113ms
2022-08-07 12:41:55.3442|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 12:41:55.3442|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:41:55.3442|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 204 - - 0.8718ms
2022-08-07 12:41:55.3442|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 12:41:55.3480|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:41:55.3480|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 12:41:55.3480|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "MyLearning", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Core.Entities.JoinEntities.UsersCourses]] MyLearningAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 12:41:55.3480|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:41:55.3848|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 12:41:55.3848|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 12:41:55.4052|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[UserId], [t].[CourseId], [t].[LearnedMaterialsCount], [t].[MaterialsCount], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM (
    SELECT [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
    FROM [UsersCourses] AS [u]
    INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
    WHERE [u0].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c] ON [t].[CourseId] = [c].[Id]
2022-08-07 12:41:55.4156|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE [u0].[Email] = @__email_0
2022-08-07 12:41:55.4156|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned users courses page 1 from database.
2022-08-07 12:41:55.4156|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Core.Entities.JoinEntities.UsersCourses, EducationalPortal.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:41:55.4156|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API) in 65.7629ms
2022-08-07 12:41:55.4156|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 12:41:55.4156|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 200 2 application/json;+charset=utf-8 73.0065ms
2022-08-07 12:41:59.8667|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:41:59.8667|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:41:59.8667|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 1.1228ms
2022-08-07 12:41:59.8667|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:41:59.8667|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:41:59.8667|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:41:59.8667|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:41:59.8667|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:41:59.8816|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 12:41:59.8816|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 12:41:59.8816|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 12:41:59.8816|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:41:59.8816|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 19.8233ms
2022-08-07 12:41:59.8816|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:41:59.8816|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 21.1899ms
2022-08-07 12:42:25.2464|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:42:25.2539|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:42:25.2539|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 7.8982ms
2022-08-07 12:42:25.2539|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 704
2022-08-07 12:42:25.2539|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:42:25.2539|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:42:25.2539|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:42:25.2539|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:42:25.2539|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:42:25.2539|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:42:25.2705|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:42:25.2705|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:42:25.2705|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:42:25.2705|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:42:25.2705|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:42:25.2705|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:42:25.2705|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 23.9392ms
2022-08-07 12:42:25.2705|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:42:25.2705|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 704 - 200 737 application/json;+charset=utf-8 25.1561ms
2022-08-07 12:42:55.2547|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:42:55.2547|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:42:55.2547|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 2.2929ms
2022-08-07 12:42:55.2547|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 737
2022-08-07 12:42:55.2547|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:42:55.2547|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:42:55.2547|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:42:55.2547|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:42:55.2547|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:42:55.2547|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:42:55.2547|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:42:55.2547|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:42:55.2547|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:42:55.2697|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:42:55.2697|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:42:55.2697|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:42:55.2697|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 11.2766ms
2022-08-07 12:42:55.2697|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:42:55.2697|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 737 - 200 771 application/json;+charset=utf-8 12.7453ms
2022-08-07 12:43:25.2555|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:43:25.2555|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:43:25.2555|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 2.8448ms
2022-08-07 12:43:25.2555|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 771
2022-08-07 12:43:25.2555|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:43:25.2555|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:43:25.2555|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:43:25.2555|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:43:25.2555|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:43:25.2555|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:43:25.2703|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:43:25.2703|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:43:25.2703|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:43:25.2871|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:43:25.2871|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:43:25.2871|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:43:25.2871|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 27.5832ms
2022-08-07 12:43:25.2871|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:43:25.2871|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 771 - 200 804 application/json;+charset=utf-8 28.8005ms
2022-08-07 12:43:55.2438|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:43:55.2438|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:43:55.2438|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1.4555ms
2022-08-07 12:43:55.2438|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 804
2022-08-07 12:43:55.2438|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:43:55.2438|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:43:55.2438|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:43:55.2438|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:43:55.2438|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:43:55.2438|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:43:55.2550|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:43:55.2550|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:43:55.2550|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:43:55.2550|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:43:55.2550|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:43:55.2550|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:43:55.2550|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 12.4118ms
2022-08-07 12:43:55.2550|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:43:55.2550|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 804 - 200 837 application/json;+charset=utf-8 13.8559ms
2022-08-07 12:44:25.2574|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:44:25.2574|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:44:25.2574|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1.7381ms
2022-08-07 12:44:25.2574|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 837
2022-08-07 12:44:25.2574|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:44:25.2574|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:44:25.2574|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:44:25.2574|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:44:25.2574|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:44:25.2574|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:44:25.2574|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:44:25.2574|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:44:25.2713|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:44:25.2713|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:44:25.2713|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:44:25.2713|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:44:25.2713|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 11.1985ms
2022-08-07 12:44:25.2713|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:44:25.2713|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 837 - 200 871 application/json;+charset=utf-8 12.4701ms
2022-08-07 12:44:53.8850|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:44:53.8850|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:44:53.8850|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 3.5638ms
2022-08-07 12:44:53.8965|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:44:53.8965|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:44:53.8965|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:44:53.8965|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:44:53.8965|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:44:53.9133|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 12:44:53.9133|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 12:44:53.9133|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 12:44:53.9133|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:44:53.9133|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 24.6267ms
2022-08-07 12:44:53.9133|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:44:53.9133|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 26.1042ms
2022-08-07 12:45:04.0554|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:45:04.0554|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:45:04.0554|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 1.4979ms
2022-08-07 12:45:04.0554|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:45:04.0554|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:45:04.0554|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:45:04.0554|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:45:04.0554|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:45:04.1121|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 12:45:04.1177|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 12:45:04.1299|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 12:45:04.1299|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:45:04.1299|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 68.499ms
2022-08-07 12:45:04.1299|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:45:04.1299|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 70.4517ms
2022-08-07 12:45:20.0965|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:45:20.1105|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:45:20.1105|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 14.3542ms
2022-08-07 12:45:20.2787|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:45:20.2787|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:45:20.2787|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:45:20.2787|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:45:20.2787|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:45:20.5429|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (242ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 12:45:20.5429|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 12:45:20.5517|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 12:45:20.5517|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:45:20.5517|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 271.2524ms
2022-08-07 12:45:20.5517|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:45:20.5517|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 273.9389ms
2022-08-07 12:45:32.1223|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:45:32.1223|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:45:32.1223|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1.5817ms
2022-08-07 12:45:32.1223|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 871
2022-08-07 12:45:32.1223|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:45:32.1223|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:45:32.1223|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:45:32.1223|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:45:32.1292|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:45:32.1292|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:45:32.1292|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:45:32.1292|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:45:32.1556|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:45:32.1718|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:45:32.1802|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:45:32.1802|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:45:32.1802|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 54.8036ms
2022-08-07 12:45:32.1802|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:45:32.1802|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 871 - 200 904 application/json;+charset=utf-8 55.8563ms
2022-08-07 12:45:32.2146|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 12:45:32.2146|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:45:32.2146|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 204 - - 0.4257ms
2022-08-07 12:45:32.2146|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 12:45:32.2146|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:45:32.2146|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 12:45:32.2146|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "MyLearning", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Core.Entities.JoinEntities.UsersCourses]] MyLearningAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 12:45:32.2231|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:45:32.2486|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[UserId], [t].[CourseId], [t].[LearnedMaterialsCount], [t].[MaterialsCount], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM (
    SELECT [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
    FROM [UsersCourses] AS [u]
    INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
    WHERE [u0].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c] ON [t].[CourseId] = [c].[Id]
2022-08-07 12:45:32.2551|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE [u0].[Email] = @__email_0
2022-08-07 12:45:32.2551|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned users courses page 1 from database.
2022-08-07 12:45:32.2551|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Core.Entities.JoinEntities.UsersCourses, EducationalPortal.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:45:32.2551|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API) in 33.5016ms
2022-08-07 12:45:32.2551|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 12:45:32.2551|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 200 2 application/json;+charset=utf-8 34.9356ms
2022-08-07 12:45:34.8808|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:45:34.8808|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:45:34.8808|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 1.2208ms
2022-08-07 12:45:34.8808|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:45:34.8808|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:45:34.8808|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:45:34.8808|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:45:34.8808|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:45:34.9003|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 12:45:34.9003|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 12:45:34.9101|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 12:45:34.9101|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:45:34.9101|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 24.4966ms
2022-08-07 12:45:34.9101|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:45:34.9101|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 26.0108ms
2022-08-07 12:45:59.3563|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:45:59.3563|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:45:59.3563|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 2.8731ms
2022-08-07 12:45:59.3563|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:45:59.3563|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:45:59.3638|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:45:59.3638|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:45:59.3638|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:45:59.4317|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (23ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 12:45:59.4317|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 12:45:59.4317|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 12:45:59.4317|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:45:59.4317|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 75.3866ms
2022-08-07 12:45:59.4317|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:45:59.4317|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 77.6427ms
2022-08-07 12:46:19.5705|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:46:19.5705|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:46:19.5705|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 3.8669ms
2022-08-07 12:46:19.5887|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:46:19.5887|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:46:19.5887|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:46:19.5887|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:46:19.5887|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:46:19.7014|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (76ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 12:46:19.7189|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 12:46:19.7269|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 12:46:19.7269|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:46:19.7269|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 138.229ms
2022-08-07 12:46:19.7269|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:46:19.7269|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 140.1558ms
2022-08-07 12:46:41.1174|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:46:41.1174|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:46:41.1174|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 7.1090ms
2022-08-07 12:46:41.1174|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:46:41.1174|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:46:41.1174|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:46:41.1174|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:46:41.1297|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:46:41.1297|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 12:46:41.1297|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 12:46:41.1489|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 12:46:41.1489|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:46:41.1489|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 21.5385ms
2022-08-07 12:46:41.1489|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:46:41.1489|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 24.9947ms
2022-08-07 12:46:45.0738|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:46:45.0738|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:46:45.0738|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:46:45.0738|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:46:45.0738|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:46:45.0898|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 12:46:45.0898|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 12:46:45.0992|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 12:46:45.0992|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:46:45.0992|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 24.4224ms
2022-08-07 12:46:45.0992|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:46:45.0992|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 26.6438ms
2022-08-07 12:46:49.7688|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:46:49.7718|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:46:49.7718|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 4.6047ms
2022-08-07 12:46:49.8208|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:46:49.8208|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:46:49.8208|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:46:49.8208|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:46:49.8208|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:46:49.9005|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (32ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 12:46:49.9223|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 12:46:49.9274|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 12:46:49.9274|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:46:49.9863|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 163.7323ms
2022-08-07 12:46:49.9863|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:46:49.9863|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 166.4822ms
2022-08-07 12:47:05.2536|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:47:05.2563|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:47:05.2563|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 3.8437ms
2022-08-07 12:47:05.3473|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:47:05.3509|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:47:05.3509|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:47:05.3509|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:47:05.3509|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:47:05.4336|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (53ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 12:47:05.4756|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (40ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 12:47:05.4883|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 12:47:05.4883|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:47:05.4883|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 137.7705ms
2022-08-07 12:47:05.4883|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:47:05.4883|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 142.4921ms
2022-08-07 12:47:22.4644|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:47:22.4644|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:47:22.4644|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1.3648ms
2022-08-07 12:47:22.4990|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 904
2022-08-07 12:47:22.4990|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:47:22.4990|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:47:22.4990|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:47:24.3801|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:47:24.3801|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:47:24.3801|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:47:24.3801|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:47:24.3801|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 0.3369ms
2022-08-07 12:47:24.3801|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:47:24.3801|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:47:24.3801|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:47:24.3801|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:47:24.3801|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:47:24.3801|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:47:24.3801|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:47:24.3956|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:47:24.3956|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:47:24.3956|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:47:24.3956|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:47:24.3956|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:47:24.3956|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 1896.8417ms
2022-08-07 12:47:24.3956|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:47:24.3956|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 904 - 200 937 application/json;+charset=utf-8 1900.2305ms
2022-08-07 12:47:24.4152|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 12:47:24.4152|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 12:47:24.4152|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 12:47:24.4152|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:47:24.4152|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 30.025ms
2022-08-07 12:47:24.4152|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:47:24.4152|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 31.7629ms
2022-08-07 12:47:55.0257|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:47:55.0257|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:47:55.0257|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1.1484ms
2022-08-07 12:47:55.0365|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 937
2022-08-07 12:47:55.0365|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:47:55.0365|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:47:55.0365|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:48:01.6703|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:48:01.7020|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:48:01.7020|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 32.2260ms
2022-08-07 12:48:01.7020|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:48:01.7435|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:48:01.7435|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:48:01.7435|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:48:13.1489|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:48:13.1489|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:48:13.1489|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:48:13.1489|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:48:13.1620|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:48:13.1620|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:48:13.1620|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:48:13.1620|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:48:13.1620|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:48:13.1620|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:48:13.1620|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 18131.232ms
2022-08-07 12:48:13.1620|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:48:13.1620|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 937 - 200 971 application/json;+charset=utf-8 18132.7152ms
2022-08-07 12:48:13.1620|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 12:48:13.1795|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 12:48:13.1795|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 12:48:13.1795|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:48:13.1795|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 35.704ms
2022-08-07 12:48:13.1795|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:48:13.1795|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 11442.2987ms
2022-08-07 12:48:43.0109|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:48:43.0109|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:48:43.0109|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 6.1572ms
2022-08-07 12:48:43.0295|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 971
2022-08-07 12:48:43.0295|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:48:43.0295|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:48:43.0295|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:48:43.0295|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:48:43.0295|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:48:43.0493|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:48:43.0493|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:48:43.0493|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:48:43.0632|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:48:43.0632|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:48:43.0632|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:48:43.0632|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:48:43.0632|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 34.3453ms
2022-08-07 12:48:43.0632|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:48:43.0661|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 971 - 200 1004 application/json;+charset=utf-8 36.6286ms
2022-08-07 12:49:13.0135|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:49:13.0135|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:49:13.0215|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 7.9218ms
2022-08-07 12:49:13.0215|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1004
2022-08-07 12:49:13.0215|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:49:13.0215|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:49:13.0215|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:49:13.0215|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:49:13.0215|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:49:13.0215|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:49:13.0366|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:49:13.0366|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:49:13.0366|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:49:13.0366|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:49:13.0366|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:49:13.0366|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:49:13.0366|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 15.7834ms
2022-08-07 12:49:13.0366|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:49:13.0366|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1004 - 200 1037 application/json;+charset=utf-8 17.4771ms
2022-08-07 12:49:43.0134|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:49:43.0134|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:49:43.0209|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 7.4051ms
2022-08-07 12:49:43.0209|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1037
2022-08-07 12:49:43.0209|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:49:43.0209|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:49:43.0209|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:49:43.0209|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:49:43.0209|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:49:43.0609|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (26ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:49:43.0609|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:49:43.0609|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:49:43.0950|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (26ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:49:43.1061|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:49:43.1061|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:49:43.1061|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:49:43.1061|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 80.6214ms
2022-08-07 12:49:43.1061|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:49:43.1061|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1037 - 200 1071 application/json;+charset=utf-8 82.3836ms
2022-08-07 12:50:13.0123|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:50:13.0123|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:50:13.0123|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 2.5944ms
2022-08-07 12:50:13.0261|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1071
2022-08-07 12:50:13.0261|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:50:13.0261|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:50:13.0261|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:50:13.0261|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:50:13.0261|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:50:13.0261|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:50:13.0261|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:50:13.0261|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:50:13.0382|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:50:13.0382|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:50:13.0382|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:50:13.0382|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:50:13.0382|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 14.7621ms
2022-08-07 12:50:13.0382|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:50:13.0382|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1071 - 200 1104 application/json;+charset=utf-8 16.4011ms
2022-08-07 12:50:43.0218|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:50:43.0218|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:50:43.0218|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 4.7096ms
2022-08-07 12:50:43.0382|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1104
2022-08-07 12:50:43.0382|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:50:43.0382|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:50:43.0382|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:50:43.0382|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:50:43.0382|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:50:43.0628|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:50:43.0628|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:50:43.0628|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:50:43.0770|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:50:43.0770|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:50:43.0770|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:50:43.0770|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:50:43.0770|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 41.6291ms
2022-08-07 12:50:43.0770|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:50:43.0770|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1104 - 200 1137 application/json;+charset=utf-8 42.8276ms
2022-08-07 12:51:13.0206|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:51:13.0206|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:51:13.0206|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 6.7903ms
2022-08-07 12:51:13.0206|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1137
2022-08-07 12:51:13.0351|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:51:13.0351|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:51:13.0351|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:51:13.0351|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:51:13.0351|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:51:13.0351|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:51:13.0351|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:51:13.0351|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:51:13.0351|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:51:13.0351|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:51:13.0525|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:51:13.0525|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:51:13.0525|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 16.2227ms
2022-08-07 12:51:13.0525|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:51:13.0525|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1137 - 200 1171 application/json;+charset=utf-8 20.4353ms
2022-08-07 12:51:43.0148|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:51:43.0148|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:51:43.0148|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1.5781ms
2022-08-07 12:51:43.0148|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1171
2022-08-07 12:51:43.0148|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:51:43.0197|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:51:43.0197|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:51:43.0197|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:51:43.0197|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:51:43.0197|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:51:43.0197|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:51:43.0197|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:51:43.0369|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:51:43.0369|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:51:43.0369|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:51:43.0369|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:51:43.0369|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 19.5111ms
2022-08-07 12:51:43.0369|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:51:43.0369|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1171 - 200 1204 application/json;+charset=utf-8 21.1375ms
2022-08-07 12:52:13.0146|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:52:13.0146|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:52:13.0209|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 6.9031ms
2022-08-07 12:52:13.0209|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1204
2022-08-07 12:52:13.0209|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:52:13.0209|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:52:13.0209|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:52:13.0209|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:52:13.0209|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:52:13.0368|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:52:13.0368|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:52:13.0368|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:52:13.0368|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:52:13.0368|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:52:13.0368|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:52:13.0368|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:52:13.0368|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 17.3225ms
2022-08-07 12:52:13.0368|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:52:13.0368|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1204 - 200 1237 application/json;+charset=utf-8 19.3514ms
2022-08-07 12:52:43.0217|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:52:43.0217|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:52:43.0217|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 3.3120ms
2022-08-07 12:52:43.0217|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1237
2022-08-07 12:52:43.0217|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:52:43.0217|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:52:43.0217|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:52:43.0358|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:52:43.0358|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:52:43.0358|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:52:43.0358|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:52:43.0358|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:52:43.0582|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:52:43.0780|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:52:43.0780|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:52:43.0780|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:52:43.0780|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 45.2403ms
2022-08-07 12:52:43.0780|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:52:43.0780|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1237 - 200 1271 application/json;+charset=utf-8 46.5794ms
2022-08-07 12:53:13.0181|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:53:13.0214|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:53:13.0214|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 3.7364ms
2022-08-07 12:53:13.0214|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1271
2022-08-07 12:53:13.0214|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:53:13.0214|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:53:13.0214|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:53:13.0214|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:53:13.0214|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:53:13.0406|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:53:13.0406|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:53:13.0406|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:53:13.0406|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:53:13.0406|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:53:13.0406|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:53:13.0406|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:53:13.0406|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 18.0154ms
2022-08-07 12:53:13.0406|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:53:13.0406|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1271 - 200 1304 application/json;+charset=utf-8 21.9254ms
2022-08-07 12:53:43.0106|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:53:43.0106|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:53:43.0106|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 3.7572ms
2022-08-07 12:53:43.0284|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1304
2022-08-07 12:53:43.0284|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:53:43.0409|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:53:43.0409|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:53:43.0409|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:53:43.0409|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:53:43.0715|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (27ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:53:43.0715|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:53:43.0715|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:53:43.0829|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:53:43.0829|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:53:43.0829|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:53:43.0829|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:53:43.0829|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 45.1831ms
2022-08-07 12:53:43.0829|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:53:43.0829|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1304 - 200 1337 application/json;+charset=utf-8 58.2912ms
2022-08-07 12:54:13.0177|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:54:13.0193|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:54:13.0193|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 2.7804ms
2022-08-07 12:54:13.0193|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1337
2022-08-07 12:54:13.0193|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:54:13.0193|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:54:13.0193|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:54:13.0193|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:54:13.0193|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:54:13.0193|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:54:13.0363|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:54:13.0363|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:54:13.0363|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:54:13.0363|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:54:13.0363|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:54:13.0363|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:54:13.0363|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 17.8887ms
2022-08-07 12:54:13.0363|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:54:13.0363|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1337 - 200 1371 application/json;+charset=utf-8 19.5969ms
2022-08-07 12:54:43.0132|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:54:43.0201|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:54:43.0201|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 7.1029ms
2022-08-07 12:54:43.0201|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1371
2022-08-07 12:54:43.0201|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:54:43.0201|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:54:43.0201|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:54:43.0201|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:54:43.0201|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:54:43.0201|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:54:43.0201|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:54:43.0201|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:54:43.0376|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:54:43.0376|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:54:43.0376|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:54:43.0376|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:54:43.0376|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 24.826ms
2022-08-07 12:54:43.0511|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:54:43.0511|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1371 - 200 1404 application/json;+charset=utf-8 26.2462ms
2022-08-07 12:55:13.0104|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:55:13.0104|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:55:13.0242|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1404
2022-08-07 12:55:13.0242|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:55:13.0242|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:55:13.0242|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 17.9344ms
2022-08-07 12:55:13.0242|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:55:13.0404|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:55:13.0404|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:55:13.0567|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:55:13.0567|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:55:13.0567|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:55:13.0717|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:55:13.0717|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:55:13.0717|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:55:13.0717|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:55:13.0717|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 52.0792ms
2022-08-07 12:55:13.0717|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:55:13.0717|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1404 - 200 1437 application/json;+charset=utf-8 56.7933ms
2022-08-07 12:55:43.0141|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:55:43.0141|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:55:43.0141|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 2.3175ms
2022-08-07 12:55:43.0240|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1437
2022-08-07 12:55:43.0240|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:55:43.0240|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:55:43.0240|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:55:43.0240|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:55:43.0240|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:55:43.0240|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:55:43.0350|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:55:43.0350|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:55:43.0350|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:55:43.0350|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:55:43.0350|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:55:43.0350|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:55:43.0350|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 19.8852ms
2022-08-07 12:55:43.0350|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:55:43.0350|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1437 - 200 1471 application/json;+charset=utf-8 21.1228ms
2022-08-07 12:56:13.0221|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:56:13.0221|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:56:13.0626|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 4.6474ms
2022-08-07 12:56:13.0732|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1471
2022-08-07 12:56:13.0732|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:56:13.0732|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:56:13.0732|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:56:13.0732|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:56:13.0836|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:56:13.0836|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:56:13.0836|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:56:13.0836|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:56:13.1001|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:56:13.1001|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:56:13.1001|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:56:13.1001|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:56:13.1001|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 37.9751ms
2022-08-07 12:56:13.1001|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:56:13.1001|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1471 - 200 1504 application/json;+charset=utf-8 39.1458ms
2022-08-07 12:56:43.0220|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:56:43.0220|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:56:43.0220|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 8.3453ms
2022-08-07 12:56:43.0362|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1504
2022-08-07 12:56:43.0362|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:56:43.0362|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:56:43.0362|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:56:43.0362|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:56:43.0362|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:56:43.0362|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:56:43.0362|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:56:43.0362|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:56:43.0362|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:56:43.0517|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:56:43.0517|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:56:43.0517|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:56:43.0517|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 16.2058ms
2022-08-07 12:56:43.0517|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:56:43.0517|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1504 - 200 1537 application/json;+charset=utf-8 17.7884ms
2022-08-07 12:57:13.2466|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:57:13.2466|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:57:13.2466|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1.7805ms
2022-08-07 12:57:13.2466|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1537
2022-08-07 12:57:13.2466|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:57:13.2466|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:57:13.2466|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:57:13.2466|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:57:13.2466|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:57:13.2559|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:57:13.2559|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:57:13.2559|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:57:13.2559|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:57:13.2559|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:57:13.2559|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:57:13.2559|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:57:13.2559|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 13.6805ms
2022-08-07 12:57:13.2559|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:57:13.2559|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1537 - 200 1571 application/json;+charset=utf-8 15.2776ms
2022-08-07 12:57:19.9384|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 12:57:19.9384|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:57:19.9384|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 204 - - 1.5908ms
2022-08-07 12:57:19.9890|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 12:57:19.9890|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:57:19.9890|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 12:57:19.9890|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "MyLearning", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Core.Entities.JoinEntities.UsersCourses]] MyLearningAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 12:57:19.9890|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:57:20.0906|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (22ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[UserId], [t].[CourseId], [t].[LearnedMaterialsCount], [t].[MaterialsCount], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM (
    SELECT [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
    FROM [UsersCourses] AS [u]
    INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
    WHERE [u0].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c] ON [t].[CourseId] = [c].[Id]
2022-08-07 12:57:20.0906|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE [u0].[Email] = @__email_0
2022-08-07 12:57:20.0906|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned users courses page 1 from database.
2022-08-07 12:57:20.0906|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Core.Entities.JoinEntities.UsersCourses, EducationalPortal.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:57:20.0906|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API) in 105.6636ms
2022-08-07 12:57:20.0906|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 12:57:20.0995|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 200 2 application/json;+charset=utf-8 110.4543ms
2022-08-07 12:57:22.0088|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:57:22.0275|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:57:22.0275|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 19.0308ms
2022-08-07 12:57:22.0480|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 12:57:22.0480|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:57:22.0534|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:57:22.0534|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:57:22.0534|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:57:22.1478|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (33ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 12:57:22.1620|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 12:57:22.1753|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 12:57:22.1753|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:57:22.1753|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 122.393ms
2022-08-07 12:57:22.1753|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 12:57:22.1753|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 128.4525ms
2022-08-07 12:57:23.2079|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/3 - -
2022-08-07 12:57:23.2079|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:57:23.2079|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/3 - - - 204 - - 2.0935ms
2022-08-07 12:57:23.2079|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/3 - -
2022-08-07 12:57:23.2079|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:57:23.2079|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 12:57:23.2079|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseDto] GetCourseAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 12:57:23.2079|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:57:23.2446|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 12:57:23.2446|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 12:57:23.2446|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:57:23.2446|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:57:23.2558|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 12:57:23.2558|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:57:23.2558|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 12:57:23.2558|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 12:57:23.2955|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course with id: 3.
2022-08-07 12:57:23.2955|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseDto'.
2022-08-07 12:57:23.2955|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API) in 78.9285ms
2022-08-07 12:57:23.2955|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 12:57:23.2955|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/3 - - - 200 2269 application/json;+charset=utf-8 80.3466ms
2022-08-07 12:57:30.9379|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/add-to-cart/3 - -
2022-08-07 12:57:30.9379|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:57:30.9379|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/add-to-cart/3 - - - 204 - - 2.9939ms
2022-08-07 12:57:30.9438|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 PUT https://localhost:7106/api/shopping-cart/add-to-cart/3 application/json 2
2022-08-07 12:57:30.9438|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:57:30.9438|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.AddToCartAsync (EducationalPortal.API)'
2022-08-07 12:57:30.9668|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "AddToCart", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCartAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 12:57:30.9668|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:57:31.0634|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [CartItems] AS [c]
        INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
        LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
        WHERE ([c0].[Id] = @__courseId_0) AND ([u].[Email] = @__email_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-08-07 12:57:31.0788|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:57:31.1267|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CartItems] ([CourseId], [UserId])
VALUES (@p0, @p1);
SELECT [Id]
FROM [CartItems]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:57:31.1330|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Created cart item with id: 1.
2022-08-07 12:57:31.1479|INFO|Microsoft.AspNetCore.Mvc.StatusCodeResult|Executing StatusCodeResult, setting HTTP status code 200
2022-08-07 12:57:31.1479|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.AddToCartAsync (EducationalPortal.API) in 181.2821ms
2022-08-07 12:57:31.1479|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.AddToCartAsync (EducationalPortal.API)'
2022-08-07 12:57:31.1479|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 PUT https://localhost:7106/api/shopping-cart/add-to-cart/3 application/json 2 - 200 0 - 204.9014ms
2022-08-07 12:57:31.2180|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - -
2022-08-07 12:57:31.2180|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:57:31.2180|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - - - 204 - - 0.3588ms
2022-08-07 12:57:31.2258|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - -
2022-08-07 12:57:31.2258|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:57:31.2258|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API)'
2022-08-07 12:57:31.2441|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/total-price - -
2022-08-07 12:57:31.2441|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:57:31.2441|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/total-price - - - 204 - - 0.4027ms
2022-08-07 12:57:31.2441|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/shopping-cart/total-price - -
2022-08-07 12:57:31.2441|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:57:31.2441|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API)'
2022-08-07 12:57:31.2650|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCart", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.CartItemDto]] GetCartAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 12:57:31.2650|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetTotalPrice", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int32] GetTotalPriceAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 12:57:31.2650|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:57:31.2650|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:57:31.3113|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 12:57:31.3113|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 12:57:31.3419|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([c0].[Price]), 0)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 12:57:31.3419|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Returned total price 110 for cart from database.
2022-08-07 12:57:31.3529|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Int32'.
2022-08-07 12:57:31.3529|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API) in 87.4064ms
2022-08-07 12:57:31.3529|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API)'
2022-08-07 12:57:31.3529|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/shopping-cart/total-price - - - 200 3 application/json;+charset=utf-8 103.3841ms
2022-08-07 12:57:31.3686|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[CourseId], [t].[UserId], [c0].[Id], [c0].[AuthorId], [c0].[Description], [c0].[Name], [c0].[Price], [c0].[ShortDescription], [c0].[Thumbnail]
FROM (
    SELECT [c].[Id], [c].[CourseId], [c].[UserId]
    FROM [CartItems] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
    WHERE [u].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c0] ON [t].[CourseId] = [c0].[Id]
2022-08-07 12:57:31.4126|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 12:57:31.4126|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Returned cart items page 1 from database.
2022-08-07 12:57:31.4126|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.CartItemDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:57:31.4346|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API) in 169.3847ms
2022-08-07 12:57:31.4346|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API)'
2022-08-07 12:57:31.4346|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - - - 200 345 application/json;+charset=utf-8 210.4148ms
2022-08-07 12:57:31.9354|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/buy - -
2022-08-07 12:57:31.9354|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:57:31.9354|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/buy - - - 204 - - 0.3780ms
2022-08-07 12:57:31.9640|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 PUT https://localhost:7106/api/shopping-cart/buy application/json 2
2022-08-07 12:57:31.9640|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:57:31.9640|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.BuyAsync (EducationalPortal.API)'
2022-08-07 12:57:31.9770|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Buy", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BuyAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 12:57:31.9770|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:57:31.9943|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:57:32.0147|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[CourseId], [c].[UserId], [c0].[Id], [c0].[AuthorId], [c0].[Description], [c0].[Name], [c0].[Price], [c0].[ShortDescription], [c0].[Thumbnail]
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 12:57:32.0147|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([c0].[Price]), 0)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 12:57:32.0207|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:57:32.0207|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|User with email petro@petro payed 110 points.
2022-08-07 12:57:32.0207|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CoursesMaterials] AS [c]
WHERE [c].[CourseId] = @__courseId_0
2022-08-07 12:57:36.7902|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CoursesMaterials] AS [c]
INNER JOIN (
    SELECT [m].[Id]
    FROM [Materials] AS [m]
) AS [t] ON [c].[MaterialId] = [t].[Id]
WHERE ([c].[CourseId] = @__courseId_0) AND EXISTS (
    SELECT 1
    FROM [MaterialsBaseUser] AS [m0]
    INNER JOIN [Users] AS [u] ON [m0].[UsersId] = [u].[Id]
    WHERE ([t].[Id] = [m0].[MaterialsId]) AND ([u].[Id] = (
        SELECT TOP(1) [u0].[Id]
        FROM [Users] AS [u0]
        WHERE [u0].[Email] = @__email_1)))
2022-08-07 12:57:36.7902|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UsersCourses] ([CourseId], [UserId], [LearnedMaterialsCount], [MaterialsCount])
VALUES (@p0, @p1, @p2, @p3);
2022-08-07 12:57:36.8009|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Added course with id: 3 to user with email: petro@petro.
2022-08-07 12:57:36.8184|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
FROM [Users] AS [u]
WHERE EXISTS (
    SELECT 1
    FROM [Courses] AS [c]
    WHERE ([u].[Id] = [c].[AuthorId]) AND ([c].[Id] = @__courseId_0))
2022-08-07 12:57:36.8184|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:57:36.8184|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Added revenue to author with email default@gmail.com for selling course with id: 3.
2022-08-07 12:57:36.8914|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ShoppingHistory] ([CourseId], [Date], [Price], [UserId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [ShoppingHistory]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 12:57:36.8975|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Created shopping history with id 1.
2022-08-07 12:57:36.9702|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [CartItems]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-08-07 12:57:36.9841|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|User with email petro@petro bought courses.
2022-08-07 12:57:36.9841|INFO|Microsoft.AspNetCore.Mvc.StatusCodeResult|Executing StatusCodeResult, setting HTTP status code 200
2022-08-07 12:57:36.9841|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.BuyAsync (EducationalPortal.API) in 5007.9501ms
2022-08-07 12:57:36.9841|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.BuyAsync (EducationalPortal.API)'
2022-08-07 12:57:36.9841|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 PUT https://localhost:7106/api/shopping-cart/buy application/json 2 - 200 0 - 5021.5123ms
2022-08-07 12:57:36.9981|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - -
2022-08-07 12:57:36.9981|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:57:36.9981|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - - - 204 - - 0.3911ms
2022-08-07 12:57:36.9981|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - -
2022-08-07 12:57:36.9981|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:57:37.0046|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API)'
2022-08-07 12:57:37.0046|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCart", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.CartItemDto]] GetCartAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 12:57:37.0046|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:57:37.0312|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[CourseId], [t].[UserId], [c0].[Id], [c0].[AuthorId], [c0].[Description], [c0].[Name], [c0].[Price], [c0].[ShortDescription], [c0].[Thumbnail]
FROM (
    SELECT [c].[Id], [c].[CourseId], [c].[UserId]
    FROM [CartItems] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
    WHERE [u].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c0] ON [t].[CourseId] = [c0].[Id]
2022-08-07 12:57:37.0370|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 12:57:37.0370|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Returned cart items page 1 from database.
2022-08-07 12:57:37.0370|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.CartItemDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 12:57:37.0370|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API) in 42.0556ms
2022-08-07 12:57:37.0370|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API)'
2022-08-07 12:57:37.0370|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - - - 200 2 application/json;+charset=utf-8 43.6420ms
2022-08-07 12:57:37.0721|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/total-price - -
2022-08-07 12:57:37.0721|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:57:37.0721|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/total-price - - - 204 - - 0.7168ms
2022-08-07 12:57:37.0721|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/shopping-cart/total-price - -
2022-08-07 12:57:37.0721|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:57:37.0721|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API)'
2022-08-07 12:57:37.0721|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetTotalPrice", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int32] GetTotalPriceAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 12:57:37.0721|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:57:37.0930|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([c0].[Price]), 0)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 12:57:37.0930|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Returned total price 0 for cart from database.
2022-08-07 12:57:37.0930|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Int32'.
2022-08-07 12:57:37.0930|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API) in 18.7649ms
2022-08-07 12:57:37.0930|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API)'
2022-08-07 12:57:37.0930|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/shopping-cart/total-price - - - 200 1 application/json;+charset=utf-8 20.3472ms
2022-08-07 12:57:43.2442|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:57:43.2442|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:57:43.2442|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1.4235ms
2022-08-07 12:57:43.2442|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1571
2022-08-07 12:57:43.2442|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:57:43.2442|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:57:43.2442|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:57:43.2442|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:57:43.2442|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:57:43.2442|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:57:43.2565|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:57:43.2565|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:57:43.2565|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:57:43.2565|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:57:43.2565|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:57:43.2565|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:57:43.2565|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 12.4663ms
2022-08-07 12:57:43.2565|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:57:43.2565|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1571 - 200 1604 application/json;+charset=utf-8 14.1070ms
2022-08-07 12:58:13.2468|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:58:13.2468|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:58:13.2468|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 2.6812ms
2022-08-07 12:58:13.2549|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1604
2022-08-07 12:58:13.2549|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:58:13.2549|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:58:13.2549|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:58:13.2549|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:58:13.2549|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:58:13.2549|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:58:13.2549|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:58:13.2549|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:58:13.2549|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:58:13.2549|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:58:13.2549|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:58:13.2549|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:58:13.2549|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 12.8812ms
2022-08-07 12:58:13.2549|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:58:13.2549|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1604 - 200 1637 application/json;+charset=utf-8 14.5621ms
2022-08-07 12:58:43.2494|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:58:43.2494|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:58:43.2494|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1.7410ms
2022-08-07 12:58:43.2494|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1637
2022-08-07 12:58:43.2494|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:58:43.2494|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:58:43.2542|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:58:43.2542|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:58:43.2542|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:58:43.2542|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:58:43.2542|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:58:43.2542|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:58:43.2542|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:58:43.2542|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:58:43.2542|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:58:43.2542|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:58:43.2542|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 11.4951ms
2022-08-07 12:58:43.2542|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:58:43.2542|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1637 - 200 1671 application/json;+charset=utf-8 13.0246ms
2022-08-07 12:59:13.2594|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:59:13.2594|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:59:13.2728|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 13.4200ms
2022-08-07 12:59:13.2728|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1671
2022-08-07 12:59:13.2728|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:59:13.2728|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:59:13.2728|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:59:13.2728|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:59:13.2728|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:59:13.2728|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:59:13.2728|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:59:13.2728|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:59:13.2864|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:59:13.2864|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:59:13.2864|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:59:13.2864|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:59:13.2864|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 13.372ms
2022-08-07 12:59:13.2864|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:59:13.2864|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1671 - 200 1704 application/json;+charset=utf-8 14.7887ms
2022-08-07 12:59:43.2557|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 12:59:43.2557|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:59:43.2557|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 2.0198ms
2022-08-07 12:59:43.2557|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1704
2022-08-07 12:59:43.2557|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 12:59:43.2557|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:59:43.2557|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 12:59:43.2557|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 12:59:43.2557|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 12:59:43.2557|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 12:59:43.2557|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 12:59:43.2557|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 12:59:43.2710|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 12:59:43.2710|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 12:59:43.2710|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 12:59:43.2710|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 12:59:43.2710|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 13.3207ms
2022-08-07 12:59:43.2710|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 12:59:43.2710|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1704 - 200 1737 application/json;+charset=utf-8 15.0552ms
2022-08-07 13:14:20.2033|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 13:14:22.6477|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (103ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2022-08-07 13:14:22.9096|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (83ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [EducationalPortal] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2022-08-07 13:14:22.9393|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [EducationalPortal];
2022-08-07 13:14:23.4453|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (329ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [EducationalPortal];
2022-08-07 13:14:23.5348|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (88ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [EducationalPortal] SET READ_COMMITTED_SNAPSHOT ON;
END;
2022-08-07 13:14:23.5518|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2022-08-07 13:14:23.9509|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Authors] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Authors] PRIMARY KEY ([Id])
);
2022-08-07 13:14:23.9509|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Extensions] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Extensions] PRIMARY KEY ([Id])
);
2022-08-07 13:14:23.9509|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Materials] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Link] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Materials] PRIMARY KEY ([Id])
);
2022-08-07 13:14:23.9593|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Qualities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Qualities] PRIMARY KEY ([Id])
);
2022-08-07 13:14:23.9593|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Resources] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Resources] PRIMARY KEY ([Id])
);
2022-08-07 13:14:23.9593|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Roles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_Roles] PRIMARY KEY ([Id])
);
2022-08-07 13:14:23.9593|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Skills] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Skills] PRIMARY KEY ([Id])
);
2022-08-07 13:14:23.9593|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UserToken] (
    [Id] int NOT NULL IDENTITY,
    [RefreshToken] nvarchar(max) NOT NULL,
    [RefreshTokenExpiryTime] datetime2 NOT NULL,
    CONSTRAINT [PK_UserToken] PRIMARY KEY ([Id])
);
2022-08-07 13:14:23.9730|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Books] (
    [Id] int NOT NULL,
    [PagesCount] int NOT NULL,
    [ExtensionId] int NOT NULL,
    [PublicationYear] int NOT NULL,
    CONSTRAINT [PK_Books] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Books_Extensions_ExtensionId] FOREIGN KEY ([ExtensionId]) REFERENCES [Extensions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Books_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id])
);
2022-08-07 13:14:23.9730|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Videos] (
    [Id] int NOT NULL,
    [Duration] datetime2 NOT NULL,
    [QualityId] int NOT NULL,
    CONSTRAINT [PK_Videos] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Videos_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id]),
    CONSTRAINT [FK_Videos_Qualities_QualityId] FOREIGN KEY ([QualityId]) REFERENCES [Qualities] ([Id]) ON DELETE CASCADE
);
2022-08-07 13:14:23.9730|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Articles] (
    [Id] int NOT NULL,
    [ResourceId] int NOT NULL,
    [PublicationDate] datetime2 NOT NULL,
    CONSTRAINT [PK_Articles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Articles_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id]),
    CONSTRAINT [FK_Articles_Resources_ResourceId] FOREIGN KEY ([ResourceId]) REFERENCES [Resources] ([Id]) ON DELETE CASCADE
);
2022-08-07 13:14:23.9730|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Position] nvarchar(max) NULL,
    [Avatar] nvarchar(max) NOT NULL,
    [Email] nvarchar(450) NOT NULL,
    [PasswordHash] nvarchar(max) NOT NULL,
    [Balance] int NOT NULL,
    [UserTokenId] int NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_UserToken_UserTokenId] FOREIGN KEY ([UserTokenId]) REFERENCES [UserToken] ([Id])
);
2022-08-07 13:14:23.9730|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AuthorBook] (
    [AuthorsId] int NOT NULL,
    [BooksId] int NOT NULL,
    CONSTRAINT [PK_AuthorBook] PRIMARY KEY ([AuthorsId], [BooksId]),
    CONSTRAINT [FK_AuthorBook_Authors_AuthorsId] FOREIGN KEY ([AuthorsId]) REFERENCES [Authors] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AuthorBook_Books_BooksId] FOREIGN KEY ([BooksId]) REFERENCES [Books] ([Id]) ON DELETE CASCADE
);
2022-08-07 13:14:23.9879|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Courses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Thumbnail] nvarchar(max) NOT NULL,
    [ShortDescription] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [Price] int NOT NULL,
    [AuthorId] nvarchar(450) NULL,
    CONSTRAINT [PK_Courses] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Courses_Users_AuthorId] FOREIGN KEY ([AuthorId]) REFERENCES [Users] ([Id])
);
2022-08-07 13:14:23.9879|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [MaterialsBaseUser] (
    [MaterialsId] int NOT NULL,
    [UsersId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_MaterialsBaseUser] PRIMARY KEY ([MaterialsId], [UsersId]),
    CONSTRAINT [FK_MaterialsBaseUser_Materials_MaterialsId] FOREIGN KEY ([MaterialsId]) REFERENCES [Materials] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_MaterialsBaseUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 13:14:23.9879|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [RoleUser] (
    [RolesId] int NOT NULL,
    [UsersId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_RoleUser] PRIMARY KEY ([RolesId], [UsersId]),
    CONSTRAINT [FK_RoleUser_Roles_RolesId] FOREIGN KEY ([RolesId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RoleUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 13:14:23.9879|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UsersSkills] (
    [UserId] nvarchar(450) NOT NULL,
    [SkillId] int NOT NULL,
    [Level] int NOT NULL,
    CONSTRAINT [PK_UsersSkills] PRIMARY KEY ([UserId], [SkillId]),
    CONSTRAINT [FK_UsersSkills_Skills_SkillId] FOREIGN KEY ([SkillId]) REFERENCES [Skills] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UsersSkills_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 13:14:23.9879|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CartItems] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NULL,
    [CourseId] int NOT NULL,
    CONSTRAINT [PK_CartItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_CartItems_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CartItems_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2022-08-07 13:14:24.0066|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CoursesMaterials] (
    [CourseId] int NOT NULL,
    [MaterialId] int NOT NULL,
    [Index] int NOT NULL,
    CONSTRAINT [PK_CoursesMaterials] PRIMARY KEY ([CourseId], [MaterialId]),
    CONSTRAINT [FK_CoursesMaterials_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CoursesMaterials_Materials_MaterialId] FOREIGN KEY ([MaterialId]) REFERENCES [Materials] ([Id]) ON DELETE CASCADE
);
2022-08-07 13:14:24.0066|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CoursesSkills] (
    [CourseId] int NOT NULL,
    [SkillId] int NOT NULL,
    CONSTRAINT [PK_CoursesSkills] PRIMARY KEY ([CourseId], [SkillId]),
    CONSTRAINT [FK_CoursesSkills_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CoursesSkills_Skills_SkillId] FOREIGN KEY ([SkillId]) REFERENCES [Skills] ([Id]) ON DELETE CASCADE
);
2022-08-07 13:14:24.0066|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [ShoppingHistory] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NULL,
    [CourseId] int NOT NULL,
    [Price] int NOT NULL,
    [Date] datetime2 NOT NULL,
    CONSTRAINT [PK_ShoppingHistory] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ShoppingHistory_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ShoppingHistory_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2022-08-07 13:14:24.0066|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UsersCourses] (
    [UserId] nvarchar(450) NOT NULL,
    [CourseId] int NOT NULL,
    [MaterialsCount] int NOT NULL,
    [LearnedMaterialsCount] int NOT NULL,
    CONSTRAINT [PK_UsersCourses] PRIMARY KEY ([UserId], [CourseId]),
    CONSTRAINT [FK_UsersCourses_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UsersCourses_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 13:14:24.0066|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Articles_ResourceId] ON [Articles] ([ResourceId]);
2022-08-07 13:14:24.0208|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_AuthorBook_BooksId] ON [AuthorBook] ([BooksId]);
2022-08-07 13:14:24.0208|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Books_ExtensionId] ON [Books] ([ExtensionId]);
2022-08-07 13:14:24.0208|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CartItems_CourseId] ON [CartItems] ([CourseId]);
2022-08-07 13:14:24.0208|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CartItems_UserId] ON [CartItems] ([UserId]);
2022-08-07 13:14:24.0208|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Courses_AuthorId] ON [Courses] ([AuthorId]);
2022-08-07 13:14:24.0208|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CoursesMaterials_MaterialId] ON [CoursesMaterials] ([MaterialId]);
2022-08-07 13:14:24.0348|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CoursesSkills_SkillId] ON [CoursesSkills] ([SkillId]);
2022-08-07 13:14:24.0348|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_MaterialsBaseUser_UsersId] ON [MaterialsBaseUser] ([UsersId]);
2022-08-07 13:14:24.0348|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Roles_Name] ON [Roles] ([Name]);
2022-08-07 13:14:24.0348|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_RoleUser_UsersId] ON [RoleUser] ([UsersId]);
2022-08-07 13:14:24.0348|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_ShoppingHistory_CourseId] ON [ShoppingHistory] ([CourseId]);
2022-08-07 13:14:24.0348|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_ShoppingHistory_UserId] ON [ShoppingHistory] ([UserId]);
2022-08-07 13:14:24.0348|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]);
2022-08-07 13:14:24.0510|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Users_UserTokenId] ON [Users] ([UserTokenId]);
2022-08-07 13:14:24.0510|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_UsersCourses_CourseId] ON [UsersCourses] ([CourseId]);
2022-08-07 13:14:24.0510|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_UsersSkills_SkillId] ON [UsersSkills] ([SkillId]);
2022-08-07 13:14:24.0510|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Videos_QualityId] ON [Videos] ([QualityId]);
2022-08-07 13:14:24.5556|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (93ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [Qualities] USING (
VALUES (@p0, 0),
(@p1, 1),
(@p2, 2),
(@p3, 3),
(@p4, 4),
(@p5, 5),
(@p6, 6),
(@p7, 7)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [i].[Id] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-08-07 13:14:24.7511|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:24.7618|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 13:14:24.7744|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Extensions] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Extensions]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:24.7981|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:24.8606|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:24.8697|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 13:14:24.8697|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 13:14:24.8996|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Resources] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Resources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:24.9187|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:24.9187|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 13:14:24.9446|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:24.9446|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:24.9446|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:24.9671|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:24.9671|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:24.9671|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:24.9777|INFO|EducationalPortal.Infrastructure.Services.Identity.PasswordHasher|Hashed password.
2022-08-07 13:14:25.0617|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Avatar], [Balance], [Email], [Name], [PasswordHash], [Position], [UserTokenId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2022-08-07 13:14:25.0770|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[@p8='?' (DbType = Int32), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (Size = 450), @p12='?' (DbType = Int32), @p13='?' (Size = 450), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Size = 450), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Size = 450), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RoleUser] ([RolesId], [UsersId])
VALUES (@p8, @p9),
(@p10, @p11);
INSERT INTO [UsersSkills] ([SkillId], [UserId], [Level])
VALUES (@p12, @p13, @p14),
(@p15, @p16, @p17),
(@p18, @p19, @p20);
2022-08-07 13:14:25.1470|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:25.1625|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11),
(@p12, @p13, @p14);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p15, @p16),
(@p17, @p18),
(@p19, @p20);
2022-08-07 13:14:25.1802|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UsersCourses] ([CourseId], [UserId], [LearnedMaterialsCount], [MaterialsCount])
VALUES (@p0, @p1, @p2, @p3);
2022-08-07 13:14:25.1802|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [Skills] USING (
VALUES (@p0, 0),
(@p1, 1),
(@p2, 2),
(@p3, 3),
(@p4, 4),
(@p5, 5),
(@p6, 6),
(@p7, 7),
(@p8, 8)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [i].[Id] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-08-07 13:14:25.1925|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:25.1925|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 13:14:25.1925|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:25.1925|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 13:14:25.1925|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:25.1925|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 13:14:25.1925|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:25.1925|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:25.1925|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 13:14:25.1925|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 13:14:25.1925|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:25.1925|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:25.1925|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 13:14:25.1925|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 13:14:25.2078|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Resources] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Resources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:25.2078|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:25.2078|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 13:14:25.2078|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:25.2078|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 13:14:25.2078|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:25.2078|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = Int32), @p32='?' (DbType = Int32), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = Int32), @p38='?' (DbType = Int32), @p39='?' (DbType = Int32), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11),
(@p12, @p13, @p14),
(@p15, @p16, @p17),
(@p18, @p19, @p20),
(@p21, @p22, @p23),
(@p24, @p25, @p26);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p27, @p28),
(@p29, @p30),
(@p31, @p32),
(@p33, @p34),
(@p35, @p36),
(@p37, @p38),
(@p39, @p40),
(@p41, @p42),
(@p43, @p44);
2022-08-07 13:14:25.2253|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:14:25.2253|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p12, @p13),
(@p14, @p15),
(@p16, @p17);
2022-08-07 13:14:25.5839|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\rareb\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-07 13:14:25.8852|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7106
2022-08-07 13:14:25.8852|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:7105
2022-08-07 13:14:25.8852|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2022-08-07 13:14:25.8852|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2022-08-07 13:14:25.8852|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\
2022-08-07 13:14:28.2889|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger - -
2022-08-07 13:14:28.4249|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger - - - 301 0 - 146.5381ms
2022-08-07 13:14:28.4378|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - -
2022-08-07 13:14:28.8341|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - -
2022-08-07 13:14:28.8341|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - -
2022-08-07 13:14:28.8341|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - -
2022-08-07 13:14:28.8341|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - - - 200 - text/html;charset=utf-8 400.8333ms
2022-08-07 13:14:28.8341|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 13:14:28.8943|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 13:14:28.9407|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 101.0545ms
2022-08-07 13:14:29.0262|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-07 13:14:29.0262|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-07 13:14:29.0262|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - - - 200 143943 text/css 192.4237ms
2022-08-07 13:14:29.0262|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 187.8481ms
2022-08-07 13:14:29.1203|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-07 13:14:29.1203|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - - - 200 1095087 application/javascript 285.5867ms
2022-08-07 13:14:29.1757|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 281.3552ms
2022-08-07 13:14:29.5921|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - -
2022-08-07 13:14:30.0687|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 476.5121ms
2022-08-07 13:16:16.3174|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 13:16:17.3299|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (87ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2022-08-07 13:16:17.6259|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (95ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [EducationalPortal] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2022-08-07 13:16:17.6565|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [EducationalPortal];
2022-08-07 13:16:18.3591|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (522ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [EducationalPortal];
2022-08-07 13:16:18.4431|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (84ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [EducationalPortal] SET READ_COMMITTED_SNAPSHOT ON;
END;
2022-08-07 13:16:18.4592|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2022-08-07 13:16:18.7495|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Authors] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Authors] PRIMARY KEY ([Id])
);
2022-08-07 13:16:18.7495|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Extensions] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Extensions] PRIMARY KEY ([Id])
);
2022-08-07 13:16:18.7553|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Materials] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Link] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Materials] PRIMARY KEY ([Id])
);
2022-08-07 13:16:18.7553|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Qualities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Qualities] PRIMARY KEY ([Id])
);
2022-08-07 13:16:18.7553|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Resources] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Resources] PRIMARY KEY ([Id])
);
2022-08-07 13:16:18.7553|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Roles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_Roles] PRIMARY KEY ([Id])
);
2022-08-07 13:16:18.7553|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Skills] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Skills] PRIMARY KEY ([Id])
);
2022-08-07 13:16:18.7553|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UserToken] (
    [Id] int NOT NULL IDENTITY,
    [RefreshToken] nvarchar(max) NOT NULL,
    [RefreshTokenExpiryTime] datetime2 NOT NULL,
    CONSTRAINT [PK_UserToken] PRIMARY KEY ([Id])
);
2022-08-07 13:16:18.7719|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Books] (
    [Id] int NOT NULL,
    [PagesCount] int NOT NULL,
    [ExtensionId] int NOT NULL,
    [PublicationYear] int NOT NULL,
    CONSTRAINT [PK_Books] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Books_Extensions_ExtensionId] FOREIGN KEY ([ExtensionId]) REFERENCES [Extensions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Books_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id])
);
2022-08-07 13:16:18.7719|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Videos] (
    [Id] int NOT NULL,
    [Duration] datetime2 NOT NULL,
    [QualityId] int NOT NULL,
    CONSTRAINT [PK_Videos] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Videos_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id]),
    CONSTRAINT [FK_Videos_Qualities_QualityId] FOREIGN KEY ([QualityId]) REFERENCES [Qualities] ([Id]) ON DELETE CASCADE
);
2022-08-07 13:16:18.7719|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Articles] (
    [Id] int NOT NULL,
    [ResourceId] int NOT NULL,
    [PublicationDate] datetime2 NOT NULL,
    CONSTRAINT [PK_Articles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Articles_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id]),
    CONSTRAINT [FK_Articles_Resources_ResourceId] FOREIGN KEY ([ResourceId]) REFERENCES [Resources] ([Id]) ON DELETE CASCADE
);
2022-08-07 13:16:18.7719|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Position] nvarchar(max) NULL,
    [Avatar] nvarchar(max) NOT NULL,
    [Email] nvarchar(450) NOT NULL,
    [PasswordHash] nvarchar(max) NOT NULL,
    [Balance] int NOT NULL,
    [UserTokenId] int NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_UserToken_UserTokenId] FOREIGN KEY ([UserTokenId]) REFERENCES [UserToken] ([Id])
);
2022-08-07 13:16:18.7719|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AuthorBook] (
    [AuthorsId] int NOT NULL,
    [BooksId] int NOT NULL,
    CONSTRAINT [PK_AuthorBook] PRIMARY KEY ([AuthorsId], [BooksId]),
    CONSTRAINT [FK_AuthorBook_Authors_AuthorsId] FOREIGN KEY ([AuthorsId]) REFERENCES [Authors] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AuthorBook_Books_BooksId] FOREIGN KEY ([BooksId]) REFERENCES [Books] ([Id]) ON DELETE CASCADE
);
2022-08-07 13:16:18.7719|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Courses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Thumbnail] nvarchar(max) NOT NULL,
    [ShortDescription] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [Price] int NOT NULL,
    [AuthorId] nvarchar(450) NULL,
    CONSTRAINT [PK_Courses] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Courses_Users_AuthorId] FOREIGN KEY ([AuthorId]) REFERENCES [Users] ([Id])
);
2022-08-07 13:16:18.7907|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [MaterialsBaseUser] (
    [MaterialsId] int NOT NULL,
    [UsersId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_MaterialsBaseUser] PRIMARY KEY ([MaterialsId], [UsersId]),
    CONSTRAINT [FK_MaterialsBaseUser_Materials_MaterialsId] FOREIGN KEY ([MaterialsId]) REFERENCES [Materials] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_MaterialsBaseUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 13:16:18.7907|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [RoleUser] (
    [RolesId] int NOT NULL,
    [UsersId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_RoleUser] PRIMARY KEY ([RolesId], [UsersId]),
    CONSTRAINT [FK_RoleUser_Roles_RolesId] FOREIGN KEY ([RolesId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RoleUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 13:16:18.7907|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UsersSkills] (
    [UserId] nvarchar(450) NOT NULL,
    [SkillId] int NOT NULL,
    [Level] int NOT NULL,
    CONSTRAINT [PK_UsersSkills] PRIMARY KEY ([UserId], [SkillId]),
    CONSTRAINT [FK_UsersSkills_Skills_SkillId] FOREIGN KEY ([SkillId]) REFERENCES [Skills] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UsersSkills_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 13:16:18.8012|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CartItems] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NULL,
    [CourseId] int NOT NULL,
    CONSTRAINT [PK_CartItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_CartItems_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CartItems_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2022-08-07 13:16:18.8012|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CoursesMaterials] (
    [CourseId] int NOT NULL,
    [MaterialId] int NOT NULL,
    [Index] int NOT NULL,
    CONSTRAINT [PK_CoursesMaterials] PRIMARY KEY ([CourseId], [MaterialId]),
    CONSTRAINT [FK_CoursesMaterials_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CoursesMaterials_Materials_MaterialId] FOREIGN KEY ([MaterialId]) REFERENCES [Materials] ([Id]) ON DELETE CASCADE
);
2022-08-07 13:16:18.8012|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CoursesSkills] (
    [CourseId] int NOT NULL,
    [SkillId] int NOT NULL,
    CONSTRAINT [PK_CoursesSkills] PRIMARY KEY ([CourseId], [SkillId]),
    CONSTRAINT [FK_CoursesSkills_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CoursesSkills_Skills_SkillId] FOREIGN KEY ([SkillId]) REFERENCES [Skills] ([Id]) ON DELETE CASCADE
);
2022-08-07 13:16:18.8012|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [ShoppingHistory] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NULL,
    [CourseId] int NOT NULL,
    [Price] int NOT NULL,
    [Date] datetime2 NOT NULL,
    CONSTRAINT [PK_ShoppingHistory] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ShoppingHistory_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ShoppingHistory_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2022-08-07 13:16:18.8012|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UsersCourses] (
    [UserId] nvarchar(450) NOT NULL,
    [CourseId] int NOT NULL,
    [MaterialsCount] int NOT NULL,
    [LearnedMaterialsCount] int NOT NULL,
    CONSTRAINT [PK_UsersCourses] PRIMARY KEY ([UserId], [CourseId]),
    CONSTRAINT [FK_UsersCourses_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UsersCourses_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 13:16:18.8198|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Articles_ResourceId] ON [Articles] ([ResourceId]);
2022-08-07 13:16:18.8198|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_AuthorBook_BooksId] ON [AuthorBook] ([BooksId]);
2022-08-07 13:16:18.8198|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Books_ExtensionId] ON [Books] ([ExtensionId]);
2022-08-07 13:16:18.8198|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CartItems_CourseId] ON [CartItems] ([CourseId]);
2022-08-07 13:16:18.8198|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CartItems_UserId] ON [CartItems] ([UserId]);
2022-08-07 13:16:18.8331|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Courses_AuthorId] ON [Courses] ([AuthorId]);
2022-08-07 13:16:18.8331|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CoursesMaterials_MaterialId] ON [CoursesMaterials] ([MaterialId]);
2022-08-07 13:16:18.8331|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CoursesSkills_SkillId] ON [CoursesSkills] ([SkillId]);
2022-08-07 13:16:18.8331|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_MaterialsBaseUser_UsersId] ON [MaterialsBaseUser] ([UsersId]);
2022-08-07 13:16:18.8331|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Roles_Name] ON [Roles] ([Name]);
2022-08-07 13:16:18.8331|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_RoleUser_UsersId] ON [RoleUser] ([UsersId]);
2022-08-07 13:16:18.8331|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_ShoppingHistory_CourseId] ON [ShoppingHistory] ([CourseId]);
2022-08-07 13:16:18.8498|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_ShoppingHistory_UserId] ON [ShoppingHistory] ([UserId]);
2022-08-07 13:16:18.8498|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]);
2022-08-07 13:16:18.8498|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Users_UserTokenId] ON [Users] ([UserTokenId]);
2022-08-07 13:16:18.8498|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_UsersCourses_CourseId] ON [UsersCourses] ([CourseId]);
2022-08-07 13:16:18.8498|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_UsersSkills_SkillId] ON [UsersSkills] ([SkillId]);
2022-08-07 13:16:18.8498|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Videos_QualityId] ON [Videos] ([QualityId]);
2022-08-07 13:16:19.3174|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (91ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [Qualities] USING (
VALUES (@p0, 0),
(@p1, 1),
(@p2, 2),
(@p3, 3),
(@p4, 4),
(@p5, 5),
(@p6, 6),
(@p7, 7)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [i].[Id] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-08-07 13:16:19.5183|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:19.5290|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 13:16:19.5454|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Extensions] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Extensions]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:19.5637|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:19.6229|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:19.6317|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 13:16:19.6317|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 13:16:19.6499|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Resources] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Resources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:19.6700|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:19.6700|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 13:16:19.7062|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:19.7095|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:19.7095|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:19.7325|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:19.7325|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:19.7325|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:19.7420|INFO|EducationalPortal.Infrastructure.Services.Identity.PasswordHasher|Hashed password.
2022-08-07 13:16:19.8519|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Avatar], [Balance], [Email], [Name], [PasswordHash], [Position], [UserTokenId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2022-08-07 13:16:19.8764|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[@p8='?' (DbType = Int32), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (Size = 450), @p12='?' (DbType = Int32), @p13='?' (Size = 450), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Size = 450), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Size = 450), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RoleUser] ([RolesId], [UsersId])
VALUES (@p8, @p9),
(@p10, @p11);
INSERT INTO [UsersSkills] ([SkillId], [UserId], [Level])
VALUES (@p12, @p13, @p14),
(@p15, @p16, @p17),
(@p18, @p19, @p20);
2022-08-07 13:16:19.9401|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:19.9559|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11),
(@p12, @p13, @p14);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p15, @p16),
(@p17, @p18),
(@p19, @p20);
2022-08-07 13:16:19.9714|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UsersCourses] ([CourseId], [UserId], [LearnedMaterialsCount], [MaterialsCount])
VALUES (@p0, @p1, @p2, @p3);
2022-08-07 13:16:19.9823|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [Skills] USING (
VALUES (@p0, 0),
(@p1, 1),
(@p2, 2),
(@p3, 3),
(@p4, 4),
(@p5, 5),
(@p6, 6),
(@p7, 7),
(@p8, 8)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [i].[Id] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-08-07 13:16:19.9823|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:19.9823|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 13:16:19.9823|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:19.9823|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 13:16:19.9888|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:19.9888|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 13:16:19.9888|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:19.9888|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:19.9888|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 13:16:19.9888|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 13:16:19.9888|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:19.9888|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:19.9888|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 13:16:19.9888|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 13:16:19.9888|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Resources] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Resources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:19.9888|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:19.9888|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 13:16:20.0059|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:20.0059|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 13:16:20.0059|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:20.0059|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = Int32), @p32='?' (DbType = Int32), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = Int32), @p38='?' (DbType = Int32), @p39='?' (DbType = Int32), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11),
(@p12, @p13, @p14),
(@p15, @p16, @p17),
(@p18, @p19, @p20),
(@p21, @p22, @p23),
(@p24, @p25, @p26);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p27, @p28),
(@p29, @p30),
(@p31, @p32),
(@p33, @p34),
(@p35, @p36),
(@p37, @p38),
(@p39, @p40),
(@p41, @p42),
(@p43, @p44);
2022-08-07 13:16:20.0211|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:16:20.0211|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p12, @p13),
(@p14, @p15),
(@p16, @p17);
2022-08-07 13:16:20.3937|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\rareb\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-07 13:16:20.7308|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7106
2022-08-07 13:16:20.7308|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:7105
2022-08-07 13:16:20.7308|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2022-08-07 13:16:20.7308|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2022-08-07 13:16:20.7308|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\
2022-08-07 13:16:22.9059|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger - -
2022-08-07 13:16:23.0280|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger - - - 301 0 - 126.8522ms
2022-08-07 13:16:23.0514|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - -
2022-08-07 13:16:23.4352|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - -
2022-08-07 13:16:23.4352|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 13:16:23.4352|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - -
2022-08-07 13:16:23.4352|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - -
2022-08-07 13:16:23.4471|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - - - 200 - text/html;charset=utf-8 395.6433ms
2022-08-07 13:16:23.4815|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 13:16:23.5485|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 112.3215ms
2022-08-07 13:16:23.6096|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-07 13:16:23.6169|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - - - 200 143943 text/css 179.7834ms
2022-08-07 13:16:23.6169|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-07 13:16:23.6333|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 196.4379ms
2022-08-07 13:16:23.7420|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-07 13:16:23.7420|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - - - 200 1095087 application/javascript 308.1974ms
2022-08-07 13:16:23.8173|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 335.7372ms
2022-08-07 13:16:24.1894|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - -
2022-08-07 13:16:24.6420|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 452.5408ms
2022-08-07 13:16:47.7998|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 13:16:47.9080|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 13:16:47.9165|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 116.7406ms
2022-08-07 13:16:47.9325|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1737
2022-08-07 13:16:47.9325|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 13:16:48.5952|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Failed to validate the token.|Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-07 13:16:48.6495|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-08-07 13:16:48.6495|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 13:16:48.7080|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 13:16:49.0235|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 13:16:49.0382|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 13:16:50.2614|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE 0 = 1
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 13:16:50.5301|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 1811.8471ms
2022-08-07 13:16:50.5301|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 13:16:50.8005|ERROR|EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware|Something went wrong: Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: SecurityToken has Expired
   at EducationalPortal.Infrastructure.Services.Identity.TokensService.RefreshAsync(TokensModel tokensModel, String email, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\Services\Identity\TokensService.cs:line 39
   at EducationalPortal.API.Controllers.TokensController.RefreshAsync(TokensModel tokensModel, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\Controllers\TokensController.cs:line 20
   at lambda_method677(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\ExceptionHandling\ExceptionMiddleware.cs:line 25
2022-08-07 13:16:50.8794|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 1737 - 500 - application/json 2946.8651ms
2022-08-07 13:17:54.8092|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/register - -
2022-08-07 13:17:54.8293|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 13:17:54.8293|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/register - - - 204 - - 20.4842ms
2022-08-07 13:17:54.8339|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/account/register application/json 81
2022-08-07 13:17:54.8339|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 13:17:54.8551|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Failed to validate the token.|Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-07 13:17:54.8551|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-08-07 13:17:54.8551|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.RegisterAsync (EducationalPortal.API)'
2022-08-07 13:17:54.8699|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RegisterAsync(EducationalPortal.Application.Models.RegisterModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 13:17:54.9579|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 13:17:55.4383|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 13:17:55.4640|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Name] = N'Student'
2022-08-07 13:17:55.4791|INFO|EducationalPortal.Infrastructure.Services.Identity.PasswordHasher|Hashed password.
2022-08-07 13:17:55.4791|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 13:17:55.4791|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned new refresh token.
2022-08-07 13:17:55.5730|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserToken] ([RefreshToken], [RefreshTokenExpiryTime])
VALUES (@p0, @p1);
SELECT [Id]
FROM [UserToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 13:17:55.6063|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (Size = 450), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Avatar], [Balance], [Email], [Name], [PasswordHash], [Position], [UserTokenId])
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2022-08-07 13:17:55.6255|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned claims for user with email: petro@petro.
2022-08-07 13:17:55.6601|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 13:17:55.6601|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned new access and refresh tokens.
2022-08-07 13:17:55.6605|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Created user with email: petro@petro.
2022-08-07 13:17:55.6605|INFO|EducationalPortal.Infrastructure.Services.AccountService|Registered user with email: petro@petro.
2022-08-07 13:17:55.6605|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 13:17:55.7080|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.RegisterAsync (EducationalPortal.API) in 837.9805ms
2022-08-07 13:17:55.7080|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.RegisterAsync (EducationalPortal.API)'
2022-08-07 13:17:55.7080|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/account/register application/json 81 - 200 568 application/json;+charset=utf-8 874.6915ms
2022-08-07 13:17:55.7704|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 13:17:55.7704|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 13:17:55.7704|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 0.8645ms
2022-08-07 13:17:55.7864|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 13:17:55.7864|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 13:17:55.7864|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 13:17:55.8314|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 13:17:55.8376|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 13:17:55.9162|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 13:17:55.9162|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 13:17:55.9282|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 13:17:55.9912|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 13:17:56.0502|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 13:17:56.0637|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 13:17:56.0975|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 261.4134ms
2022-08-07 13:17:56.0975|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 13:17:56.0975|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 311.4853ms
2022-08-07 13:18:25.0238|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 13:18:25.0238|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 13:18:25.0238|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 3.1022ms
2022-08-07 13:18:25.0474|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 568
2022-08-07 13:18:25.0474|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 13:18:25.0474|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 13:18:25.0474|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 13:18:25.0515|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 13:18:25.0515|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 13:18:25.0515|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 13:18:25.1073|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 13:18:25.1073|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 13:18:25.1416|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 13:18:25.1483|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 13:18:25.1483|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 13:18:25.1483|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 13:18:25.1483|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 100.8251ms
2022-08-07 13:18:25.1483|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 13:18:25.1483|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 568 - 200 604 application/json;+charset=utf-8 102.5739ms
2022-08-07 13:18:55.0152|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 13:18:55.0152|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 13:18:55.0152|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1.4334ms
2022-08-07 13:18:55.0413|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 604
2022-08-07 13:18:55.0413|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 13:18:55.0413|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 13:18:55.0413|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 13:18:55.0548|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 13:18:55.0548|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 13:18:55.0668|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 13:18:55.0668|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 13:18:55.0668|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 13:18:55.0668|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 13:18:55.0668|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 13:18:55.0668|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 13:18:55.0668|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 13:18:55.0668|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 35.804ms
2022-08-07 13:18:55.0668|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 13:18:55.0668|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 604 - 200 637 application/json;+charset=utf-8 37.1119ms
2022-08-07 13:19:25.0082|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 13:19:25.0082|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 13:19:25.0082|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1.4165ms
2022-08-07 13:19:25.0082|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 637
2022-08-07 13:19:25.0082|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 13:19:25.0082|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 13:19:25.0082|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 13:19:25.0082|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 13:19:25.0327|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 13:19:25.0386|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 13:19:25.0386|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 13:19:25.0386|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 13:19:25.0522|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 13:19:25.0522|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 13:19:25.0522|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 13:19:25.0522|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 13:19:25.0522|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 38.927ms
2022-08-07 13:19:25.0522|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 13:19:25.0522|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 637 - 200 671 application/json;+charset=utf-8 40.4102ms
2022-08-07 13:19:55.0196|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 13:19:55.0196|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 13:19:55.0196|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 2.9290ms
2022-08-07 13:19:55.0196|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 671
2022-08-07 13:19:55.0196|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 13:19:55.0196|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 13:19:55.0196|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 13:19:55.0196|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 13:19:55.0196|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 13:19:55.0414|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 13:19:55.0414|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 13:19:55.0414|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 13:19:55.0414|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 13:19:55.0519|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 13:19:55.0519|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 13:19:55.0519|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 13:19:55.0519|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 22.105ms
2022-08-07 13:19:55.0519|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 13:19:55.0519|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 671 - 200 704 application/json;+charset=utf-8 23.3711ms
2022-08-07 13:20:25.0171|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 13:20:25.0171|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 13:20:25.0196|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 2.4705ms
2022-08-07 13:20:25.0419|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 704
2022-08-07 13:20:25.0419|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 13:20:25.0419|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 13:20:25.0419|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 13:20:25.0419|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 13:20:25.0536|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 13:20:25.0536|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 13:20:25.0667|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 13:20:25.0667|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 13:20:25.0667|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 13:20:25.0667|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 13:20:25.0667|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 13:20:25.0667|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 13:20:25.0667|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 22.524ms
2022-08-07 13:20:25.0667|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 13:20:25.0667|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 704 - 200 737 application/json;+charset=utf-8 29.4890ms
2022-08-07 13:20:55.0127|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 13:20:55.0127|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 13:20:55.0127|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 2.9662ms
2022-08-07 13:20:55.0240|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 737
2022-08-07 13:20:55.0240|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 13:20:55.0240|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 13:20:55.0240|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 13:20:55.0240|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 13:20:55.0240|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 13:20:55.0240|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 13:20:55.0240|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 13:20:55.0240|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 13:20:55.0370|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 13:20:55.0370|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 13:20:55.0370|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 13:20:55.0370|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 13:20:55.0370|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 16.9627ms
2022-08-07 13:20:55.0370|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 13:20:55.0370|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 737 - 200 771 application/json;+charset=utf-8 18.3301ms
2022-08-07 14:02:06.4301|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:02:07.4516|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (86ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2022-08-07 14:02:07.7176|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (98ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [EducationalPortal] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2022-08-07 14:02:07.7638|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (45ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [EducationalPortal];
2022-08-07 14:02:08.2317|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (294ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [EducationalPortal];
2022-08-07 14:02:08.3251|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (93ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [EducationalPortal] SET READ_COMMITTED_SNAPSHOT ON;
END;
2022-08-07 14:02:08.4550|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2022-08-07 14:02:08.7909|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Authors] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Authors] PRIMARY KEY ([Id])
);
2022-08-07 14:02:08.7909|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Extensions] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Extensions] PRIMARY KEY ([Id])
);
2022-08-07 14:02:08.7909|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Materials] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Link] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Materials] PRIMARY KEY ([Id])
);
2022-08-07 14:02:08.8049|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Qualities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Qualities] PRIMARY KEY ([Id])
);
2022-08-07 14:02:08.8049|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Resources] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Resources] PRIMARY KEY ([Id])
);
2022-08-07 14:02:08.8162|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Roles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_Roles] PRIMARY KEY ([Id])
);
2022-08-07 14:02:08.8162|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Skills] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Skills] PRIMARY KEY ([Id])
);
2022-08-07 14:02:08.8162|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UserToken] (
    [Id] int NOT NULL IDENTITY,
    [RefreshToken] nvarchar(max) NOT NULL,
    [RefreshTokenExpiryTime] datetime2 NOT NULL,
    CONSTRAINT [PK_UserToken] PRIMARY KEY ([Id])
);
2022-08-07 14:02:08.8162|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Books] (
    [Id] int NOT NULL,
    [PagesCount] int NOT NULL,
    [ExtensionId] int NOT NULL,
    [PublicationYear] int NOT NULL,
    CONSTRAINT [PK_Books] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Books_Extensions_ExtensionId] FOREIGN KEY ([ExtensionId]) REFERENCES [Extensions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Books_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id])
);
2022-08-07 14:02:08.8162|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Videos] (
    [Id] int NOT NULL,
    [Duration] datetime2 NOT NULL,
    [QualityId] int NOT NULL,
    CONSTRAINT [PK_Videos] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Videos_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id]),
    CONSTRAINT [FK_Videos_Qualities_QualityId] FOREIGN KEY ([QualityId]) REFERENCES [Qualities] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:02:08.8162|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Articles] (
    [Id] int NOT NULL,
    [ResourceId] int NOT NULL,
    [PublicationDate] datetime2 NOT NULL,
    CONSTRAINT [PK_Articles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Articles_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id]),
    CONSTRAINT [FK_Articles_Resources_ResourceId] FOREIGN KEY ([ResourceId]) REFERENCES [Resources] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:02:08.8329|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Position] nvarchar(max) NULL,
    [Avatar] nvarchar(max) NOT NULL,
    [Email] nvarchar(450) NOT NULL,
    [PasswordHash] nvarchar(max) NOT NULL,
    [Balance] int NOT NULL,
    [UserTokenId] int NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_UserToken_UserTokenId] FOREIGN KEY ([UserTokenId]) REFERENCES [UserToken] ([Id])
);
2022-08-07 14:02:08.8329|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AuthorBook] (
    [AuthorsId] int NOT NULL,
    [BooksId] int NOT NULL,
    CONSTRAINT [PK_AuthorBook] PRIMARY KEY ([AuthorsId], [BooksId]),
    CONSTRAINT [FK_AuthorBook_Authors_AuthorsId] FOREIGN KEY ([AuthorsId]) REFERENCES [Authors] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AuthorBook_Books_BooksId] FOREIGN KEY ([BooksId]) REFERENCES [Books] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:02:08.8329|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Courses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Thumbnail] nvarchar(max) NOT NULL,
    [ShortDescription] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [Price] int NOT NULL,
    [AuthorId] nvarchar(450) NULL,
    CONSTRAINT [PK_Courses] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Courses_Users_AuthorId] FOREIGN KEY ([AuthorId]) REFERENCES [Users] ([Id])
);
2022-08-07 14:02:08.8329|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [MaterialsBaseUser] (
    [MaterialsId] int NOT NULL,
    [UsersId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_MaterialsBaseUser] PRIMARY KEY ([MaterialsId], [UsersId]),
    CONSTRAINT [FK_MaterialsBaseUser_Materials_MaterialsId] FOREIGN KEY ([MaterialsId]) REFERENCES [Materials] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_MaterialsBaseUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:02:08.8329|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [RoleUser] (
    [RolesId] int NOT NULL,
    [UsersId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_RoleUser] PRIMARY KEY ([RolesId], [UsersId]),
    CONSTRAINT [FK_RoleUser_Roles_RolesId] FOREIGN KEY ([RolesId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RoleUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:02:08.8329|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UsersSkills] (
    [UserId] nvarchar(450) NOT NULL,
    [SkillId] int NOT NULL,
    [Level] int NOT NULL,
    CONSTRAINT [PK_UsersSkills] PRIMARY KEY ([UserId], [SkillId]),
    CONSTRAINT [FK_UsersSkills_Skills_SkillId] FOREIGN KEY ([SkillId]) REFERENCES [Skills] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UsersSkills_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:02:08.8497|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CartItems] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NULL,
    [CourseId] int NOT NULL,
    CONSTRAINT [PK_CartItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_CartItems_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CartItems_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2022-08-07 14:02:08.8497|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CoursesMaterials] (
    [CourseId] int NOT NULL,
    [MaterialId] int NOT NULL,
    [Index] int NOT NULL,
    CONSTRAINT [PK_CoursesMaterials] PRIMARY KEY ([CourseId], [MaterialId]),
    CONSTRAINT [FK_CoursesMaterials_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CoursesMaterials_Materials_MaterialId] FOREIGN KEY ([MaterialId]) REFERENCES [Materials] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:02:08.8497|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CoursesSkills] (
    [CourseId] int NOT NULL,
    [SkillId] int NOT NULL,
    CONSTRAINT [PK_CoursesSkills] PRIMARY KEY ([CourseId], [SkillId]),
    CONSTRAINT [FK_CoursesSkills_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CoursesSkills_Skills_SkillId] FOREIGN KEY ([SkillId]) REFERENCES [Skills] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:02:08.8497|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [ShoppingHistory] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NULL,
    [CourseId] int NOT NULL,
    [Price] int NOT NULL,
    [Date] datetime2 NOT NULL,
    CONSTRAINT [PK_ShoppingHistory] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ShoppingHistory_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ShoppingHistory_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2022-08-07 14:02:08.8497|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UsersCourses] (
    [UserId] nvarchar(450) NOT NULL,
    [CourseId] int NOT NULL,
    [MaterialsCount] int NOT NULL,
    [LearnedMaterialsCount] int NOT NULL,
    CONSTRAINT [PK_UsersCourses] PRIMARY KEY ([UserId], [CourseId]),
    CONSTRAINT [FK_UsersCourses_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UsersCourses_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:02:08.8641|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Articles_ResourceId] ON [Articles] ([ResourceId]);
2022-08-07 14:02:08.8641|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_AuthorBook_BooksId] ON [AuthorBook] ([BooksId]);
2022-08-07 14:02:08.8641|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Books_ExtensionId] ON [Books] ([ExtensionId]);
2022-08-07 14:02:08.8641|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CartItems_CourseId] ON [CartItems] ([CourseId]);
2022-08-07 14:02:08.8641|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CartItems_UserId] ON [CartItems] ([UserId]);
2022-08-07 14:02:08.8641|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Courses_AuthorId] ON [Courses] ([AuthorId]);
2022-08-07 14:02:08.8641|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CoursesMaterials_MaterialId] ON [CoursesMaterials] ([MaterialId]);
2022-08-07 14:02:08.8641|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CoursesSkills_SkillId] ON [CoursesSkills] ([SkillId]);
2022-08-07 14:02:08.8641|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_MaterialsBaseUser_UsersId] ON [MaterialsBaseUser] ([UsersId]);
2022-08-07 14:02:08.8641|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Roles_Name] ON [Roles] ([Name]);
2022-08-07 14:02:08.8641|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_RoleUser_UsersId] ON [RoleUser] ([UsersId]);
2022-08-07 14:02:08.8641|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_ShoppingHistory_CourseId] ON [ShoppingHistory] ([CourseId]);
2022-08-07 14:02:08.8641|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_ShoppingHistory_UserId] ON [ShoppingHistory] ([UserId]);
2022-08-07 14:02:08.8798|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]);
2022-08-07 14:02:08.8798|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Users_UserTokenId] ON [Users] ([UserTokenId]);
2022-08-07 14:02:08.8798|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_UsersCourses_CourseId] ON [UsersCourses] ([CourseId]);
2022-08-07 14:02:08.8798|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_UsersSkills_SkillId] ON [UsersSkills] ([SkillId]);
2022-08-07 14:02:08.8798|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Videos_QualityId] ON [Videos] ([QualityId]);
2022-08-07 14:02:09.3856|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (76ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [Qualities] USING (
VALUES (@p0, 0),
(@p1, 1),
(@p2, 2),
(@p3, 3),
(@p4, 4),
(@p5, 5),
(@p6, 6),
(@p7, 7)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [i].[Id] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-08-07 14:02:09.5856|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:09.5856|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 14:02:09.6086|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Extensions] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Extensions]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:09.6354|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:09.7245|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:09.7245|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 14:02:09.7245|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 14:02:09.7488|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Resources] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Resources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:09.7593|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:09.7593|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 14:02:09.7836|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:09.7875|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:09.7875|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:09.8071|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:09.8071|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:09.8071|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:09.8208|INFO|EducationalPortal.Infrastructure.Services.Identity.PasswordHasher|Hashed password.
2022-08-07 14:02:09.9310|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Avatar], [Balance], [Email], [Name], [PasswordHash], [Position], [UserTokenId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2022-08-07 14:02:09.9461|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[@p8='?' (DbType = Int32), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (Size = 450), @p12='?' (DbType = Int32), @p13='?' (Size = 450), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Size = 450), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Size = 450), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RoleUser] ([RolesId], [UsersId])
VALUES (@p8, @p9),
(@p10, @p11);
INSERT INTO [UsersSkills] ([SkillId], [UserId], [Level])
VALUES (@p12, @p13, @p14),
(@p15, @p16, @p17),
(@p18, @p19, @p20);
2022-08-07 14:02:10.0021|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:10.0181|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11),
(@p12, @p13, @p14);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p15, @p16),
(@p17, @p18),
(@p19, @p20);
2022-08-07 14:02:10.0338|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UsersCourses] ([CourseId], [UserId], [LearnedMaterialsCount], [MaterialsCount])
VALUES (@p0, @p1, @p2, @p3);
2022-08-07 14:02:10.0472|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [Skills] USING (
VALUES (@p0, 0),
(@p1, 1),
(@p2, 2),
(@p3, 3),
(@p4, 4),
(@p5, 5),
(@p6, 6),
(@p7, 7),
(@p8, 8)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [i].[Id] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-08-07 14:02:10.0521|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:10.0521|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 14:02:10.0521|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:10.0521|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 14:02:10.0521|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:10.0521|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 14:02:10.0521|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:10.0691|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:10.0691|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 14:02:10.0691|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 14:02:10.0691|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:10.0691|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:10.0691|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 14:02:10.0691|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 14:02:10.0691|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Resources] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Resources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:10.0841|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:10.0841|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 14:02:10.0841|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:10.0841|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 14:02:10.0841|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:10.1002|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = Int32), @p32='?' (DbType = Int32), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = Int32), @p38='?' (DbType = Int32), @p39='?' (DbType = Int32), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11),
(@p12, @p13, @p14),
(@p15, @p16, @p17),
(@p18, @p19, @p20),
(@p21, @p22, @p23),
(@p24, @p25, @p26);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p27, @p28),
(@p29, @p30),
(@p31, @p32),
(@p33, @p34),
(@p35, @p36),
(@p37, @p38),
(@p39, @p40),
(@p41, @p42),
(@p43, @p44);
2022-08-07 14:02:10.1002|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:10.1002|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p12, @p13),
(@p14, @p15),
(@p16, @p17);
2022-08-07 14:02:10.4855|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\rareb\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-07 14:02:10.7884|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7106
2022-08-07 14:02:10.7884|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:7105
2022-08-07 14:02:10.7884|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2022-08-07 14:02:10.7884|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2022-08-07 14:02:10.7884|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\
2022-08-07 14:02:34.8702|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:02:35.9125|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (101ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2022-08-07 14:02:36.1685|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (96ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [EducationalPortal] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2022-08-07 14:02:36.1936|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [EducationalPortal];
2022-08-07 14:02:36.7310|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (357ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [EducationalPortal];
2022-08-07 14:02:36.7963|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (65ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [EducationalPortal] SET READ_COMMITTED_SNAPSHOT ON;
END;
2022-08-07 14:02:36.8132|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2022-08-07 14:02:37.0688|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Authors] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Authors] PRIMARY KEY ([Id])
);
2022-08-07 14:02:37.0688|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Extensions] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Extensions] PRIMARY KEY ([Id])
);
2022-08-07 14:02:37.0688|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Materials] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Link] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Materials] PRIMARY KEY ([Id])
);
2022-08-07 14:02:37.0839|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Qualities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Qualities] PRIMARY KEY ([Id])
);
2022-08-07 14:02:37.0839|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Resources] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Resources] PRIMARY KEY ([Id])
);
2022-08-07 14:02:37.0839|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Roles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_Roles] PRIMARY KEY ([Id])
);
2022-08-07 14:02:37.1115|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Skills] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Skills] PRIMARY KEY ([Id])
);
2022-08-07 14:02:37.1273|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UserToken] (
    [Id] int NOT NULL IDENTITY,
    [RefreshToken] nvarchar(max) NOT NULL,
    [RefreshTokenExpiryTime] datetime2 NOT NULL,
    CONSTRAINT [PK_UserToken] PRIMARY KEY ([Id])
);
2022-08-07 14:02:37.1364|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Books] (
    [Id] int NOT NULL,
    [PagesCount] int NOT NULL,
    [ExtensionId] int NOT NULL,
    [PublicationYear] int NOT NULL,
    CONSTRAINT [PK_Books] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Books_Extensions_ExtensionId] FOREIGN KEY ([ExtensionId]) REFERENCES [Extensions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Books_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id])
);
2022-08-07 14:02:37.1487|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Videos] (
    [Id] int NOT NULL,
    [Duration] datetime2 NOT NULL,
    [QualityId] int NOT NULL,
    CONSTRAINT [PK_Videos] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Videos_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id]),
    CONSTRAINT [FK_Videos_Qualities_QualityId] FOREIGN KEY ([QualityId]) REFERENCES [Qualities] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:02:37.1487|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Articles] (
    [Id] int NOT NULL,
    [ResourceId] int NOT NULL,
    [PublicationDate] datetime2 NOT NULL,
    CONSTRAINT [PK_Articles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Articles_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id]),
    CONSTRAINT [FK_Articles_Resources_ResourceId] FOREIGN KEY ([ResourceId]) REFERENCES [Resources] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:02:37.1487|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Position] nvarchar(max) NULL,
    [Avatar] nvarchar(max) NOT NULL,
    [Email] nvarchar(450) NOT NULL,
    [PasswordHash] nvarchar(max) NOT NULL,
    [Balance] int NOT NULL,
    [UserTokenId] int NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_UserToken_UserTokenId] FOREIGN KEY ([UserTokenId]) REFERENCES [UserToken] ([Id])
);
2022-08-07 14:02:37.1487|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AuthorBook] (
    [AuthorsId] int NOT NULL,
    [BooksId] int NOT NULL,
    CONSTRAINT [PK_AuthorBook] PRIMARY KEY ([AuthorsId], [BooksId]),
    CONSTRAINT [FK_AuthorBook_Authors_AuthorsId] FOREIGN KEY ([AuthorsId]) REFERENCES [Authors] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AuthorBook_Books_BooksId] FOREIGN KEY ([BooksId]) REFERENCES [Books] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:02:37.1612|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Courses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Thumbnail] nvarchar(max) NOT NULL,
    [ShortDescription] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [Price] int NOT NULL,
    [AuthorId] nvarchar(450) NULL,
    CONSTRAINT [PK_Courses] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Courses_Users_AuthorId] FOREIGN KEY ([AuthorId]) REFERENCES [Users] ([Id])
);
2022-08-07 14:02:37.1612|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [MaterialsBaseUser] (
    [MaterialsId] int NOT NULL,
    [UsersId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_MaterialsBaseUser] PRIMARY KEY ([MaterialsId], [UsersId]),
    CONSTRAINT [FK_MaterialsBaseUser_Materials_MaterialsId] FOREIGN KEY ([MaterialsId]) REFERENCES [Materials] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_MaterialsBaseUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:02:37.1612|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [RoleUser] (
    [RolesId] int NOT NULL,
    [UsersId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_RoleUser] PRIMARY KEY ([RolesId], [UsersId]),
    CONSTRAINT [FK_RoleUser_Roles_RolesId] FOREIGN KEY ([RolesId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RoleUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:02:37.1612|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UsersSkills] (
    [UserId] nvarchar(450) NOT NULL,
    [SkillId] int NOT NULL,
    [Level] int NOT NULL,
    CONSTRAINT [PK_UsersSkills] PRIMARY KEY ([UserId], [SkillId]),
    CONSTRAINT [FK_UsersSkills_Skills_SkillId] FOREIGN KEY ([SkillId]) REFERENCES [Skills] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UsersSkills_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:02:37.1768|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CartItems] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NULL,
    [CourseId] int NOT NULL,
    CONSTRAINT [PK_CartItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_CartItems_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CartItems_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2022-08-07 14:02:37.1768|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CoursesMaterials] (
    [CourseId] int NOT NULL,
    [MaterialId] int NOT NULL,
    [Index] int NOT NULL,
    CONSTRAINT [PK_CoursesMaterials] PRIMARY KEY ([CourseId], [MaterialId]),
    CONSTRAINT [FK_CoursesMaterials_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CoursesMaterials_Materials_MaterialId] FOREIGN KEY ([MaterialId]) REFERENCES [Materials] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:02:37.1768|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CoursesSkills] (
    [CourseId] int NOT NULL,
    [SkillId] int NOT NULL,
    CONSTRAINT [PK_CoursesSkills] PRIMARY KEY ([CourseId], [SkillId]),
    CONSTRAINT [FK_CoursesSkills_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CoursesSkills_Skills_SkillId] FOREIGN KEY ([SkillId]) REFERENCES [Skills] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:02:37.1768|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [ShoppingHistory] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NULL,
    [CourseId] int NOT NULL,
    [Price] int NOT NULL,
    [Date] datetime2 NOT NULL,
    CONSTRAINT [PK_ShoppingHistory] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ShoppingHistory_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ShoppingHistory_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2022-08-07 14:02:37.1932|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UsersCourses] (
    [UserId] nvarchar(450) NOT NULL,
    [CourseId] int NOT NULL,
    [MaterialsCount] int NOT NULL,
    [LearnedMaterialsCount] int NOT NULL,
    CONSTRAINT [PK_UsersCourses] PRIMARY KEY ([UserId], [CourseId]),
    CONSTRAINT [FK_UsersCourses_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UsersCourses_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:02:37.1932|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Articles_ResourceId] ON [Articles] ([ResourceId]);
2022-08-07 14:02:37.1932|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_AuthorBook_BooksId] ON [AuthorBook] ([BooksId]);
2022-08-07 14:02:37.1932|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Books_ExtensionId] ON [Books] ([ExtensionId]);
2022-08-07 14:02:37.1932|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CartItems_CourseId] ON [CartItems] ([CourseId]);
2022-08-07 14:02:37.1932|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CartItems_UserId] ON [CartItems] ([UserId]);
2022-08-07 14:02:37.1932|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Courses_AuthorId] ON [Courses] ([AuthorId]);
2022-08-07 14:02:37.1932|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CoursesMaterials_MaterialId] ON [CoursesMaterials] ([MaterialId]);
2022-08-07 14:02:37.1932|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CoursesSkills_SkillId] ON [CoursesSkills] ([SkillId]);
2022-08-07 14:02:37.2074|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_MaterialsBaseUser_UsersId] ON [MaterialsBaseUser] ([UsersId]);
2022-08-07 14:02:37.2074|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Roles_Name] ON [Roles] ([Name]);
2022-08-07 14:02:37.2074|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_RoleUser_UsersId] ON [RoleUser] ([UsersId]);
2022-08-07 14:02:37.2074|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_ShoppingHistory_CourseId] ON [ShoppingHistory] ([CourseId]);
2022-08-07 14:02:37.2074|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_ShoppingHistory_UserId] ON [ShoppingHistory] ([UserId]);
2022-08-07 14:02:37.2074|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]);
2022-08-07 14:02:37.2074|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Users_UserTokenId] ON [Users] ([UserTokenId]);
2022-08-07 14:02:37.2074|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_UsersCourses_CourseId] ON [UsersCourses] ([CourseId]);
2022-08-07 14:02:37.2074|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_UsersSkills_SkillId] ON [UsersSkills] ([SkillId]);
2022-08-07 14:02:37.2074|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Videos_QualityId] ON [Videos] ([QualityId]);
2022-08-07 14:02:37.7515|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (75ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [Qualities] USING (
VALUES (@p0, 0),
(@p1, 1),
(@p2, 2),
(@p3, 3),
(@p4, 4),
(@p5, 5),
(@p6, 6),
(@p7, 7)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [i].[Id] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-08-07 14:02:37.9319|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:37.9426|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 14:02:37.9670|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Extensions] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Extensions]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:37.9921|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:38.0592|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:38.0675|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 14:02:38.0675|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 14:02:38.0837|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Resources] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Resources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:38.0837|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:38.0837|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 14:02:38.1188|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:38.1188|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:38.1188|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:38.1416|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:38.1416|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:38.1416|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:38.1563|INFO|EducationalPortal.Infrastructure.Services.Identity.PasswordHasher|Hashed password.
2022-08-07 14:02:38.2600|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Avatar], [Balance], [Email], [Name], [PasswordHash], [Position], [UserTokenId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2022-08-07 14:02:38.2728|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[@p8='?' (DbType = Int32), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (Size = 450), @p12='?' (DbType = Int32), @p13='?' (Size = 450), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Size = 450), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Size = 450), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RoleUser] ([RolesId], [UsersId])
VALUES (@p8, @p9),
(@p10, @p11);
INSERT INTO [UsersSkills] ([SkillId], [UserId], [Level])
VALUES (@p12, @p13, @p14),
(@p15, @p16, @p17),
(@p18, @p19, @p20);
2022-08-07 14:02:38.3280|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:38.3439|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11),
(@p12, @p13, @p14);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p15, @p16),
(@p17, @p18),
(@p19, @p20);
2022-08-07 14:02:38.3735|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UsersCourses] ([CourseId], [UserId], [LearnedMaterialsCount], [MaterialsCount])
VALUES (@p0, @p1, @p2, @p3);
2022-08-07 14:02:38.3938|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [Skills] USING (
VALUES (@p0, 0),
(@p1, 1),
(@p2, 2),
(@p3, 3),
(@p4, 4),
(@p5, 5),
(@p6, 6),
(@p7, 7),
(@p8, 8)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [i].[Id] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-08-07 14:02:38.3985|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:38.3985|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 14:02:38.3985|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:38.3985|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 14:02:38.3985|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:38.3985|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 14:02:38.3985|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:38.3985|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:38.3985|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 14:02:38.3985|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 14:02:38.4105|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:38.4105|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:38.4105|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 14:02:38.4105|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 14:02:38.4105|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Resources] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Resources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:38.4105|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:38.4105|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 14:02:38.4105|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:38.4105|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 14:02:38.4105|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:38.4320|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = Int32), @p32='?' (DbType = Int32), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = Int32), @p38='?' (DbType = Int32), @p39='?' (DbType = Int32), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11),
(@p12, @p13, @p14),
(@p15, @p16, @p17),
(@p18, @p19, @p20),
(@p21, @p22, @p23),
(@p24, @p25, @p26);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p27, @p28),
(@p29, @p30),
(@p31, @p32),
(@p33, @p34),
(@p35, @p36),
(@p37, @p38),
(@p39, @p40),
(@p41, @p42),
(@p43, @p44);
2022-08-07 14:02:38.4320|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:02:38.4320|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p12, @p13),
(@p14, @p15),
(@p16, @p17);
2022-08-07 14:02:38.7822|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\rareb\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-07 14:02:39.0917|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7106
2022-08-07 14:02:39.0917|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:7105
2022-08-07 14:02:39.0917|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2022-08-07 14:02:39.0917|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2022-08-07 14:02:39.0917|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\
2022-08-07 14:03:15.6394|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:03:16.6687|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (87ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2022-08-07 14:03:16.9307|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (75ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [EducationalPortal] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2022-08-07 14:03:16.9646|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [EducationalPortal];
2022-08-07 14:03:17.4082|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (292ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [EducationalPortal];
2022-08-07 14:03:17.4828|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (74ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [EducationalPortal] SET READ_COMMITTED_SNAPSHOT ON;
END;
2022-08-07 14:03:17.4980|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2022-08-07 14:03:17.7613|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Authors] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Authors] PRIMARY KEY ([Id])
);
2022-08-07 14:03:17.7613|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Extensions] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Extensions] PRIMARY KEY ([Id])
);
2022-08-07 14:03:17.7613|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Materials] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Link] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Materials] PRIMARY KEY ([Id])
);
2022-08-07 14:03:17.7613|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Qualities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Qualities] PRIMARY KEY ([Id])
);
2022-08-07 14:03:17.7704|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Resources] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Resources] PRIMARY KEY ([Id])
);
2022-08-07 14:03:17.7704|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Roles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_Roles] PRIMARY KEY ([Id])
);
2022-08-07 14:03:17.7704|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Skills] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Skills] PRIMARY KEY ([Id])
);
2022-08-07 14:03:17.7704|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UserToken] (
    [Id] int NOT NULL IDENTITY,
    [RefreshToken] nvarchar(max) NOT NULL,
    [RefreshTokenExpiryTime] datetime2 NOT NULL,
    CONSTRAINT [PK_UserToken] PRIMARY KEY ([Id])
);
2022-08-07 14:03:17.7908|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Books] (
    [Id] int NOT NULL,
    [PagesCount] int NOT NULL,
    [ExtensionId] int NOT NULL,
    [PublicationYear] int NOT NULL,
    CONSTRAINT [PK_Books] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Books_Extensions_ExtensionId] FOREIGN KEY ([ExtensionId]) REFERENCES [Extensions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Books_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id])
);
2022-08-07 14:03:17.8036|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Videos] (
    [Id] int NOT NULL,
    [Duration] datetime2 NOT NULL,
    [QualityId] int NOT NULL,
    CONSTRAINT [PK_Videos] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Videos_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id]),
    CONSTRAINT [FK_Videos_Qualities_QualityId] FOREIGN KEY ([QualityId]) REFERENCES [Qualities] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:03:17.8036|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Articles] (
    [Id] int NOT NULL,
    [ResourceId] int NOT NULL,
    [PublicationDate] datetime2 NOT NULL,
    CONSTRAINT [PK_Articles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Articles_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id]),
    CONSTRAINT [FK_Articles_Resources_ResourceId] FOREIGN KEY ([ResourceId]) REFERENCES [Resources] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:03:17.8036|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Position] nvarchar(max) NULL,
    [Avatar] nvarchar(max) NOT NULL,
    [Email] nvarchar(450) NOT NULL,
    [PasswordHash] nvarchar(max) NOT NULL,
    [Balance] int NOT NULL,
    [UserTokenId] int NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_UserToken_UserTokenId] FOREIGN KEY ([UserTokenId]) REFERENCES [UserToken] ([Id])
);
2022-08-07 14:03:17.8225|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AuthorBook] (
    [AuthorsId] int NOT NULL,
    [BooksId] int NOT NULL,
    CONSTRAINT [PK_AuthorBook] PRIMARY KEY ([AuthorsId], [BooksId]),
    CONSTRAINT [FK_AuthorBook_Authors_AuthorsId] FOREIGN KEY ([AuthorsId]) REFERENCES [Authors] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AuthorBook_Books_BooksId] FOREIGN KEY ([BooksId]) REFERENCES [Books] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:03:17.8225|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Courses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Thumbnail] nvarchar(max) NOT NULL,
    [ShortDescription] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [Price] int NOT NULL,
    [AuthorId] nvarchar(450) NULL,
    CONSTRAINT [PK_Courses] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Courses_Users_AuthorId] FOREIGN KEY ([AuthorId]) REFERENCES [Users] ([Id])
);
2022-08-07 14:03:17.8225|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [MaterialsBaseUser] (
    [MaterialsId] int NOT NULL,
    [UsersId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_MaterialsBaseUser] PRIMARY KEY ([MaterialsId], [UsersId]),
    CONSTRAINT [FK_MaterialsBaseUser_Materials_MaterialsId] FOREIGN KEY ([MaterialsId]) REFERENCES [Materials] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_MaterialsBaseUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:03:17.8337|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [RoleUser] (
    [RolesId] int NOT NULL,
    [UsersId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_RoleUser] PRIMARY KEY ([RolesId], [UsersId]),
    CONSTRAINT [FK_RoleUser_Roles_RolesId] FOREIGN KEY ([RolesId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RoleUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:03:17.8337|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UsersSkills] (
    [UserId] nvarchar(450) NOT NULL,
    [SkillId] int NOT NULL,
    [Level] int NOT NULL,
    CONSTRAINT [PK_UsersSkills] PRIMARY KEY ([UserId], [SkillId]),
    CONSTRAINT [FK_UsersSkills_Skills_SkillId] FOREIGN KEY ([SkillId]) REFERENCES [Skills] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UsersSkills_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:03:17.8337|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CartItems] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NULL,
    [CourseId] int NOT NULL,
    CONSTRAINT [PK_CartItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_CartItems_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CartItems_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2022-08-07 14:03:17.8337|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CoursesMaterials] (
    [CourseId] int NOT NULL,
    [MaterialId] int NOT NULL,
    [Index] int NOT NULL,
    CONSTRAINT [PK_CoursesMaterials] PRIMARY KEY ([CourseId], [MaterialId]),
    CONSTRAINT [FK_CoursesMaterials_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CoursesMaterials_Materials_MaterialId] FOREIGN KEY ([MaterialId]) REFERENCES [Materials] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:03:17.8487|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CoursesSkills] (
    [CourseId] int NOT NULL,
    [SkillId] int NOT NULL,
    CONSTRAINT [PK_CoursesSkills] PRIMARY KEY ([CourseId], [SkillId]),
    CONSTRAINT [FK_CoursesSkills_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CoursesSkills_Skills_SkillId] FOREIGN KEY ([SkillId]) REFERENCES [Skills] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:03:17.8487|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [ShoppingHistory] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NULL,
    [CourseId] int NOT NULL,
    [Price] int NOT NULL,
    [Date] datetime2 NOT NULL,
    CONSTRAINT [PK_ShoppingHistory] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ShoppingHistory_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ShoppingHistory_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2022-08-07 14:03:17.8487|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UsersCourses] (
    [UserId] nvarchar(450) NOT NULL,
    [CourseId] int NOT NULL,
    [MaterialsCount] int NOT NULL,
    [LearnedMaterialsCount] int NOT NULL,
    CONSTRAINT [PK_UsersCourses] PRIMARY KEY ([UserId], [CourseId]),
    CONSTRAINT [FK_UsersCourses_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UsersCourses_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 14:03:17.8654|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Articles_ResourceId] ON [Articles] ([ResourceId]);
2022-08-07 14:03:17.8654|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_AuthorBook_BooksId] ON [AuthorBook] ([BooksId]);
2022-08-07 14:03:17.8654|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Books_ExtensionId] ON [Books] ([ExtensionId]);
2022-08-07 14:03:17.8654|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CartItems_CourseId] ON [CartItems] ([CourseId]);
2022-08-07 14:03:17.8654|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CartItems_UserId] ON [CartItems] ([UserId]);
2022-08-07 14:03:17.8654|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Courses_AuthorId] ON [Courses] ([AuthorId]);
2022-08-07 14:03:17.8654|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CoursesMaterials_MaterialId] ON [CoursesMaterials] ([MaterialId]);
2022-08-07 14:03:17.8803|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CoursesSkills_SkillId] ON [CoursesSkills] ([SkillId]);
2022-08-07 14:03:17.8803|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_MaterialsBaseUser_UsersId] ON [MaterialsBaseUser] ([UsersId]);
2022-08-07 14:03:17.8803|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Roles_Name] ON [Roles] ([Name]);
2022-08-07 14:03:17.8803|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_RoleUser_UsersId] ON [RoleUser] ([UsersId]);
2022-08-07 14:03:17.8803|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_ShoppingHistory_CourseId] ON [ShoppingHistory] ([CourseId]);
2022-08-07 14:03:17.8955|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_ShoppingHistory_UserId] ON [ShoppingHistory] ([UserId]);
2022-08-07 14:03:17.8955|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]);
2022-08-07 14:03:17.8955|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Users_UserTokenId] ON [Users] ([UserTokenId]);
2022-08-07 14:03:17.8955|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_UsersCourses_CourseId] ON [UsersCourses] ([CourseId]);
2022-08-07 14:03:17.8955|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_UsersSkills_SkillId] ON [UsersSkills] ([SkillId]);
2022-08-07 14:03:17.8955|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Videos_QualityId] ON [Videos] ([QualityId]);
2022-08-07 14:03:18.4203|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (73ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [Qualities] USING (
VALUES (@p0, 0),
(@p1, 1),
(@p2, 2),
(@p3, 3),
(@p4, 4),
(@p5, 5),
(@p6, 6),
(@p7, 7)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [i].[Id] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-08-07 14:03:18.6123|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:18.6286|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 14:03:18.6537|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Extensions] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Extensions]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:18.6826|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:18.7448|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:18.7448|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 14:03:18.7448|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 14:03:18.7704|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Resources] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Resources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:18.7704|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:18.7856|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 14:03:18.8085|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:18.8085|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:18.8085|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:18.8407|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:18.8407|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:18.8407|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:18.8595|INFO|EducationalPortal.Infrastructure.Services.Identity.PasswordHasher|Hashed password.
2022-08-07 14:03:18.9460|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Avatar], [Balance], [Email], [Name], [PasswordHash], [Position], [UserTokenId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2022-08-07 14:03:18.9580|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[@p8='?' (DbType = Int32), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (Size = 450), @p12='?' (DbType = Int32), @p13='?' (Size = 450), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Size = 450), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Size = 450), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RoleUser] ([RolesId], [UsersId])
VALUES (@p8, @p9),
(@p10, @p11);
INSERT INTO [UsersSkills] ([SkillId], [UserId], [Level])
VALUES (@p12, @p13, @p14),
(@p15, @p16, @p17),
(@p18, @p19, @p20);
2022-08-07 14:03:19.0153|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:19.0310|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11),
(@p12, @p13, @p14);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p15, @p16),
(@p17, @p18),
(@p19, @p20);
2022-08-07 14:03:19.0591|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UsersCourses] ([CourseId], [UserId], [LearnedMaterialsCount], [MaterialsCount])
VALUES (@p0, @p1, @p2, @p3);
2022-08-07 14:03:19.0772|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [Skills] USING (
VALUES (@p0, 0),
(@p1, 1),
(@p2, 2),
(@p3, 3),
(@p4, 4),
(@p5, 5),
(@p6, 6),
(@p7, 7),
(@p8, 8)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [i].[Id] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-08-07 14:03:19.0772|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:19.0772|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 14:03:19.0834|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:19.0834|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 14:03:19.0834|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:19.0834|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 14:03:19.0834|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:19.0834|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:19.0834|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 14:03:19.0834|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 14:03:19.0834|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:19.0834|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:19.0834|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 14:03:19.0834|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 14:03:19.0982|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Resources] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Resources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:19.0982|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:19.0982|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 14:03:19.0982|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:19.0982|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 14:03:19.0982|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:19.1145|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = Int32), @p32='?' (DbType = Int32), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = Int32), @p38='?' (DbType = Int32), @p39='?' (DbType = Int32), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11),
(@p12, @p13, @p14),
(@p15, @p16, @p17),
(@p18, @p19, @p20),
(@p21, @p22, @p23),
(@p24, @p25, @p26);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p27, @p28),
(@p29, @p30),
(@p31, @p32),
(@p33, @p34),
(@p35, @p36),
(@p37, @p38),
(@p39, @p40),
(@p41, @p42),
(@p43, @p44);
2022-08-07 14:03:19.1145|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:19.1145|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p12, @p13),
(@p14, @p15),
(@p16, @p17);
2022-08-07 14:03:19.4998|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\rareb\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-07 14:03:19.8362|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7106
2022-08-07 14:03:19.8362|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:7105
2022-08-07 14:03:19.8362|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2022-08-07 14:03:19.8362|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2022-08-07 14:03:19.8362|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\
2022-08-07 14:03:21.8410|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger - -
2022-08-07 14:03:22.0198|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger - - - 301 0 - 184.4409ms
2022-08-07 14:03:22.0377|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - -
2022-08-07 14:03:22.4796|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - -
2022-08-07 14:03:22.4796|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - -
2022-08-07 14:03:22.4796|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - -
2022-08-07 14:03:22.4796|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 14:03:22.5275|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 14:03:22.6464|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 165.9901ms
2022-08-07 14:03:22.6464|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - - - 200 - text/html;charset=utf-8 613.9169ms
2022-08-07 14:03:22.6799|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-07 14:03:22.6945|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - - - 200 143943 text/css 215.0066ms
2022-08-07 14:03:22.6945|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-07 14:03:22.6945|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 216.0693ms
2022-08-07 14:03:22.8392|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 311.6455ms
2022-08-07 14:03:22.8677|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-07 14:03:22.8677|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - - - 200 1095087 application/javascript 393.4041ms
2022-08-07 14:03:23.2814|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - -
2022-08-07 14:03:23.7429|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 461.4480ms
2022-08-07 14:03:41.6169|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/register - -
2022-08-07 14:03:41.6951|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:03:41.6951|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/register - - - 204 - - 81.4133ms
2022-08-07 14:03:41.6951|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/account/register application/json 81
2022-08-07 14:03:41.7345|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:03:42.1847|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Failed to validate the token.|Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-07 14:03:42.2375|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-08-07 14:03:42.2467|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.RegisterAsync (EducationalPortal.API)'
2022-08-07 14:03:42.2825|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RegisterAsync(EducationalPortal.Application.Models.RegisterModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 14:03:42.2972|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:03:44.0840|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (43ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 14:03:44.1549|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Name] = N'Student'
2022-08-07 14:03:44.1623|INFO|EducationalPortal.Infrastructure.Services.Identity.PasswordHasher|Hashed password.
2022-08-07 14:03:44.1623|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 14:03:44.1623|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned new refresh token.
2022-08-07 14:03:44.2343|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserToken] ([RefreshToken], [RefreshTokenExpiryTime])
VALUES (@p0, @p1);
SELECT [Id]
FROM [UserToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:44.2529|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (Size = 450), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Avatar], [Balance], [Email], [Name], [PasswordHash], [Position], [UserTokenId])
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2022-08-07 14:03:44.2613|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned claims for user with email: petro@petro.
2022-08-07 14:03:44.2979|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 14:03:44.2979|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned new access and refresh tokens.
2022-08-07 14:03:44.2979|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Created user with email: petro@petro.
2022-08-07 14:03:44.2979|INFO|EducationalPortal.Infrastructure.Services.AccountService|Registered user with email: petro@petro.
2022-08-07 14:03:44.3134|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 14:03:44.4150|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.RegisterAsync (EducationalPortal.API) in 2124.8194ms
2022-08-07 14:03:44.4150|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.RegisterAsync (EducationalPortal.API)'
2022-08-07 14:03:44.4938|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 14:03:44.4938|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:03:44.4938|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 8.7590ms
2022-08-07 14:03:44.5121|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 14:03:44.5121|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:03:44.5121|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/account/register application/json 81 - 200 568 application/json;+charset=utf-8 2813.6806ms
2022-08-07 14:03:44.5996|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 14:03:44.5996|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 14:03:44.6715|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:03:44.7119|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 14:03:44.7119|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 14:03:44.7119|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 14:03:44.7958|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 14:03:44.8337|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 14:03:44.8553|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 14:03:44.8778|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 269.7281ms
2022-08-07 14:03:44.8778|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 14:03:44.8778|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 366.2152ms
2022-08-07 14:03:58.5073|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/add-to-cart/2 - -
2022-08-07 14:03:58.5073|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:03:58.5073|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/add-to-cart/2 - - - 204 - - 4.5707ms
2022-08-07 14:03:58.5275|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 PUT https://localhost:7106/api/shopping-cart/add-to-cart/2 application/json 2
2022-08-07 14:03:58.5275|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:03:58.5575|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.AddToCartAsync (EducationalPortal.API)'
2022-08-07 14:03:58.5718|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "AddToCart", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCartAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 14:03:58.5718|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:03:58.7332|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [CartItems] AS [c]
        INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
        LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
        WHERE ([c0].[Id] = @__courseId_0) AND ([u].[Email] = @__email_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-08-07 14:03:58.7467|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 14:03:58.7811|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CartItems] ([CourseId], [UserId])
VALUES (@p0, @p1);
SELECT [Id]
FROM [CartItems]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:03:58.7879|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Created cart item with id: 1.
2022-08-07 14:03:58.7879|INFO|Microsoft.AspNetCore.Mvc.StatusCodeResult|Executing StatusCodeResult, setting HTTP status code 200
2022-08-07 14:03:58.7879|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.AddToCartAsync (EducationalPortal.API) in 223.2202ms
2022-08-07 14:03:58.7879|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.AddToCartAsync (EducationalPortal.API)'
2022-08-07 14:03:58.7879|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 PUT https://localhost:7106/api/shopping-cart/add-to-cart/2 application/json 2 - 200 0 - 269.0935ms
2022-08-07 14:03:58.8475|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - -
2022-08-07 14:03:58.8475|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:03:58.8475|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/total-price - -
2022-08-07 14:03:58.8475|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:03:58.8481|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - - - 204 - - 0.5796ms
2022-08-07 14:03:58.8481|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/total-price - - - 204 - - 0.2289ms
2022-08-07 14:03:58.8481|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - -
2022-08-07 14:03:58.8481|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/shopping-cart/total-price - -
2022-08-07 14:03:58.8481|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:03:58.8481|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:03:58.8481|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API)'
2022-08-07 14:03:58.8481|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API)'
2022-08-07 14:03:58.8634|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetTotalPrice", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int32] GetTotalPriceAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 14:03:58.8634|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:03:58.8634|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCart", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.CartItemDto]] GetCartAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 14:03:58.8634|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:03:58.9206|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 14:03:58.9206|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 14:03:58.9584|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (22ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([c0].[Price]), 0)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 14:03:58.9584|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Returned total price 150 for cart from database.
2022-08-07 14:03:58.9584|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Int32'.
2022-08-07 14:03:58.9584|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API) in 100.0476ms
2022-08-07 14:03:58.9584|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API)'
2022-08-07 14:03:58.9584|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/shopping-cart/total-price - - - 200 3 application/json;+charset=utf-8 109.2234ms
2022-08-07 14:03:58.9842|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[CourseId], [t].[UserId], [c0].[Id], [c0].[AuthorId], [c0].[Description], [c0].[Name], [c0].[Price], [c0].[ShortDescription], [c0].[Thumbnail]
FROM (
    SELECT [c].[Id], [c].[CourseId], [c].[UserId]
    FROM [CartItems] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
    WHERE [u].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c0] ON [t].[CourseId] = [c0].[Id]
2022-08-07 14:03:58.9976|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 14:03:59.0045|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Returned cart items page 1 from database.
2022-08-07 14:03:59.0045|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.CartItemDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 14:03:59.0045|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API) in 144.541ms
2022-08-07 14:03:59.0045|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API)'
2022-08-07 14:03:59.0045|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - - - 200 286 application/json;+charset=utf-8 155.7441ms
2022-08-07 14:04:00.1824|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/buy - -
2022-08-07 14:04:00.1824|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:00.1824|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/shopping-cart/buy - - - 204 - - 1.6336ms
2022-08-07 14:04:00.1824|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 PUT https://localhost:7106/api/shopping-cart/buy application/json 2
2022-08-07 14:04:00.1824|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:00.1824|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.BuyAsync (EducationalPortal.API)'
2022-08-07 14:04:00.2004|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Buy", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BuyAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 14:04:00.2115|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:04:00.2410|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 14:04:00.2618|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[CourseId], [c].[UserId], [c0].[Id], [c0].[AuthorId], [c0].[Description], [c0].[Name], [c0].[Price], [c0].[ShortDescription], [c0].[Thumbnail]
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 14:04:00.2618|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([c0].[Price]), 0)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 14:04:00.2917|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 14:04:00.2917|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|User with email petro@petro payed 150 points.
2022-08-07 14:04:00.3060|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CoursesMaterials] AS [c]
WHERE [c].[CourseId] = @__courseId_0
2022-08-07 14:04:00.3929|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CoursesMaterials] AS [c]
INNER JOIN (
    SELECT [m].[Id]
    FROM [Materials] AS [m]
) AS [t] ON [c].[MaterialId] = [t].[Id]
WHERE ([c].[CourseId] = @__courseId_0) AND EXISTS (
    SELECT 1
    FROM [MaterialsBaseUser] AS [m0]
    INNER JOIN [Users] AS [u] ON [m0].[UsersId] = [u].[Id]
    WHERE ([t].[Id] = [m0].[MaterialsId]) AND ([u].[Id] = (
        SELECT TOP(1) [u0].[Id]
        FROM [Users] AS [u0]
        WHERE [u0].[Email] = @__email_1)))
2022-08-07 14:04:00.3983|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UsersCourses] ([CourseId], [UserId], [LearnedMaterialsCount], [MaterialsCount])
VALUES (@p0, @p1, @p2, @p3);
2022-08-07 14:04:00.3983|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Added course with id: 2 to user with email: petro@petro.
2022-08-07 14:04:00.4124|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
FROM [Users] AS [u]
WHERE EXISTS (
    SELECT 1
    FROM [Courses] AS [c]
    WHERE ([u].[Id] = [c].[AuthorId]) AND ([c].[Id] = @__courseId_0))
2022-08-07 14:04:00.4124|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 14:04:00.4124|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Added revenue to author with email default@gmail.com for selling course with id: 2.
2022-08-07 14:04:00.4438|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ShoppingHistory] ([CourseId], [Date], [Price], [UserId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [ShoppingHistory]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 14:04:00.4438|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Created shopping history with id 1.
2022-08-07 14:04:00.4680|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [CartItems]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-08-07 14:04:00.4758|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|User with email petro@petro bought courses.
2022-08-07 14:04:00.4758|INFO|Microsoft.AspNetCore.Mvc.StatusCodeResult|Executing StatusCodeResult, setting HTTP status code 200
2022-08-07 14:04:00.4758|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.BuyAsync (EducationalPortal.API) in 275.6752ms
2022-08-07 14:04:00.4758|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.BuyAsync (EducationalPortal.API)'
2022-08-07 14:04:00.4758|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 PUT https://localhost:7106/api/shopping-cart/buy application/json 2 - 200 0 - 288.2394ms
2022-08-07 14:04:00.4758|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - -
2022-08-07 14:04:00.4758|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:00.4758|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API)'
2022-08-07 14:04:00.4758|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCart", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.CartItemDto]] GetCartAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 14:04:00.4758|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/shopping-cart/total-price - -
2022-08-07 14:04:00.4758|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:00.4758|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API)'
2022-08-07 14:04:00.4758|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetTotalPrice", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int32] GetTotalPriceAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 14:04:00.4758|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:04:00.4910|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:04:00.5123|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([c0].[Price]), 0)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 14:04:00.5123|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Returned total price 0 for cart from database.
2022-08-07 14:04:00.5123|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Int32'.
2022-08-07 14:04:00.5123|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API) in 27.712ms
2022-08-07 14:04:00.5123|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API)'
2022-08-07 14:04:00.5123|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/shopping-cart/total-price - - - 200 1 application/json;+charset=utf-8 28.8480ms
2022-08-07 14:04:00.5297|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[CourseId], [t].[UserId], [c0].[Id], [c0].[AuthorId], [c0].[Description], [c0].[Name], [c0].[Price], [c0].[ShortDescription], [c0].[Thumbnail]
FROM (
    SELECT [c].[Id], [c].[CourseId], [c].[UserId]
    FROM [CartItems] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
    WHERE [u].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c0] ON [t].[CourseId] = [c0].[Id]
2022-08-07 14:04:00.5297|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 14:04:00.5388|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Returned cart items page 1 from database.
2022-08-07 14:04:00.5388|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.CartItemDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 14:04:00.5388|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API) in 55.5064ms
2022-08-07 14:04:00.5388|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API)'
2022-08-07 14:04:00.5388|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - - - 200 2 application/json;+charset=utf-8 57.3650ms
2022-08-07 14:04:01.7453|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 14:04:01.7453|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:01.7453|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 204 - - 5.1684ms
2022-08-07 14:04:01.7453|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 14:04:01.7542|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:01.7542|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 14:04:01.7831|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "MyLearning", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Core.Entities.JoinEntities.UsersCourses]] MyLearningAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 14:04:01.7831|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:04:01.9451|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 14:04:01.9451|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 14:04:01.9635|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[UserId], [t].[CourseId], [t].[LearnedMaterialsCount], [t].[MaterialsCount], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM (
    SELECT [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
    FROM [UsersCourses] AS [u]
    INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
    WHERE [u0].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c] ON [t].[CourseId] = [c].[Id]
2022-08-07 14:04:01.9635|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE [u0].[Email] = @__email_0
2022-08-07 14:04:01.9635|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CoursesMaterials] AS [c]
INNER JOIN (
    SELECT [m].[Id]
    FROM [Materials] AS [m]
) AS [t] ON [c].[MaterialId] = [t].[Id]
WHERE ([c].[CourseId] = @__courseId_0) AND EXISTS (
    SELECT 1
    FROM [MaterialsBaseUser] AS [m0]
    INNER JOIN [Users] AS [u] ON [m0].[UsersId] = [u].[Id]
    WHERE ([t].[Id] = [m0].[MaterialsId]) AND ([u].[Id] = (
        SELECT TOP(1) [u0].[Id]
        FROM [Users] AS [u0]
        WHERE [u0].[Email] = @__email_1)))
2022-08-07 14:04:01.9789|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UsersCourses] SET [LearnedMaterialsCount] = @p0, [MaterialsCount] = @p1
WHERE [CourseId] = @p2 AND [UserId] = @p3;
SELECT @@ROWCOUNT;
2022-08-07 14:04:01.9789|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned users courses page 1 from database.
2022-08-07 14:04:01.9789|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Core.Entities.JoinEntities.UsersCourses, EducationalPortal.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 14:04:01.9950|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API) in 211.7967ms
2022-08-07 14:04:01.9950|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 14:04:01.9950|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 200 902 application/json;+charset=utf-8 241.5156ms
2022-08-07 14:04:03.4049|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/learn/2 - -
2022-08-07 14:04:03.4049|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:03.4049|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/learn/2 - - - 204 - - 3.8330ms
2022-08-07 14:04:03.4117|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/learn/2 - -
2022-08-07 14:04:03.4117|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:03.4117|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseToLearnAsync (EducationalPortal.API)'
2022-08-07 14:04:03.4329|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourseToLearn", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseLearnDto] GetCourseToLearnAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 14:04:03.4329|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:04:03.5996|WARN|Microsoft.EntityFrameworkCore.Query|Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2022-08-07 14:04:03.6653|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (38ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 14:04:03.8086|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 14:04:03.8298|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 14:04:03.8541|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 14:04:03.8541|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 14:04:03.8541|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 14:04:03.8541|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 14:04:03.8541|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 14:04:03.8635|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 14:04:03.8635|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 14:04:03.8635|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 14:04:03.8635|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 14:04:03.8635|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 14:04:03.8635|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 14:04:03.8635|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 14:04:03.8635|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 14:04:03.8635|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 14:04:03.8635|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 14:04:03.8635|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 14:04:03.8804|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 14:04:03.8804|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 14:04:03.8804|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 14:04:03.9393|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 14:04:03.9699|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[CourseId] = @__courseId_0) AND ([u0].[Email] = @__email_1)
2022-08-07 14:04:03.9699|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course learn with id: 2.
2022-08-07 14:04:03.9699|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseLearnDto'.
2022-08-07 14:04:03.9910|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseToLearnAsync (EducationalPortal.API) in 557.9783ms
2022-08-07 14:04:03.9910|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseToLearnAsync (EducationalPortal.API)'
2022-08-07 14:04:03.9910|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/learn/2 - - - 200 1947 application/json;+charset=utf-8 579.6216ms
2022-08-07 14:04:06.4978|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/learned?materialId=4&courseId=2 - -
2022-08-07 14:04:06.4978|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:06.4978|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/learned?materialId=4&courseId=2 - - - 204 - - 1.6915ms
2022-08-07 14:04:06.4978|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 PUT https://localhost:7106/api/courses/learned?materialId=4&courseId=2 application/json 34
2022-08-07 14:04:06.4978|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:06.4978|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API)'
2022-08-07 14:04:06.5081|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Learned", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int32] LearnedAsync(Int32, Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 14:04:06.5081|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:04:06.5547|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[CourseId] = @__courseId_0) AND ([u0].[Email] = @__email_1)
2022-08-07 14:04:06.5547|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UsersCourses] SET [LearnedMaterialsCount] = @p0, [MaterialsCount] = @p1
WHERE [CourseId] = @p2 AND [UserId] = @p3;
SELECT @@ROWCOUNT;
2022-08-07 14:04:06.5757|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 14:04:06.6147|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
    WHEN [v].[Id] IS NOT NULL THEN N'Video'
    WHEN [b].[Id] IS NOT NULL THEN N'Book'
    WHEN [a].[Id] IS NOT NULL THEN N'Article'
END AS [Discriminator]
FROM [Materials] AS [m]
LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
WHERE [m].[Id] = @__id_0
2022-08-07 14:04:06.6602|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [MaterialsBaseUser] ([MaterialsId], [UsersId])
VALUES (@p0, @p1);
2022-08-07 14:04:06.6602|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 14:04:06.6602|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Material with id: 4 added to user with email: petro@petro. Material learned.
2022-08-07 14:04:06.6602|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Int32'.
2022-08-07 14:04:06.6602|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API) in 154.0765ms
2022-08-07 14:04:06.6602|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API)'
2022-08-07 14:04:06.6602|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 PUT https://localhost:7106/api/courses/learned?materialId=4&courseId=2 application/json 34 - 200 2 application/json;+charset=utf-8 160.1991ms
2022-08-07 14:04:06.9274|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/learned?materialId=7&courseId=2 - -
2022-08-07 14:04:06.9274|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:06.9274|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/learned?materialId=7&courseId=2 - - - 204 - - 0.4549ms
2022-08-07 14:04:06.9274|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 PUT https://localhost:7106/api/courses/learned?materialId=7&courseId=2 application/json 34
2022-08-07 14:04:06.9274|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:06.9274|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API)'
2022-08-07 14:04:06.9274|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Learned", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int32] LearnedAsync(Int32, Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 14:04:06.9274|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:04:07.2429|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (211ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[CourseId] = @__courseId_0) AND ([u0].[Email] = @__email_1)
2022-08-07 14:04:07.2429|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UsersCourses] SET [LearnedMaterialsCount] = @p0, [MaterialsCount] = @p1
WHERE [CourseId] = @p2 AND [UserId] = @p3;
SELECT @@ROWCOUNT;
2022-08-07 14:04:07.3360|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (87ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 14:04:07.3360|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
    WHEN [v].[Id] IS NOT NULL THEN N'Video'
    WHEN [b].[Id] IS NOT NULL THEN N'Book'
    WHEN [a].[Id] IS NOT NULL THEN N'Article'
END AS [Discriminator]
FROM [Materials] AS [m]
LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
WHERE [m].[Id] = @__id_0
2022-08-07 14:04:07.3360|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [MaterialsBaseUser] ([MaterialsId], [UsersId])
VALUES (@p0, @p1);
2022-08-07 14:04:07.3484|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 14:04:07.3484|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Material with id: 7 added to user with email: petro@petro. Material learned.
2022-08-07 14:04:07.3484|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Int32'.
2022-08-07 14:04:07.3484|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API) in 413.597ms
2022-08-07 14:04:07.3484|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API)'
2022-08-07 14:04:07.3484|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 PUT https://localhost:7106/api/courses/learned?materialId=7&courseId=2 application/json 34 - 200 2 application/json;+charset=utf-8 418.8755ms
2022-08-07 14:04:07.6253|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/learned?materialId=5&courseId=2 - -
2022-08-07 14:04:07.6429|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:07.6429|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/learned?materialId=5&courseId=2 - - - 204 - - 17.8866ms
2022-08-07 14:04:07.6493|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 PUT https://localhost:7106/api/courses/learned?materialId=5&courseId=2 application/json 34
2022-08-07 14:04:07.6493|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:07.6493|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API)'
2022-08-07 14:04:07.6493|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Learned", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int32] LearnedAsync(Int32, Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 14:04:07.6493|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:04:07.6859|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[CourseId] = @__courseId_0) AND ([u0].[Email] = @__email_1)
2022-08-07 14:04:07.6998|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UsersCourses] SET [LearnedMaterialsCount] = @p0, [MaterialsCount] = @p1
WHERE [CourseId] = @p2 AND [UserId] = @p3;
SELECT @@ROWCOUNT;
2022-08-07 14:04:07.7143|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 14:04:07.7270|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
    WHEN [v].[Id] IS NOT NULL THEN N'Video'
    WHEN [b].[Id] IS NOT NULL THEN N'Book'
    WHEN [a].[Id] IS NOT NULL THEN N'Article'
END AS [Discriminator]
FROM [Materials] AS [m]
LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
WHERE [m].[Id] = @__id_0
2022-08-07 14:04:07.7270|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [MaterialsBaseUser] ([MaterialsId], [UsersId])
VALUES (@p0, @p1);
2022-08-07 14:04:07.7270|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 14:04:07.7270|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Material with id: 5 added to user with email: petro@petro. Material learned.
2022-08-07 14:04:07.7270|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Int32'.
2022-08-07 14:04:07.7270|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API) in 85.4664ms
2022-08-07 14:04:07.7270|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API)'
2022-08-07 14:04:07.7270|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 PUT https://localhost:7106/api/courses/learned?materialId=5&courseId=2 application/json 34 - 200 2 application/json;+charset=utf-8 86.7928ms
2022-08-07 14:04:07.9160|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/learned?materialId=6&courseId=2 - -
2022-08-07 14:04:07.9160|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:07.9160|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/learned?materialId=6&courseId=2 - - - 204 - - 1.2810ms
2022-08-07 14:04:07.9524|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 PUT https://localhost:7106/api/courses/learned?materialId=6&courseId=2 application/json 34
2022-08-07 14:04:07.9524|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:07.9524|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API)'
2022-08-07 14:04:07.9524|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Learned", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int32] LearnedAsync(Int32, Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 14:04:07.9616|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:04:07.9803|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[CourseId] = @__courseId_0) AND ([u0].[Email] = @__email_1)
2022-08-07 14:04:07.9803|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UsersCourses] SET [LearnedMaterialsCount] = @p0, [MaterialsCount] = @p1
WHERE [CourseId] = @p2 AND [UserId] = @p3;
SELECT @@ROWCOUNT;
2022-08-07 14:04:07.9803|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 14:04:07.9947|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
    WHEN [v].[Id] IS NOT NULL THEN N'Video'
    WHEN [b].[Id] IS NOT NULL THEN N'Book'
    WHEN [a].[Id] IS NOT NULL THEN N'Article'
END AS [Discriminator]
FROM [Materials] AS [m]
LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
WHERE [m].[Id] = @__id_0
2022-08-07 14:04:07.9947|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [MaterialsBaseUser] ([MaterialsId], [UsersId])
VALUES (@p0, @p1);
2022-08-07 14:04:07.9947|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 14:04:07.9947|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Material with id: 6 added to user with email: petro@petro. Material learned.
2022-08-07 14:04:07.9947|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Int32'.
2022-08-07 14:04:07.9947|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API) in 49.2948ms
2022-08-07 14:04:07.9947|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API)'
2022-08-07 14:04:07.9947|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 PUT https://localhost:7106/api/courses/learned?materialId=6&courseId=2 application/json 34 - 200 2 application/json;+charset=utf-8 50.7891ms
2022-08-07 14:04:08.8609|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/learned?materialId=9&courseId=2 - -
2022-08-07 14:04:08.8609|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:08.8609|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/learned?materialId=9&courseId=2 - - - 204 - - 2.1453ms
2022-08-07 14:04:08.8661|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 PUT https://localhost:7106/api/courses/learned?materialId=9&courseId=2 application/json 34
2022-08-07 14:04:08.8661|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:08.8661|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API)'
2022-08-07 14:04:08.8661|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Learned", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int32] LearnedAsync(Int32, Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 14:04:08.8661|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:04:08.8970|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[CourseId] = @__courseId_0) AND ([u0].[Email] = @__email_1)
2022-08-07 14:04:08.8970|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UsersCourses] SET [LearnedMaterialsCount] = @p0, [MaterialsCount] = @p1
WHERE [CourseId] = @p2 AND [UserId] = @p3;
SELECT @@ROWCOUNT;
2022-08-07 14:04:08.9164|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 14:04:08.9164|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
    WHEN [v].[Id] IS NOT NULL THEN N'Video'
    WHEN [b].[Id] IS NOT NULL THEN N'Book'
    WHEN [a].[Id] IS NOT NULL THEN N'Article'
END AS [Discriminator]
FROM [Materials] AS [m]
LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
WHERE [m].[Id] = @__id_0
2022-08-07 14:04:08.9342|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [MaterialsBaseUser] ([MaterialsId], [UsersId])
VALUES (@p0, @p1);
2022-08-07 14:04:08.9342|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 14:04:08.9342|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Material with id: 9 added to user with email: petro@petro. Material learned.
2022-08-07 14:04:08.9342|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Int32'.
2022-08-07 14:04:08.9342|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API) in 71.2399ms
2022-08-07 14:04:08.9342|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API)'
2022-08-07 14:04:08.9342|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 PUT https://localhost:7106/api/courses/learned?materialId=9&courseId=2 application/json 34 - 200 2 application/json;+charset=utf-8 72.9606ms
2022-08-07 14:04:09.2656|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/learned?materialId=10&courseId=2 - -
2022-08-07 14:04:09.2656|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:09.2656|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/learned?materialId=10&courseId=2 - - - 204 - - 0.6348ms
2022-08-07 14:04:09.2656|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 PUT https://localhost:7106/api/courses/learned?materialId=10&courseId=2 application/json 34
2022-08-07 14:04:09.2656|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:09.2656|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API)'
2022-08-07 14:04:09.2656|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Learned", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int32] LearnedAsync(Int32, Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 14:04:09.2699|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:04:09.2699|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[CourseId] = @__courseId_0) AND ([u0].[Email] = @__email_1)
2022-08-07 14:04:09.2887|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UsersCourses] SET [LearnedMaterialsCount] = @p0, [MaterialsCount] = @p1
WHERE [CourseId] = @p2 AND [UserId] = @p3;
SELECT @@ROWCOUNT;
2022-08-07 14:04:09.2887|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 14:04:09.2887|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
    WHEN [v].[Id] IS NOT NULL THEN N'Video'
    WHEN [b].[Id] IS NOT NULL THEN N'Book'
    WHEN [a].[Id] IS NOT NULL THEN N'Article'
END AS [Discriminator]
FROM [Materials] AS [m]
LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
WHERE [m].[Id] = @__id_0
2022-08-07 14:04:09.3007|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [MaterialsBaseUser] ([MaterialsId], [UsersId])
VALUES (@p0, @p1);
2022-08-07 14:04:09.3007|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 14:04:09.3007|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Material with id: 10 added to user with email: petro@petro. Material learned.
2022-08-07 14:04:09.3007|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Int32'.
2022-08-07 14:04:09.3007|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API) in 33.3049ms
2022-08-07 14:04:09.3007|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API)'
2022-08-07 14:04:09.3007|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 PUT https://localhost:7106/api/courses/learned?materialId=10&courseId=2 application/json 34 - 200 2 application/json;+charset=utf-8 34.3425ms
2022-08-07 14:04:09.9107|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/learned?materialId=8&courseId=2 - -
2022-08-07 14:04:09.9107|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:09.9107|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/learned?materialId=8&courseId=2 - - - 204 - - 3.2558ms
2022-08-07 14:04:09.9107|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 PUT https://localhost:7106/api/courses/learned?materialId=8&courseId=2 application/json 34
2022-08-07 14:04:09.9107|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:09.9107|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API)'
2022-08-07 14:04:09.9107|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Learned", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int32] LearnedAsync(Int32, Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 14:04:09.9107|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:04:10.1044|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (132ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[CourseId] = @__courseId_0) AND ([u0].[Email] = @__email_1)
2022-08-07 14:04:10.1140|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UsersCourses] SET [LearnedMaterialsCount] = @p0, [MaterialsCount] = @p1
WHERE [CourseId] = @p2 AND [UserId] = @p3;
SELECT @@ROWCOUNT;
2022-08-07 14:04:10.1140|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 14:04:10.1140|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
    WHEN [v].[Id] IS NOT NULL THEN N'Video'
    WHEN [b].[Id] IS NOT NULL THEN N'Book'
    WHEN [a].[Id] IS NOT NULL THEN N'Article'
END AS [Discriminator]
FROM [Materials] AS [m]
LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
WHERE [m].[Id] = @__id_0
2022-08-07 14:04:10.1298|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [MaterialsBaseUser] ([MaterialsId], [UsersId])
VALUES (@p0, @p1);
2022-08-07 14:04:10.1298|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 14:04:10.1298|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Material with id: 8 added to user with email: petro@petro. Material learned.
2022-08-07 14:04:10.1501|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CourseId], [c].[SkillId]
FROM [CoursesSkills] AS [c]
WHERE [c].[CourseId] = @__courseId_0
2022-08-07 14:04:10.2721|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (56ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[UserId], [t0].[SkillId], [t0].[Level], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[SkillId], [u0].[Level], [s].[Id], [s].[Name]
    FROM [UsersSkills] AS [u0]
    INNER JOIN [Skills] AS [s] ON [u0].[SkillId] = [s].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[SkillId]
2022-08-07 14:04:10.3365|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (26ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Size = 450), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (Size = 450), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (Size = 450), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (Size = 450), @p22='?' (DbType = Int32), @p23='?' (DbType = Int32), @p24='?' (Size = 450), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 450), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (Size = 450), @p31='?' (DbType = Int32), @p32='?' (DbType = Int32), @p33='?' (Size = 450), @p34='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;

INSERT INTO [UsersSkills] ([SkillId], [UserId], [Level])
VALUES (@p8, @p9, @p10),
(@p11, @p12, @p13),
(@p14, @p15, @p16),
(@p17, @p18, @p19),
(@p20, @p21, @p22),
(@p23, @p24, @p25),
(@p26, @p27, @p28),
(@p29, @p30, @p31),
(@p32, @p33, @p34);
2022-08-07 14:04:10.3519|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Added skills of course with id: 2 to user with email: petro@petro. Course learned.
2022-08-07 14:04:10.3519|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Int32'.
2022-08-07 14:04:10.3519|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API) in 434.9576ms
2022-08-07 14:04:10.3519|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API)'
2022-08-07 14:04:10.3519|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 PUT https://localhost:7106/api/courses/learned?materialId=8&courseId=2 application/json 34 - 200 3 application/json;+charset=utf-8 436.9938ms
2022-08-07 14:04:12.2286|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 14:04:12.2286|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:12.2286|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 204 - - 2.5459ms
2022-08-07 14:04:12.2397|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 14:04:12.2397|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:12.2397|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 14:04:12.2397|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "MyLearning", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Core.Entities.JoinEntities.UsersCourses]] MyLearningAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 14:04:12.2397|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:04:12.3540|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[UserId], [t].[CourseId], [t].[LearnedMaterialsCount], [t].[MaterialsCount], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM (
    SELECT [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
    FROM [UsersCourses] AS [u]
    INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
    WHERE [u0].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c] ON [t].[CourseId] = [c].[Id]
2022-08-07 14:04:12.3540|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE [u0].[Email] = @__email_0
2022-08-07 14:04:12.3942|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (33ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CoursesMaterials] AS [c]
INNER JOIN (
    SELECT [m].[Id]
    FROM [Materials] AS [m]
) AS [t] ON [c].[MaterialId] = [t].[Id]
WHERE ([c].[CourseId] = @__courseId_0) AND EXISTS (
    SELECT 1
    FROM [MaterialsBaseUser] AS [m0]
    INNER JOIN [Users] AS [u] ON [m0].[UsersId] = [u].[Id]
    WHERE ([t].[Id] = [m0].[MaterialsId]) AND ([u].[Id] = (
        SELECT TOP(1) [u0].[Id]
        FROM [Users] AS [u0]
        WHERE [u0].[Email] = @__email_1)))
2022-08-07 14:04:12.3999|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UsersCourses] SET [LearnedMaterialsCount] = @p0, [MaterialsCount] = @p1
WHERE [CourseId] = @p2 AND [UserId] = @p3;
SELECT @@ROWCOUNT;
2022-08-07 14:04:12.3999|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned users courses page 1 from database.
2022-08-07 14:04:12.3999|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Core.Entities.JoinEntities.UsersCourses, EducationalPortal.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 14:04:12.3999|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API) in 161.4592ms
2022-08-07 14:04:12.3999|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 14:04:12.3999|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 200 902 application/json;+charset=utf-8 163.1704ms
2022-08-07 14:04:14.0234|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 14:04:14.0234|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:14.0234|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 2.6547ms
2022-08-07 14:04:14.0234|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 568
2022-08-07 14:04:14.0234|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:14.0234|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 14:04:14.0463|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 14:04:14.0550|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 14:04:14.0550|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:04:14.0550|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 14:04:14.0831|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 14:04:14.0831|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 14:04:14.0831|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 14:04:14.0831|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 14:04:14.0831|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 14:04:14.0831|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 14:04:14.0831|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 47.0248ms
2022-08-07 14:04:14.0831|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 14:04:14.0831|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 568 - 200 604 application/json;+charset=utf-8 64.8899ms
2022-08-07 14:04:20.7266|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account - -
2022-08-07 14:04:20.7266|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:20.7266|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account - - - 204 - - 1.5373ms
2022-08-07 14:04:20.7405|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account - -
2022-08-07 14:04:20.7405|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:20.7686|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API)'
2022-08-07 14:04:20.7764|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetProfile", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.DTO.UserDto]] GetProfileAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 14:04:20.7764|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:04:20.9319|WARN|Microsoft.EntityFrameworkCore.Query|Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2022-08-07 14:04:20.9635|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [t0].[UserId], [t0].[SkillId], [t0].[Level], [t0].[Id], [t0].[Name], [t1].[RolesId], [t1].[UsersId], [t1].[Id], [t1].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN [Courses] AS [c] ON [t].[Id] = [c].[AuthorId]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[SkillId], [u0].[Level], [s].[Id], [s].[Name]
    FROM [UsersSkills] AS [u0]
    INNER JOIN [Skills] AS [s] ON [u0].[SkillId] = [s].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsersId]
ORDER BY [t].[Id], [c].[Id], [t0].[UserId], [t0].[SkillId], [t0].[Id], [t1].[RolesId], [t1].[UsersId]
2022-08-07 14:04:20.9864|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned user with email: petro@petro.
2022-08-07 14:04:20.9864|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.UserDto'.
2022-08-07 14:04:20.9944|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API) in 217.9188ms
2022-08-07 14:04:20.9944|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API)'
2022-08-07 14:04:20.9944|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account - - - 200 652 application/json;+charset=utf-8 254.2691ms
2022-08-07 14:04:44.2666|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 14:04:44.2666|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:44.2666|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1.7847ms
2022-08-07 14:04:44.2730|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 604
2022-08-07 14:04:44.2730|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 14:04:44.2730|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 14:04:44.2730|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 14:04:44.2730|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 14:04:44.2730|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 14:04:44.2730|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 14:04:44.2730|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 14:04:44.2730|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 14:04:44.2859|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 14:04:44.2859|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 14:04:44.2859|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 14:04:44.2859|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 14:04:44.2859|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 14.7539ms
2022-08-07 14:04:44.2859|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 14:04:44.2859|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 604 - 200 637 application/json;+charset=utf-8 17.7399ms
2022-08-07 19:02:10.7985|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 19:02:22.0319|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (176ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2022-08-07 19:02:22.7940|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (349ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [EducationalPortal] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2022-08-07 19:02:22.8567|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (62ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [EducationalPortal];
2022-08-07 19:02:23.9632|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (707ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [EducationalPortal];
2022-08-07 19:02:24.2489|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (285ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [EducationalPortal] SET READ_COMMITTED_SNAPSHOT ON;
END;
2022-08-07 19:02:24.2874|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2022-08-07 19:02:24.9299|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Authors] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Authors] PRIMARY KEY ([Id])
);
2022-08-07 19:02:24.9299|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Extensions] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Extensions] PRIMARY KEY ([Id])
);
2022-08-07 19:02:24.9299|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Materials] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Link] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Materials] PRIMARY KEY ([Id])
);
2022-08-07 19:02:24.9450|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Qualities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Qualities] PRIMARY KEY ([Id])
);
2022-08-07 19:02:24.9450|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Resources] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Resources] PRIMARY KEY ([Id])
);
2022-08-07 19:02:24.9450|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Roles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_Roles] PRIMARY KEY ([Id])
);
2022-08-07 19:02:24.9450|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Skills] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Skills] PRIMARY KEY ([Id])
);
2022-08-07 19:02:24.9739|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UserToken] (
    [Id] int NOT NULL IDENTITY,
    [RefreshToken] nvarchar(max) NOT NULL,
    [RefreshTokenExpiryTime] datetime2 NOT NULL,
    CONSTRAINT [PK_UserToken] PRIMARY KEY ([Id])
);
2022-08-07 19:02:24.9970|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Books] (
    [Id] int NOT NULL,
    [PagesCount] int NOT NULL,
    [ExtensionId] int NOT NULL,
    [PublicationYear] int NOT NULL,
    CONSTRAINT [PK_Books] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Books_Extensions_ExtensionId] FOREIGN KEY ([ExtensionId]) REFERENCES [Extensions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Books_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id])
);
2022-08-07 19:02:25.0151|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Videos] (
    [Id] int NOT NULL,
    [Duration] datetime2 NOT NULL,
    [QualityId] int NOT NULL,
    CONSTRAINT [PK_Videos] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Videos_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id]),
    CONSTRAINT [FK_Videos_Qualities_QualityId] FOREIGN KEY ([QualityId]) REFERENCES [Qualities] ([Id]) ON DELETE CASCADE
);
2022-08-07 19:02:25.0195|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Articles] (
    [Id] int NOT NULL,
    [ResourceId] int NOT NULL,
    [PublicationDate] datetime2 NOT NULL,
    CONSTRAINT [PK_Articles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Articles_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id]),
    CONSTRAINT [FK_Articles_Resources_ResourceId] FOREIGN KEY ([ResourceId]) REFERENCES [Resources] ([Id]) ON DELETE CASCADE
);
2022-08-07 19:02:25.0445|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Position] nvarchar(max) NULL,
    [Avatar] nvarchar(max) NOT NULL,
    [Email] nvarchar(450) NOT NULL,
    [PasswordHash] nvarchar(max) NOT NULL,
    [Balance] int NOT NULL,
    [UserTokenId] int NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_UserToken_UserTokenId] FOREIGN KEY ([UserTokenId]) REFERENCES [UserToken] ([Id])
);
2022-08-07 19:02:25.0525|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AuthorBook] (
    [AuthorsId] int NOT NULL,
    [BooksId] int NOT NULL,
    CONSTRAINT [PK_AuthorBook] PRIMARY KEY ([AuthorsId], [BooksId]),
    CONSTRAINT [FK_AuthorBook_Authors_AuthorsId] FOREIGN KEY ([AuthorsId]) REFERENCES [Authors] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AuthorBook_Books_BooksId] FOREIGN KEY ([BooksId]) REFERENCES [Books] ([Id]) ON DELETE CASCADE
);
2022-08-07 19:02:25.0686|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Courses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Thumbnail] nvarchar(max) NOT NULL,
    [ShortDescription] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [Price] int NOT NULL,
    [AuthorId] nvarchar(450) NULL,
    CONSTRAINT [PK_Courses] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Courses_Users_AuthorId] FOREIGN KEY ([AuthorId]) REFERENCES [Users] ([Id])
);
2022-08-07 19:02:25.0823|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [MaterialsBaseUser] (
    [MaterialsId] int NOT NULL,
    [UsersId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_MaterialsBaseUser] PRIMARY KEY ([MaterialsId], [UsersId]),
    CONSTRAINT [FK_MaterialsBaseUser_Materials_MaterialsId] FOREIGN KEY ([MaterialsId]) REFERENCES [Materials] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_MaterialsBaseUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 19:02:25.0823|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [RoleUser] (
    [RolesId] int NOT NULL,
    [UsersId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_RoleUser] PRIMARY KEY ([RolesId], [UsersId]),
    CONSTRAINT [FK_RoleUser_Roles_RolesId] FOREIGN KEY ([RolesId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RoleUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 19:02:25.0976|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UsersSkills] (
    [UserId] nvarchar(450) NOT NULL,
    [SkillId] int NOT NULL,
    [Level] int NOT NULL,
    CONSTRAINT [PK_UsersSkills] PRIMARY KEY ([UserId], [SkillId]),
    CONSTRAINT [FK_UsersSkills_Skills_SkillId] FOREIGN KEY ([SkillId]) REFERENCES [Skills] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UsersSkills_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 19:02:25.0976|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CartItems] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NULL,
    [CourseId] int NOT NULL,
    CONSTRAINT [PK_CartItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_CartItems_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CartItems_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2022-08-07 19:02:25.0976|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CoursesMaterials] (
    [CourseId] int NOT NULL,
    [MaterialId] int NOT NULL,
    [Index] int NOT NULL,
    CONSTRAINT [PK_CoursesMaterials] PRIMARY KEY ([CourseId], [MaterialId]),
    CONSTRAINT [FK_CoursesMaterials_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CoursesMaterials_Materials_MaterialId] FOREIGN KEY ([MaterialId]) REFERENCES [Materials] ([Id]) ON DELETE CASCADE
);
2022-08-07 19:02:25.0976|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CoursesSkills] (
    [CourseId] int NOT NULL,
    [SkillId] int NOT NULL,
    CONSTRAINT [PK_CoursesSkills] PRIMARY KEY ([CourseId], [SkillId]),
    CONSTRAINT [FK_CoursesSkills_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CoursesSkills_Skills_SkillId] FOREIGN KEY ([SkillId]) REFERENCES [Skills] ([Id]) ON DELETE CASCADE
);
2022-08-07 19:02:25.1144|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [ShoppingHistory] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NULL,
    [CourseId] int NOT NULL,
    [Price] int NOT NULL,
    [Date] datetime2 NOT NULL,
    CONSTRAINT [PK_ShoppingHistory] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ShoppingHistory_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ShoppingHistory_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2022-08-07 19:02:25.1144|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UsersCourses] (
    [UserId] nvarchar(450) NOT NULL,
    [CourseId] int NOT NULL,
    [MaterialsCount] int NOT NULL,
    [LearnedMaterialsCount] int NOT NULL,
    CONSTRAINT [PK_UsersCourses] PRIMARY KEY ([UserId], [CourseId]),
    CONSTRAINT [FK_UsersCourses_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UsersCourses_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 19:02:25.1144|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Articles_ResourceId] ON [Articles] ([ResourceId]);
2022-08-07 19:02:25.1144|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_AuthorBook_BooksId] ON [AuthorBook] ([BooksId]);
2022-08-07 19:02:25.1144|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Books_ExtensionId] ON [Books] ([ExtensionId]);
2022-08-07 19:02:25.1303|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CartItems_CourseId] ON [CartItems] ([CourseId]);
2022-08-07 19:02:25.1303|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CartItems_UserId] ON [CartItems] ([UserId]);
2022-08-07 19:02:25.1303|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Courses_AuthorId] ON [Courses] ([AuthorId]);
2022-08-07 19:02:25.1303|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CoursesMaterials_MaterialId] ON [CoursesMaterials] ([MaterialId]);
2022-08-07 19:02:25.1303|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CoursesSkills_SkillId] ON [CoursesSkills] ([SkillId]);
2022-08-07 19:02:25.1303|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_MaterialsBaseUser_UsersId] ON [MaterialsBaseUser] ([UsersId]);
2022-08-07 19:02:25.1303|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Roles_Name] ON [Roles] ([Name]);
2022-08-07 19:02:25.1448|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_RoleUser_UsersId] ON [RoleUser] ([UsersId]);
2022-08-07 19:02:25.1448|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_ShoppingHistory_CourseId] ON [ShoppingHistory] ([CourseId]);
2022-08-07 19:02:25.1448|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_ShoppingHistory_UserId] ON [ShoppingHistory] ([UserId]);
2022-08-07 19:02:25.1448|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]);
2022-08-07 19:02:25.1448|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Users_UserTokenId] ON [Users] ([UserTokenId]);
2022-08-07 19:02:25.1448|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_UsersCourses_CourseId] ON [UsersCourses] ([CourseId]);
2022-08-07 19:02:25.1448|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_UsersSkills_SkillId] ON [UsersSkills] ([SkillId]);
2022-08-07 19:02:25.1448|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Videos_QualityId] ON [Videos] ([QualityId]);
2022-08-07 19:02:26.1542|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (221ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [Qualities] USING (
VALUES (@p0, 0),
(@p1, 1),
(@p2, 2),
(@p3, 3),
(@p4, 4),
(@p5, 5),
(@p6, 6),
(@p7, 7)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [i].[Id] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-08-07 19:02:26.5191|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:26.5451|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 19:02:26.5995|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Extensions] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Extensions]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:26.6645|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:26.8808|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (26ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:26.9233|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (33ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 19:02:26.9319|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 19:02:26.9905|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Resources] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Resources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:27.0238|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:27.0238|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 19:02:27.1285|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:27.1498|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:27.1696|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:27.2686|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:27.2896|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:27.2896|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:27.3913|INFO|EducationalPortal.Infrastructure.Services.Identity.PasswordHasher|Hashed password.
2022-08-07 19:02:27.6858|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Avatar], [Balance], [Email], [Name], [PasswordHash], [Position], [UserTokenId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2022-08-07 19:02:27.7742|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (84ms) [Parameters=[@p8='?' (DbType = Int32), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (Size = 450), @p12='?' (DbType = Int32), @p13='?' (Size = 450), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Size = 450), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Size = 450), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RoleUser] ([RolesId], [UsersId])
VALUES (@p8, @p9),
(@p10, @p11);
INSERT INTO [UsersSkills] ([SkillId], [UserId], [Level])
VALUES (@p12, @p13, @p14),
(@p15, @p16, @p17),
(@p18, @p19, @p20);
2022-08-07 19:02:27.8976|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (26ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:27.9353|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11),
(@p12, @p13, @p14);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p15, @p16),
(@p17, @p18),
(@p19, @p20);
2022-08-07 19:02:27.9900|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UsersCourses] ([CourseId], [UserId], [LearnedMaterialsCount], [MaterialsCount])
VALUES (@p0, @p1, @p2, @p3);
2022-08-07 19:02:28.0163|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (22ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [Skills] USING (
VALUES (@p0, 0),
(@p1, 1),
(@p2, 2),
(@p3, 3),
(@p4, 4),
(@p5, 5),
(@p6, 6),
(@p7, 7),
(@p8, 8)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [i].[Id] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-08-07 19:02:28.0224|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:28.0224|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 19:02:28.0224|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:28.0224|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 19:02:28.0224|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:28.0224|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 19:02:28.0393|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:28.0393|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:28.0393|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 19:02:28.0393|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 19:02:28.0528|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:28.0528|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:28.0528|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 19:02:28.0528|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 19:02:28.0528|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Resources] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Resources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:28.0528|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:28.0694|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 19:02:28.0694|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:28.0694|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 19:02:28.0844|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:28.0844|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = Int32), @p32='?' (DbType = Int32), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = Int32), @p38='?' (DbType = Int32), @p39='?' (DbType = Int32), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11),
(@p12, @p13, @p14),
(@p15, @p16, @p17),
(@p18, @p19, @p20),
(@p21, @p22, @p23),
(@p24, @p25, @p26);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p27, @p28),
(@p29, @p30),
(@p31, @p32),
(@p33, @p34),
(@p35, @p36),
(@p37, @p38),
(@p39, @p40),
(@p41, @p42),
(@p43, @p44);
2022-08-07 19:02:28.1045|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:02:28.1165|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p12, @p13),
(@p14, @p15),
(@p16, @p17);
2022-08-07 19:02:30.0761|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\rareb\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-07 19:02:31.2751|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7106
2022-08-07 19:02:31.2751|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:7105
2022-08-07 19:02:31.2751|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2022-08-07 19:02:31.2751|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2022-08-07 19:02:31.2751|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\
2022-08-07 19:02:36.2242|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger - -
2022-08-07 19:02:36.5958|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger - - - 301 0 - 375.4203ms
2022-08-07 19:02:36.7902|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - -
2022-08-07 19:02:38.5779|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - - - 200 - text/html;charset=utf-8 1787.6258ms
2022-08-07 19:02:38.7782|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - -
2022-08-07 19:02:38.7782|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - -
2022-08-07 19:02:38.7782|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - -
2022-08-07 19:02:38.7782|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 19:02:38.7782|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 19:02:39.0482|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 267.3767ms
2022-08-07 19:02:39.1506|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-07 19:02:39.1506|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - - - 200 143943 text/css 381.1396ms
2022-08-07 19:02:39.1506|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-07 19:02:39.1605|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 379.6018ms
2022-08-07 19:02:39.3433|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-07 19:02:39.3433|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - - - 200 1095087 application/javascript 562.6281ms
2022-08-07 19:02:39.3942|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 612.9195ms
2022-08-07 19:02:40.8365|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - -
2022-08-07 19:02:41.7890|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 952.4629ms
2022-08-07 19:02:42.7733|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 19:02:42.8363|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 19:02:42.8965|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 19:02:42.8965|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 19:02:42.8965|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 127.2098ms
2022-08-07 19:02:42.8965|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 64.2493ms
2022-08-07 19:02:43.0159|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 637
2022-08-07 19:02:43.0159|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 19:02:43.0159|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 19:02:43.0159|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 19:02:44.7659|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Failed to validate the token.|Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-07 19:02:44.7659|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Failed to validate the token.|Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-07 19:02:44.8585|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-08-07 19:02:44.8585|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-08-07 19:02:44.8649|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 19:02:44.8649|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 19:02:44.9319|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 19:02:44.9319|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 19:02:44.9625|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 19:02:45.5410|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 19:02:45.7746|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 19:02:46.5212|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 19:02:46.5212|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 19:02:47.0387|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (108ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 19:02:47.1815|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 19:02:47.2503|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE 0 = 1
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 19:02:47.2586|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 19:02:47.8006|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 2859.057ms
2022-08-07 19:02:47.8006|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 19:02:48.4261|ERROR|EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware|Something went wrong: Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: SecurityToken has Expired
   at EducationalPortal.Infrastructure.Services.Identity.TokensService.RefreshAsync(TokensModel tokensModel, String email, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\Services\Identity\TokensService.cs:line 39
   at EducationalPortal.API.Controllers.TokensController.RefreshAsync(TokensModel tokensModel, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\Controllers\TokensController.cs:line 20
   at lambda_method681(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\ExceptionHandling\ExceptionMiddleware.cs:line 25
2022-08-07 19:02:48.4280|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 19:02:48.4676|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 637 - 500 - application/json 5451.6808ms
2022-08-07 19:02:48.7194|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 3787.1196ms
2022-08-07 19:02:48.7194|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 19:02:48.9015|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 5883.0993ms
2022-08-07 19:03:34.5728|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 19:03:34.5842|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 19:03:34.5842|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 19:03:34.5842|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 19:03:34.5842|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 19:03:34.6083|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 19:03:34.6083|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 19:03:34.6142|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 19:03:34.6142|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 19:03:34.6142|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 25.9265ms
2022-08-07 19:03:34.6142|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 19:03:34.6142|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 43.5245ms
2022-08-07 19:03:37.0785|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 19:03:37.0785|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 19:03:37.0834|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 19:03:37.0834|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 19:03:37.1123|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 19:03:37.1720|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (26ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 19:03:37.2035|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 19:03:37.2119|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 19:03:37.2119|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 19:03:37.2119|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 129.0581ms
2022-08-07 19:03:37.2119|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 19:03:37.2119|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 134.4913ms
2022-08-07 19:03:50.3493|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/account/register - -
2022-08-07 19:03:50.3493|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 19:03:50.3493|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/account/register - - - 204 - - 5.7781ms
2022-08-07 19:03:50.3493|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/account/register application/json 81
2022-08-07 19:03:50.3493|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 19:03:50.3493|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.RegisterAsync (EducationalPortal.API)'
2022-08-07 19:03:50.3667|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RegisterAsync(EducationalPortal.Application.Models.RegisterModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 19:03:50.3667|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 19:03:50.5517|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[@__register_Email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__register_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-08-07 19:03:50.5756|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Name] = N'Student'
2022-08-07 19:03:50.5756|INFO|EducationalPortal.Infrastructure.Services.Identity.PasswordHasher|Hashed password.
2022-08-07 19:03:50.5756|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 19:03:50.5756|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned new refresh token.
2022-08-07 19:03:50.6579|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserToken] ([RefreshToken], [RefreshTokenExpiryTime])
VALUES (@p0, @p1);
SELECT [Id]
FROM [UserToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 19:03:50.6756|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (Size = 450), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Avatar], [Balance], [Email], [Name], [PasswordHash], [Position], [UserTokenId])
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2022-08-07 19:03:50.6756|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned claims for user with email: petro@petro.
2022-08-07 19:03:50.7095|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 19:03:50.7095|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned new access and refresh tokens.
2022-08-07 19:03:50.7095|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Created user with email: petro@petro.
2022-08-07 19:03:50.7095|INFO|EducationalPortal.Infrastructure.Services.AccountService|Registered user with email: petro@petro.
2022-08-07 19:03:50.7095|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 19:03:50.7095|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.RegisterAsync (EducationalPortal.API) in 345.9192ms
2022-08-07 19:03:50.7095|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.RegisterAsync (EducationalPortal.API)'
2022-08-07 19:03:50.7095|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/account/register application/json 81 - 200 568 application/json;+charset=utf-8 355.9161ms
2022-08-07 19:03:50.7631|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 19:03:50.7631|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 19:03:50.7631|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 0.4954ms
2022-08-07 19:03:50.7631|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 19:03:50.7631|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 19:03:50.7743|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 19:03:50.7743|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 19:03:50.7743|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 19:03:50.7743|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 19:03:50.7874|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 19:03:50.7874|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 19:03:50.7874|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 19:03:50.7874|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 17.3991ms
2022-08-07 19:03:50.7874|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 19:03:50.7874|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 25.4051ms
2022-08-07 19:03:53.6634|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 19:03:53.6634|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 19:03:53.6634|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1.4795ms
2022-08-07 19:03:53.6634|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 568
2022-08-07 19:03:53.6634|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 19:03:53.6634|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 19:03:53.6634|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 19:03:53.6634|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 19:03:53.6634|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 19:03:53.7141|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (39ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 19:03:53.7498|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 19:03:53.7498|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 19:03:53.7498|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 19:03:53.7498|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 19:03:53.7498|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 19:03:53.8209|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (32ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 19:03:53.8209|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 19:03:53.8209|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 19:03:53.8209|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 19:03:53.8209|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 78.4245ms
2022-08-07 19:03:53.8209|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 19:03:53.8209|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 80.0176ms
2022-08-07 19:03:53.8419|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 19:03:53.8419|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 19:03:53.8971|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 19:03:53.9356|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (32ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 19:03:53.9356|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 19:03:53.9356|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 19:03:53.9356|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 269.3851ms
2022-08-07 19:03:53.9356|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 19:03:53.9356|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 568 - 200 604 application/json;+charset=utf-8 271.6759ms
2022-08-07 19:03:56.7659|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 604
2022-08-07 19:03:56.7747|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 19:03:56.7747|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 19:03:56.7747|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 19:03:56.7747|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 19:03:56.7747|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 19:03:56.8119|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 19:03:56.8119|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 19:03:56.8119|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 0.4163ms
2022-08-07 19:03:56.8119|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (31ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 19:03:56.8181|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 19:03:56.8181|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 19:03:56.8329|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserToken] SET [RefreshToken] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-08-07 19:03:56.8329|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 19:03:56.8329|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 19:03:56.8329|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 19:03:56.8329|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 19:03:56.8329|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 19:03:56.8795|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 19:03:56.8795|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (46ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 19:03:56.8795|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Refreshed user tokens.
2022-08-07 19:03:56.8795|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 19:03:56.8795|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 104.5052ms
2022-08-07 19:03:56.8795|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 19:03:56.8795|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 19:03:56.8795|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 604 - 200 637 application/json;+charset=utf-8 116.5164ms
2022-08-07 19:03:56.8795|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 19:03:56.8795|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 19:03:56.8795|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 47.6021ms
2022-08-07 19:03:56.8795|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 19:03:56.8795|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 58.6980ms
2022-08-07 19:50:13.6333|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 19:52:13.3243|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 19:59:35.1612|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 19:59:37.5402|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (229ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2022-08-07 19:59:38.5807|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [educational-portal] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2022-08-07 19:59:48.8463|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10,265ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [educational-portal];
2022-08-07 20:00:30.2118|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (40,414ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [educational-portal];
2022-08-07 20:00:30.3533|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (141ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [educational-portal] SET READ_COMMITTED_SNAPSHOT ON;
END;
2022-08-07 20:00:31.5175|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (133ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2022-08-07 20:00:32.4624|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Authors] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Authors] PRIMARY KEY ([Id])
);
2022-08-07 20:00:32.5858|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Extensions] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Extensions] PRIMARY KEY ([Id])
);
2022-08-07 20:00:32.7110|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Materials] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Link] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Materials] PRIMARY KEY ([Id])
);
2022-08-07 20:00:32.8348|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Qualities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Qualities] PRIMARY KEY ([Id])
);
2022-08-07 20:00:32.9585|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Resources] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Resources] PRIMARY KEY ([Id])
);
2022-08-07 20:00:33.0824|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Roles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_Roles] PRIMARY KEY ([Id])
);
2022-08-07 20:00:33.2058|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Skills] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Skills] PRIMARY KEY ([Id])
);
2022-08-07 20:00:33.3316|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UserToken] (
    [Id] int NOT NULL IDENTITY,
    [RefreshToken] nvarchar(max) NOT NULL,
    [RefreshTokenExpiryTime] datetime2 NOT NULL,
    CONSTRAINT [PK_UserToken] PRIMARY KEY ([Id])
);
2022-08-07 20:00:33.4632|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (131ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Books] (
    [Id] int NOT NULL,
    [PagesCount] int NOT NULL,
    [ExtensionId] int NOT NULL,
    [PublicationYear] int NOT NULL,
    CONSTRAINT [PK_Books] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Books_Extensions_ExtensionId] FOREIGN KEY ([ExtensionId]) REFERENCES [Extensions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Books_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id])
);
2022-08-07 20:00:33.5869|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Videos] (
    [Id] int NOT NULL,
    [Duration] datetime2 NOT NULL,
    [QualityId] int NOT NULL,
    CONSTRAINT [PK_Videos] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Videos_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id]),
    CONSTRAINT [FK_Videos_Qualities_QualityId] FOREIGN KEY ([QualityId]) REFERENCES [Qualities] ([Id]) ON DELETE CASCADE
);
2022-08-07 20:00:33.7118|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Articles] (
    [Id] int NOT NULL,
    [ResourceId] int NOT NULL,
    [PublicationDate] datetime2 NOT NULL,
    CONSTRAINT [PK_Articles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Articles_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id]),
    CONSTRAINT [FK_Articles_Resources_ResourceId] FOREIGN KEY ([ResourceId]) REFERENCES [Resources] ([Id]) ON DELETE CASCADE
);
2022-08-07 20:00:33.8367|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Position] nvarchar(max) NULL,
    [Avatar] nvarchar(max) NOT NULL,
    [Email] nvarchar(450) NOT NULL,
    [PasswordHash] nvarchar(max) NOT NULL,
    [Balance] int NOT NULL,
    [UserTokenId] int NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_UserToken_UserTokenId] FOREIGN KEY ([UserTokenId]) REFERENCES [UserToken] ([Id])
);
2022-08-07 20:00:33.9644|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AuthorBook] (
    [AuthorsId] int NOT NULL,
    [BooksId] int NOT NULL,
    CONSTRAINT [PK_AuthorBook] PRIMARY KEY ([AuthorsId], [BooksId]),
    CONSTRAINT [FK_AuthorBook_Authors_AuthorsId] FOREIGN KEY ([AuthorsId]) REFERENCES [Authors] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AuthorBook_Books_BooksId] FOREIGN KEY ([BooksId]) REFERENCES [Books] ([Id]) ON DELETE CASCADE
);
2022-08-07 20:00:34.0888|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Courses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Thumbnail] nvarchar(max) NOT NULL,
    [ShortDescription] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [Price] int NOT NULL,
    [AuthorId] nvarchar(450) NULL,
    CONSTRAINT [PK_Courses] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Courses_Users_AuthorId] FOREIGN KEY ([AuthorId]) REFERENCES [Users] ([Id])
);
2022-08-07 20:00:34.2161|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [MaterialsBaseUser] (
    [MaterialsId] int NOT NULL,
    [UsersId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_MaterialsBaseUser] PRIMARY KEY ([MaterialsId], [UsersId]),
    CONSTRAINT [FK_MaterialsBaseUser_Materials_MaterialsId] FOREIGN KEY ([MaterialsId]) REFERENCES [Materials] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_MaterialsBaseUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 20:00:34.3431|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [RoleUser] (
    [RolesId] int NOT NULL,
    [UsersId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_RoleUser] PRIMARY KEY ([RolesId], [UsersId]),
    CONSTRAINT [FK_RoleUser_Roles_RolesId] FOREIGN KEY ([RolesId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RoleUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 20:00:34.4692|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UsersSkills] (
    [UserId] nvarchar(450) NOT NULL,
    [SkillId] int NOT NULL,
    [Level] int NOT NULL,
    CONSTRAINT [PK_UsersSkills] PRIMARY KEY ([UserId], [SkillId]),
    CONSTRAINT [FK_UsersSkills_Skills_SkillId] FOREIGN KEY ([SkillId]) REFERENCES [Skills] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UsersSkills_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 20:00:34.5934|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CartItems] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NULL,
    [CourseId] int NOT NULL,
    CONSTRAINT [PK_CartItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_CartItems_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CartItems_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2022-08-07 20:00:34.7176|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CoursesMaterials] (
    [CourseId] int NOT NULL,
    [MaterialId] int NOT NULL,
    [Index] int NOT NULL,
    CONSTRAINT [PK_CoursesMaterials] PRIMARY KEY ([CourseId], [MaterialId]),
    CONSTRAINT [FK_CoursesMaterials_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CoursesMaterials_Materials_MaterialId] FOREIGN KEY ([MaterialId]) REFERENCES [Materials] ([Id]) ON DELETE CASCADE
);
2022-08-07 20:00:34.8418|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CoursesSkills] (
    [CourseId] int NOT NULL,
    [SkillId] int NOT NULL,
    CONSTRAINT [PK_CoursesSkills] PRIMARY KEY ([CourseId], [SkillId]),
    CONSTRAINT [FK_CoursesSkills_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CoursesSkills_Skills_SkillId] FOREIGN KEY ([SkillId]) REFERENCES [Skills] ([Id]) ON DELETE CASCADE
);
2022-08-07 20:00:34.9681|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [ShoppingHistory] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NULL,
    [CourseId] int NOT NULL,
    [Price] int NOT NULL,
    [Date] datetime2 NOT NULL,
    CONSTRAINT [PK_ShoppingHistory] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ShoppingHistory_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ShoppingHistory_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2022-08-07 20:00:35.0928|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UsersCourses] (
    [UserId] nvarchar(450) NOT NULL,
    [CourseId] int NOT NULL,
    [MaterialsCount] int NOT NULL,
    [LearnedMaterialsCount] int NOT NULL,
    CONSTRAINT [PK_UsersCourses] PRIMARY KEY ([UserId], [CourseId]),
    CONSTRAINT [FK_UsersCourses_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UsersCourses_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 20:00:35.2157|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Articles_ResourceId] ON [Articles] ([ResourceId]);
2022-08-07 20:00:35.3384|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_AuthorBook_BooksId] ON [AuthorBook] ([BooksId]);
2022-08-07 20:00:35.4616|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Books_ExtensionId] ON [Books] ([ExtensionId]);
2022-08-07 20:00:35.5865|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CartItems_CourseId] ON [CartItems] ([CourseId]);
2022-08-07 20:00:35.7097|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CartItems_UserId] ON [CartItems] ([UserId]);
2022-08-07 20:00:35.8326|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Courses_AuthorId] ON [Courses] ([AuthorId]);
2022-08-07 20:00:35.9558|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CoursesMaterials_MaterialId] ON [CoursesMaterials] ([MaterialId]);
2022-08-07 20:00:36.0820|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CoursesSkills_SkillId] ON [CoursesSkills] ([SkillId]);
2022-08-07 20:00:36.2053|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_MaterialsBaseUser_UsersId] ON [MaterialsBaseUser] ([UsersId]);
2022-08-07 20:00:36.3290|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Roles_Name] ON [Roles] ([Name]);
2022-08-07 20:00:36.4527|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_RoleUser_UsersId] ON [RoleUser] ([UsersId]);
2022-08-07 20:00:36.5781|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_ShoppingHistory_CourseId] ON [ShoppingHistory] ([CourseId]);
2022-08-07 20:00:36.7019|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_ShoppingHistory_UserId] ON [ShoppingHistory] ([UserId]);
2022-08-07 20:00:36.8254|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]);
2022-08-07 20:00:36.9517|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Users_UserTokenId] ON [Users] ([UserTokenId]);
2022-08-07 20:00:37.0749|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_UsersCourses_CourseId] ON [UsersCourses] ([CourseId]);
2022-08-07 20:00:37.2002|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_UsersSkills_SkillId] ON [UsersSkills] ([SkillId]);
2022-08-07 20:00:37.3229|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Videos_QualityId] ON [Videos] ([QualityId]);
2022-08-07 20:00:38.2000|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (221ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [Qualities] USING (
VALUES (@p0, 0),
(@p1, 1),
(@p2, 2),
(@p3, 3),
(@p4, 4),
(@p5, 5),
(@p6, 6),
(@p7, 7)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [i].[Id] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-08-07 20:00:38.7687|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:38.9043|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (128ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 20:00:40.5679|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (128ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Extensions] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Extensions]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:40.9649|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:41.4014|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:41.5303|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 20:00:41.6546|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 20:00:42.0545|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (128ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Resources] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Resources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:42.4382|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:42.5627|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 20:00:42.9580|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:43.0878|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:43.2103|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:43.5993|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:43.7237|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:43.8464|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:43.9842|INFO|EducationalPortal.Infrastructure.Services.Identity.PasswordHasher|Hashed password.
2022-08-07 20:00:44.3614|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (134ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Avatar], [Balance], [Email], [Name], [PasswordHash], [Position], [UserTokenId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2022-08-07 20:00:44.5092|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (141ms) [Parameters=[@p8='?' (DbType = Int32), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (Size = 450), @p12='?' (DbType = Int32), @p13='?' (Size = 450), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Size = 450), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Size = 450), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RoleUser] ([RolesId], [UsersId])
VALUES (@p8, @p9),
(@p10, @p11);
INSERT INTO [UsersSkills] ([SkillId], [UserId], [Level])
VALUES (@p12, @p13, @p14),
(@p15, @p16, @p17),
(@p18, @p19, @p20);
2022-08-07 20:00:44.9621|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:45.1093|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (141ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11),
(@p12, @p13, @p14);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p15, @p16),
(@p17, @p18),
(@p19, @p20);
2022-08-07 20:00:45.5039|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (128ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UsersCourses] ([CourseId], [UserId], [LearnedMaterialsCount], [MaterialsCount])
VALUES (@p0, @p1, @p2, @p3);
2022-08-07 20:00:45.8830|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (129ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [Skills] USING (
VALUES (@p0, 0),
(@p1, 1),
(@p2, 2),
(@p3, 3),
(@p4, 4),
(@p5, 5),
(@p6, 6),
(@p7, 7),
(@p8, 8)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [i].[Id] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-08-07 20:00:46.2556|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:46.3791|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 20:00:46.7516|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (121ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:46.8738|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 20:00:47.2441|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:47.3665|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 20:00:47.7366|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:48.1098|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:48.2316|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (121ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 20:00:48.3543|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 20:00:48.7245|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:49.0955|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:49.2181|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 20:00:49.3410|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 20:00:49.7113|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Resources] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Resources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:50.0817|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:50.2076|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 20:00:50.5833|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:50.7101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 20:00:51.0834|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:51.2132|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (129ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = Int32), @p32='?' (DbType = Int32), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = Int32), @p38='?' (DbType = Int32), @p39='?' (DbType = Int32), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11),
(@p12, @p13, @p14),
(@p15, @p16, @p17),
(@p18, @p19, @p20),
(@p21, @p22, @p23),
(@p24, @p25, @p26);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p27, @p28),
(@p29, @p30),
(@p31, @p32),
(@p33, @p34),
(@p35, @p36),
(@p37, @p38),
(@p39, @p40),
(@p41, @p42),
(@p43, @p44);
2022-08-07 20:00:51.5899|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:00:51.7182|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p12, @p13),
(@p14, @p15),
(@p16, @p17);
2022-08-07 20:00:52.7649|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\rareb\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-07 20:00:53.2147|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7106
2022-08-07 20:00:53.2147|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:7105
2022-08-07 20:00:53.2147|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2022-08-07 20:00:53.2147|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2022-08-07 20:00:53.2147|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\
2022-08-07 20:00:56.0917|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger - -
2022-08-07 20:00:56.3542|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger - - - 301 0 - 267.4588ms
2022-08-07 20:00:56.3542|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - -
2022-08-07 20:00:57.5126|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - - - 200 - text/html;charset=utf-8 1153.8256ms
2022-08-07 20:00:57.6366|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - -
2022-08-07 20:00:57.6560|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - -
2022-08-07 20:00:57.6560|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - -
2022-08-07 20:00:57.6803|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 20:00:57.6963|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 16.0052ms
2022-08-07 20:00:57.6963|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 20:00:57.8506|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-07 20:00:57.8506|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - - - 200 143943 text/css 215.9934ms
2022-08-07 20:00:57.8639|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-07 20:00:57.8639|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 208.2234ms
2022-08-07 20:00:57.9561|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-07 20:00:57.9561|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - - - 200 1095087 application/javascript 300.3266ms
2022-08-07 20:00:58.2243|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 527.7074ms
2022-08-07 20:00:58.6838|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - -
2022-08-07 20:00:59.2386|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 554.7185ms
2022-08-07 20:01:09.0967|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses - -
2022-08-07 20:01:09.4452|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 20:01:09.5002|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 20:01:09.5232|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 20:01:10.7780|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 20:01:10.7780|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 20:01:11.3060|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (160ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 20:01:11.5061|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 20:01:11.5493|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 20:01:11.9077|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 20:01:12.0564|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 2541.016ms
2022-08-07 20:01:12.0564|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 20:01:12.0839|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses - - - 200 818 application/json;+charset=utf-8 2987.1431ms
2022-08-07 20:03:31.9566|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 20:03:34.1903|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (286ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2022-08-07 20:03:35.2485|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [educational-portal] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2022-08-07 20:03:45.4869|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10,238ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [educational-portal];
2022-08-07 20:04:36.7521|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (50,334ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [educational-portal];
2022-08-07 20:04:36.8802|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [educational-portal] SET READ_COMMITTED_SNAPSHOT ON;
END;
2022-08-07 20:04:37.8940|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (138ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2022-08-07 20:04:38.4726|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Authors] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Authors] PRIMARY KEY ([Id])
);
2022-08-07 20:04:38.5996|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Extensions] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Extensions] PRIMARY KEY ([Id])
);
2022-08-07 20:04:38.7229|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Materials] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Link] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Materials] PRIMARY KEY ([Id])
);
2022-08-07 20:04:38.8471|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Qualities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Qualities] PRIMARY KEY ([Id])
);
2022-08-07 20:04:38.9705|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Resources] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Resources] PRIMARY KEY ([Id])
);
2022-08-07 20:04:39.1013|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (128ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Roles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_Roles] PRIMARY KEY ([Id])
);
2022-08-07 20:04:39.2254|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Skills] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Skills] PRIMARY KEY ([Id])
);
2022-08-07 20:04:39.3495|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UserToken] (
    [Id] int NOT NULL IDENTITY,
    [RefreshToken] nvarchar(max) NOT NULL,
    [RefreshTokenExpiryTime] datetime2 NOT NULL,
    CONSTRAINT [PK_UserToken] PRIMARY KEY ([Id])
);
2022-08-07 20:04:39.4743|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Books] (
    [Id] int NOT NULL,
    [PagesCount] int NOT NULL,
    [ExtensionId] int NOT NULL,
    [PublicationYear] int NOT NULL,
    CONSTRAINT [PK_Books] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Books_Extensions_ExtensionId] FOREIGN KEY ([ExtensionId]) REFERENCES [Extensions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Books_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id])
);
2022-08-07 20:04:39.5983|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Videos] (
    [Id] int NOT NULL,
    [Duration] datetime2 NOT NULL,
    [QualityId] int NOT NULL,
    CONSTRAINT [PK_Videos] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Videos_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id]),
    CONSTRAINT [FK_Videos_Qualities_QualityId] FOREIGN KEY ([QualityId]) REFERENCES [Qualities] ([Id]) ON DELETE CASCADE
);
2022-08-07 20:04:39.7229|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Articles] (
    [Id] int NOT NULL,
    [ResourceId] int NOT NULL,
    [PublicationDate] datetime2 NOT NULL,
    CONSTRAINT [PK_Articles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Articles_Materials_Id] FOREIGN KEY ([Id]) REFERENCES [Materials] ([Id]),
    CONSTRAINT [FK_Articles_Resources_ResourceId] FOREIGN KEY ([ResourceId]) REFERENCES [Resources] ([Id]) ON DELETE CASCADE
);
2022-08-07 20:04:39.8498|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Position] nvarchar(max) NULL,
    [Avatar] nvarchar(max) NOT NULL,
    [Email] nvarchar(450) NOT NULL,
    [PasswordHash] nvarchar(max) NOT NULL,
    [Balance] int NOT NULL,
    [UserTokenId] int NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_UserToken_UserTokenId] FOREIGN KEY ([UserTokenId]) REFERENCES [UserToken] ([Id])
);
2022-08-07 20:04:39.9746|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AuthorBook] (
    [AuthorsId] int NOT NULL,
    [BooksId] int NOT NULL,
    CONSTRAINT [PK_AuthorBook] PRIMARY KEY ([AuthorsId], [BooksId]),
    CONSTRAINT [FK_AuthorBook_Authors_AuthorsId] FOREIGN KEY ([AuthorsId]) REFERENCES [Authors] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AuthorBook_Books_BooksId] FOREIGN KEY ([BooksId]) REFERENCES [Books] ([Id]) ON DELETE CASCADE
);
2022-08-07 20:04:40.1027|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Courses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Thumbnail] nvarchar(max) NOT NULL,
    [ShortDescription] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [Price] int NOT NULL,
    [AuthorId] nvarchar(450) NULL,
    CONSTRAINT [PK_Courses] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Courses_Users_AuthorId] FOREIGN KEY ([AuthorId]) REFERENCES [Users] ([Id])
);
2022-08-07 20:04:40.2293|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [MaterialsBaseUser] (
    [MaterialsId] int NOT NULL,
    [UsersId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_MaterialsBaseUser] PRIMARY KEY ([MaterialsId], [UsersId]),
    CONSTRAINT [FK_MaterialsBaseUser_Materials_MaterialsId] FOREIGN KEY ([MaterialsId]) REFERENCES [Materials] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_MaterialsBaseUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 20:04:40.3548|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [RoleUser] (
    [RolesId] int NOT NULL,
    [UsersId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_RoleUser] PRIMARY KEY ([RolesId], [UsersId]),
    CONSTRAINT [FK_RoleUser_Roles_RolesId] FOREIGN KEY ([RolesId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RoleUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 20:04:40.4795|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UsersSkills] (
    [UserId] nvarchar(450) NOT NULL,
    [SkillId] int NOT NULL,
    [Level] int NOT NULL,
    CONSTRAINT [PK_UsersSkills] PRIMARY KEY ([UserId], [SkillId]),
    CONSTRAINT [FK_UsersSkills_Skills_SkillId] FOREIGN KEY ([SkillId]) REFERENCES [Skills] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UsersSkills_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 20:04:40.6042|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CartItems] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NULL,
    [CourseId] int NOT NULL,
    CONSTRAINT [PK_CartItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_CartItems_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CartItems_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2022-08-07 20:04:40.7309|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CoursesMaterials] (
    [CourseId] int NOT NULL,
    [MaterialId] int NOT NULL,
    [Index] int NOT NULL,
    CONSTRAINT [PK_CoursesMaterials] PRIMARY KEY ([CourseId], [MaterialId]),
    CONSTRAINT [FK_CoursesMaterials_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CoursesMaterials_Materials_MaterialId] FOREIGN KEY ([MaterialId]) REFERENCES [Materials] ([Id]) ON DELETE CASCADE
);
2022-08-07 20:04:40.8547|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [CoursesSkills] (
    [CourseId] int NOT NULL,
    [SkillId] int NOT NULL,
    CONSTRAINT [PK_CoursesSkills] PRIMARY KEY ([CourseId], [SkillId]),
    CONSTRAINT [FK_CoursesSkills_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_CoursesSkills_Skills_SkillId] FOREIGN KEY ([SkillId]) REFERENCES [Skills] ([Id]) ON DELETE CASCADE
);
2022-08-07 20:04:40.9806|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [ShoppingHistory] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NULL,
    [CourseId] int NOT NULL,
    [Price] int NOT NULL,
    [Date] datetime2 NOT NULL,
    CONSTRAINT [PK_ShoppingHistory] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ShoppingHistory_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ShoppingHistory_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2022-08-07 20:04:41.1058|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [UsersCourses] (
    [UserId] nvarchar(450) NOT NULL,
    [CourseId] int NOT NULL,
    [MaterialsCount] int NOT NULL,
    [LearnedMaterialsCount] int NOT NULL,
    CONSTRAINT [PK_UsersCourses] PRIMARY KEY ([UserId], [CourseId]),
    CONSTRAINT [FK_UsersCourses_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UsersCourses_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2022-08-07 20:04:41.2304|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Articles_ResourceId] ON [Articles] ([ResourceId]);
2022-08-07 20:04:41.3553|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_AuthorBook_BooksId] ON [AuthorBook] ([BooksId]);
2022-08-07 20:04:41.4963|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (139ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Books_ExtensionId] ON [Books] ([ExtensionId]);
2022-08-07 20:04:41.6209|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CartItems_CourseId] ON [CartItems] ([CourseId]);
2022-08-07 20:04:41.7478|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CartItems_UserId] ON [CartItems] ([UserId]);
2022-08-07 20:04:41.8733|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Courses_AuthorId] ON [Courses] ([AuthorId]);
2022-08-07 20:04:42.0811|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (208ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CoursesMaterials_MaterialId] ON [CoursesMaterials] ([MaterialId]);
2022-08-07 20:04:42.2160|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (135ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_CoursesSkills_SkillId] ON [CoursesSkills] ([SkillId]);
2022-08-07 20:04:42.3459|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (128ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_MaterialsBaseUser_UsersId] ON [MaterialsBaseUser] ([UsersId]);
2022-08-07 20:04:42.4815|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (135ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Roles_Name] ON [Roles] ([Name]);
2022-08-07 20:04:42.6112|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (128ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_RoleUser_UsersId] ON [RoleUser] ([UsersId]);
2022-08-07 20:04:42.7425|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (130ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_ShoppingHistory_CourseId] ON [ShoppingHistory] ([CourseId]);
2022-08-07 20:04:42.8657|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_ShoppingHistory_UserId] ON [ShoppingHistory] ([UserId]);
2022-08-07 20:04:42.9893|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]);
2022-08-07 20:04:43.1124|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Users_UserTokenId] ON [Users] ([UserTokenId]);
2022-08-07 20:04:43.2354|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_UsersCourses_CourseId] ON [UsersCourses] ([CourseId]);
2022-08-07 20:04:43.3603|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_UsersSkills_SkillId] ON [UsersSkills] ([SkillId]);
2022-08-07 20:04:43.4837|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Videos_QualityId] ON [Videos] ([QualityId]);
2022-08-07 20:04:44.3896|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (207ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [Qualities] USING (
VALUES (@p0, 0),
(@p1, 1),
(@p2, 2),
(@p3, 3),
(@p4, 4),
(@p5, 5),
(@p6, 6),
(@p7, 7)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [i].[Id] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-08-07 20:04:45.1339|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:45.2661|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 20:04:45.6612|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Extensions] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Extensions]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:46.0617|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:46.5673|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:46.6997|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 20:04:46.8241|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 20:04:47.2074|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Resources] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Resources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:47.5975|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:47.7220|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 20:04:48.1749|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:48.4751|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (297ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:48.7769|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (301ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Skills] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Skills]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:49.1831|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:49.3061|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:49.4308|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@p0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Roles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:49.5710|INFO|EducationalPortal.Infrastructure.Services.Identity.PasswordHasher|Hashed password.
2022-08-07 20:04:49.9539|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (137ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Avatar], [Balance], [Email], [Name], [PasswordHash], [Position], [UserTokenId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2022-08-07 20:04:50.1109|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (153ms) [Parameters=[@p8='?' (DbType = Int32), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (Size = 450), @p12='?' (DbType = Int32), @p13='?' (Size = 450), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Size = 450), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Size = 450), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RoleUser] ([RolesId], [UsersId])
VALUES (@p8, @p9),
(@p10, @p11);
INSERT INTO [UsersSkills] ([SkillId], [UserId], [Level])
VALUES (@p12, @p13, @p14),
(@p15, @p16, @p17),
(@p18, @p19, @p20);
2022-08-07 20:04:50.5949|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:50.7423|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (137ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11),
(@p12, @p13, @p14);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p15, @p16),
(@p17, @p18),
(@p19, @p20);
2022-08-07 20:04:51.1291|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UsersCourses] ([CourseId], [UserId], [LearnedMaterialsCount], [MaterialsCount])
VALUES (@p0, @p1, @p2, @p3);
2022-08-07 20:04:51.5093|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (128ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [Skills] USING (
VALUES (@p0, 0),
(@p1, 1),
(@p2, 2),
(@p3, 3),
(@p4, 4),
(@p5, 5),
(@p6, 6),
(@p7, 7),
(@p8, 8)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [i].[Id] FROM @inserted0 i
ORDER BY [i].[_Position];
2022-08-07 20:04:51.8788|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:52.0013|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 20:04:52.3755|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:52.4995|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 20:04:52.8811|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:53.0064|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Videos] ([Id], [Duration], [QualityId])
VALUES (@p2, @p3, @p4);
2022-08-07 20:04:53.3777|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:53.7490|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:53.8756|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 20:04:53.9978|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 20:04:54.3737|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Authors] ([FullName])
VALUES (@p0);
SELECT [Id]
FROM [Authors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:54.7486|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:54.8708|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [ExtensionId], [PagesCount], [PublicationYear])
VALUES (@p2, @p3, @p4, @p5);
2022-08-07 20:04:55.0130|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (142ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AuthorBook] ([AuthorsId], [BooksId])
VALUES (@p6, @p7);
2022-08-07 20:04:55.3875|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Resources] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Resources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:55.7596|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:55.8828|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 20:04:56.2563|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Materials] ([Link], [Name])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Materials]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:56.3828|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Articles] ([Id], [PublicationDate], [ResourceId])
VALUES (@p2, @p3, @p4);
2022-08-07 20:04:56.7589|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:56.8882|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (128ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = Int32), @p32='?' (DbType = Int32), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = Int32), @p38='?' (DbType = Int32), @p39='?' (DbType = Int32), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11),
(@p12, @p13, @p14),
(@p15, @p16, @p17),
(@p18, @p19, @p20),
(@p21, @p22, @p23),
(@p24, @p25, @p26);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p27, @p28),
(@p29, @p30),
(@p31, @p32),
(@p33, @p34),
(@p35, @p36),
(@p37, @p38),
(@p39, @p40),
(@p41, @p42),
(@p43, @p44);
2022-08-07 20:04:57.2603|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Courses] ([AuthorId], [Description], [Name], [Price], [ShortDescription], [Thumbnail])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [Id]
FROM [Courses]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 20:04:57.3886|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CoursesMaterials] ([CourseId], [MaterialId], [Index])
VALUES (@p6, @p7, @p8),
(@p9, @p10, @p11);
INSERT INTO [CoursesSkills] ([CourseId], [SkillId])
VALUES (@p12, @p13),
(@p14, @p15),
(@p16, @p17);
2022-08-07 20:04:57.8645|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\rareb\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-07 20:04:58.2579|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7106
2022-08-07 20:04:58.2579|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:7105
2022-08-07 20:04:58.2579|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2022-08-07 20:04:58.2579|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2022-08-07 20:04:58.2579|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\
2022-08-07 20:05:01.9303|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger - -
2022-08-07 20:05:02.1313|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger - - - 301 0 - 205.2495ms
2022-08-07 20:05:02.1313|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - -
2022-08-07 20:05:02.6739|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - - - 200 - text/html;charset=utf-8 530.7169ms
2022-08-07 20:05:02.6739|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - -
2022-08-07 20:05:02.7313|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - -
2022-08-07 20:05:02.7508|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-07 20:05:02.7647|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - - - 200 143943 text/css 89.7180ms
2022-08-07 20:05:02.7910|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - -
2022-08-07 20:05:02.7910|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-07 20:05:02.7910|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 20:05:02.8104|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-07 20:05:02.8104|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 19.7285ms
2022-08-07 20:05:02.8104|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - - - 200 1095087 application/javascript 79.9027ms
2022-08-07 20:05:02.8104|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 18.2913ms
2022-08-07 20:05:02.8955|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 20:05:03.0172|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 121.9705ms
2022-08-07 20:05:04.2226|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - -
2022-08-07 20:05:04.6218|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 399.3341ms
2022-08-07 20:05:19.3285|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses - -
2022-08-07 20:05:19.6177|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 20:05:19.6591|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 20:05:19.6879|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 20:05:20.8424|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 20:05:20.8424|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 20:05:21.2456|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (149ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 20:05:21.4420|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 20:05:21.4750|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 20:05:21.7548|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 20:05:21.8922|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 2220.9414ms
2022-08-07 20:05:21.8952|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 20:05:21.9206|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses - - - 200 818 application/json;+charset=utf-8 2592.0283ms
2022-08-07 20:49:24.2642|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\rareb\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-07 20:49:24.9891|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7106
2022-08-07 20:49:24.9891|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:7105
2022-08-07 20:49:24.9891|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2022-08-07 20:49:24.9891|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2022-08-07 20:49:24.9891|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\
2022-08-07 20:49:28.1589|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger - -
2022-08-07 20:49:28.3712|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger - - - 301 0 - 213.3411ms
2022-08-07 20:49:28.3712|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - -
2022-08-07 20:49:28.8543|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - -
2022-08-07 20:49:28.8543|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - -
2022-08-07 20:49:28.8543|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - -
2022-08-07 20:49:28.8543|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 20:49:28.8543|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - - - 200 - text/html;charset=utf-8 483.3427ms
2022-08-07 20:49:28.8639|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 20:49:28.8639|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 9.9216ms
2022-08-07 20:49:28.9875|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-07 20:49:28.9947|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - - - 200 143943 text/css 140.3258ms
2022-08-07 20:49:29.0775|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-07 20:49:29.0981|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 243.0541ms
2022-08-07 20:49:29.1218|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 257.8951ms
2022-08-07 20:49:29.1367|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-07 20:49:29.1367|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - - - 200 1095087 application/javascript 282.1266ms
2022-08-07 20:49:29.6153|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - -
2022-08-07 20:49:30.4098|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 794.4438ms
2022-08-07 20:49:38.9501|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses - -
2022-08-07 20:49:39.2231|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 20:49:39.3077|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 20:49:42.4157|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 20:49:43.6130|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 20:49:43.6130|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 20:49:46.0622|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (267ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 20:49:46.3741|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (141ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 20:49:46.4331|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 20:49:46.7495|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 20:49:46.8550|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 7540.5936ms
2022-08-07 20:49:46.8550|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 20:49:46.8797|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses - - - 200 818 application/json;+charset=utf-8 7929.5518ms
2022-08-07 20:50:40.6333|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\rareb\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-07 20:50:41.0995|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7106
2022-08-07 20:50:41.0995|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:7105
2022-08-07 20:50:41.0995|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2022-08-07 20:50:41.0995|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2022-08-07 20:50:41.0995|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\
2022-08-07 20:50:45.6033|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger - -
2022-08-07 20:50:45.8907|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger - - - 301 0 - 299.3274ms
2022-08-07 20:50:45.9083|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - -
2022-08-07 20:50:46.5033|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - -
2022-08-07 20:50:46.5242|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - -
2022-08-07 20:50:46.5242|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - -
2022-08-07 20:50:46.5441|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 20:50:46.5539|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - - - 200 - text/html;charset=utf-8 645.4783ms
2022-08-07 20:50:46.5539|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 20:50:46.6645|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 120.3908ms
2022-08-07 20:50:46.8298|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-07 20:50:46.8298|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-07 20:50:46.8298|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-07 20:50:46.8359|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - - - 200 1095087 application/javascript 311.6552ms
2022-08-07 20:50:46.8359|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 311.3856ms
2022-08-07 20:50:46.8359|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - - - 200 143943 text/css 332.9248ms
2022-08-07 20:50:46.9000|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 344.2135ms
2022-08-07 20:50:47.5412|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - -
2022-08-07 20:50:48.1654|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 624.2708ms
2022-08-07 20:50:59.6247|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/swagger/index.html - -
2022-08-07 20:50:59.7259|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/swagger/index.html - - - 200 - text/html;charset=utf-8 101.1456ms
2022-08-07 20:50:59.7259|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/swagger/swagger-ui.css - -
2022-08-07 20:50:59.7259|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/swagger/swagger-ui-bundle.js - -
2022-08-07 20:50:59.7259|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/swagger/swagger-ui-standalone-preset.js - -
2022-08-07 20:50:59.7387|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/_vs/browserLink - -
2022-08-07 20:50:59.7597|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-07 20:50:59.7597|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/swagger/swagger-ui-bundle.js - - - 200 1095087 application/javascript 25.2301ms
2022-08-07 20:50:59.8052|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 66.8724ms
2022-08-07 20:50:59.8382|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-07 20:50:59.8382|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 100.6288ms
2022-08-07 20:50:59.8382|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 20:50:59.8382|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 0.3162ms
2022-08-07 20:50:59.8382|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-07 20:50:59.8382|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/swagger/swagger-ui.css - - - 200 143943 text/css 108.6257ms
2022-08-07 20:51:00.4523|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/swagger/v1/swagger.json - -
2022-08-07 20:51:00.5279|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/swagger/favicon-32x32.png - -
2022-08-07 20:51:00.5279|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2022-08-07 20:51:00.5279|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/swagger/favicon-32x32.png - - - 200 628 image/png 1.1540ms
2022-08-07 20:51:00.5946|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 142.3261ms
2022-08-07 20:51:16.8291|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses - -
2022-08-07 20:51:17.1506|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 20:51:17.2125|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 20:51:19.8657|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 20:51:21.0478|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 20:51:21.0478|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 20:51:23.4262|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (298ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 20:51:23.6918|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (132ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 20:51:23.7995|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 20:51:24.1023|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 20:51:24.1865|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 6967.5191ms
2022-08-07 20:51:24.1865|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 20:51:24.2113|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses - - - 200 818 application/json;+charset=utf-8 7382.1273ms
2022-08-07 20:51:30.9693|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/api/courses - -
2022-08-07 20:51:31.0129|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 20:51:31.0286|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 20:51:31.1064|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 20:51:31.2760|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (155ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 20:51:31.3998|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 20:51:31.4250|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 20:51:31.4284|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 20:51:31.4284|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 402.3175ms
2022-08-07 20:51:31.4284|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 20:51:31.4284|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/api/courses - - - 200 818 application/json;+charset=utf-8 462.4878ms
2022-08-07 20:51:31.5163|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/favicon.ico - -
2022-08-07 20:51:31.5262|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/favicon.ico - - - 404 0 - 9.8556ms
2022-08-07 20:57:03.8441|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\rareb\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-07 20:57:06.8019|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7106
2022-08-07 20:57:06.8019|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:7105
2022-08-07 20:57:06.8019|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2022-08-07 20:57:06.8173|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2022-08-07 20:57:06.8173|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\
2022-08-07 20:57:10.3784|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger - -
2022-08-07 20:57:10.6988|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger - - - 301 0 - 329.0868ms
2022-08-07 20:57:10.7706|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - -
2022-08-07 20:57:11.4673|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - -
2022-08-07 20:57:11.4673|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - -
2022-08-07 20:57:11.4673|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - -
2022-08-07 20:57:11.4734|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - - - 200 - text/html;charset=utf-8 702.7197ms
2022-08-07 20:57:11.4922|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 20:57:11.4922|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 20:57:11.5702|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 78.0313ms
2022-08-07 20:57:11.7103|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-07 20:57:11.7103|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-07 20:57:11.7103|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 250.6532ms
2022-08-07 20:57:11.8176|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - - - 200 143943 text/css 350.3370ms
2022-08-07 20:57:11.8176|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-07 20:57:11.8176|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - - - 200 1095087 application/javascript 350.4095ms
2022-08-07 20:57:11.8813|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 382.1650ms
2022-08-07 20:57:12.7395|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - -
2022-08-07 20:57:13.6292|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 889.5955ms
2022-08-07 20:57:51.0643|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - -
2022-08-07 20:57:51.0951|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 20:57:52.3270|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 20:57:52.3270|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 20:57:52.3270|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/tokens/refresh - - - 204 - - 1266.1492ms
2022-08-07 20:57:52.3270|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 1235.5764ms
2022-08-07 20:57:52.4855|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 608
2022-08-07 20:57:52.4895|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 20:57:52.6482|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 20:57:52.6482|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 20:57:54.7370|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 608
2022-08-07 20:57:54.7480|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 20:57:54.9335|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 20:57:54.9335|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 20:57:55.2151|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Failed to validate the token.|Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-07 20:57:55.2151|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Failed to validate the token.|Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-07 20:57:55.2151|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Failed to validate the token.|Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-07 20:57:55.2151|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Failed to validate the token.|Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-07 20:57:55.3758|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-08-07 20:57:55.3758|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-08-07 20:57:55.3758|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-08-07 20:57:55.3758|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-08-07 20:57:55.3816|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 20:57:55.3816|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 20:57:55.3816|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 20:57:55.3816|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 20:57:55.4667|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 20:57:55.4667|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 20:57:55.4667|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 20:57:55.4667|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 20:57:56.0886|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 608.3318ms
2022-08-07 20:57:56.0886|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 20:57:56.2753|ERROR|EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware|Something went wrong: System.IO.IOException: The client reset the request stream.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.WebUtilities.FileBufferingReadStream.ReadAsync(Memory`1 buffer, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.WebUtilities.StreamHelperExtensions.DrainAsync(Stream stream, ArrayPool`1 bytePool, Nullable`1 limit, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\ExceptionHandling\ExceptionMiddleware.cs:line 25
2022-08-07 20:57:56.4135|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 608 - 500 - application/json 3927.9053ms
2022-08-07 20:57:56.5588|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 20:57:58.4801|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 20:57:58.4801|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 20:57:58.4801|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 20:57:59.2404|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 20:57:59.2404|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 20:57:59.7796|ERROR|Microsoft.EntityFrameworkCore.Database.Connection|An error occurred using the connection to database 'educational-portal' on server 'tcp:educational-portal.database.windows.net,1433'.
2022-08-07 20:57:59.8027|ERROR|Microsoft.EntityFrameworkCore.Query|An exception occurred while iterating over the results of a query for context type 'EducationalPortal.Infrastructure.EF.ApplicationContext'.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()|System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2022-08-07 20:58:00.1240|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 4656.5801ms
2022-08-07 20:58:00.1240|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 20:58:00.2235|ERROR|EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware|Something went wrong: System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at EducationalPortal.Infrastructure.Repositories.CoursesRepository.GetPageAsync(PageParameters pageParameters, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\Repositories\CoursesRepository.cs:line 92
   at EducationalPortal.Infrastructure.Services.CoursesService.GetPageAsync(PageParameters pageParameters, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\Services\CoursesService.cs:line 133
   at EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync(PageParameters pageParameters, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\Controllers\CoursesController.cs:line 25
   at lambda_method22(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\ExceptionHandling\ExceptionMiddleware.cs:line 25
2022-08-07 20:58:00.2649|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 500 - application/json 7616.6016ms
2022-08-07 20:58:02.4722|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (449ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 20:58:02.7814|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE 0 = 1
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 20:58:02.7814|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (130ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 20:58:03.0695|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 7602.563ms
2022-08-07 20:58:03.0695|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 20:58:03.3059|ERROR|EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware|Something went wrong: Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: SecurityToken has Expired
   at EducationalPortal.Infrastructure.Services.Identity.TokensService.RefreshAsync(TokensModel tokensModel, String email, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\Services\Identity\TokensService.cs:line 39
   at EducationalPortal.API.Controllers.TokensController.RefreshAsync(TokensModel tokensModel, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\Controllers\TokensController.cs:line 20
   at lambda_method24(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\ExceptionHandling\ExceptionMiddleware.cs:line 25
2022-08-07 20:58:03.3059|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/tokens/refresh application/json 608 - 500 - application/json 8569.4855ms
2022-08-07 20:58:03.3323|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 20:58:03.3641|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 20:58:03.5209|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 8053.7639ms
2022-08-07 20:58:03.5209|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 20:58:03.5209|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 8595.5505ms
2022-08-07 20:58:04.9769|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 20:58:04.9769|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 20:58:04.9769|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 3.4372ms
2022-08-07 20:58:04.9951|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 20:58:04.9951|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 20:58:04.9951|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Failed to validate the token.|Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-07 20:58:04.9951|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-08-07 20:58:04.9951|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 20:58:04.9951|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 20:58:05.1035|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 20:58:05.2688|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (149ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 20:58:05.3933|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 20:58:05.4122|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 20:58:05.4122|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 20:58:05.4122|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 416.5042ms
2022-08-07 20:58:05.4122|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 20:58:05.4122|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 422.1637ms
2022-08-07 20:58:23.4937|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses/2 - -
2022-08-07 20:58:23.5046|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 20:58:23.5046|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses/2 - - - 204 - - 11.1555ms
2022-08-07 20:58:23.5241|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/2 - -
2022-08-07 20:58:23.5241|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 20:58:23.5241|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Failed to validate the token.|Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-07 20:58:23.5241|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-08-07 20:58:23.5241|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 20:58:23.5447|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseDto] GetCourseAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 20:58:23.5447|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 20:58:23.6831|WARN|Microsoft.EntityFrameworkCore.Query|Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2022-08-07 20:58:23.9284|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (216ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 20:58:24.6471|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (156ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 20:58:24.8298|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (135ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 20:58:25.0133|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (135ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 20:58:25.1461|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 20:58:25.3627|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 20:58:25.4851|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 20:58:25.6116|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 20:58:25.7361|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 20:58:25.8628|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 20:58:25.9912|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 20:58:26.1184|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 20:58:26.2415|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 20:58:26.3646|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 20:58:26.4878|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 20:58:26.6146|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 20:58:26.8117|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (128ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 20:58:26.9440|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 20:58:27.0672|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 20:58:27.1921|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 20:58:27.3175|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 20:58:27.4436|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 20:58:27.6250|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE 0 = 1
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 20:58:27.7137|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course with id: 2.
2022-08-07 20:58:27.7137|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseDto'.
2022-08-07 20:58:27.7649|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API) in 4220.0429ms
2022-08-07 20:58:27.7649|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 20:58:27.7649|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/2 - - - 200 3435 application/json;+charset=utf-8 4241.1168ms
2022-08-07 20:58:50.5374|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 OPTIONS http://localhost:7105/api/tokens/refresh - -
2022-08-07 20:58:50.5374|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 20:58:50.5566|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 OPTIONS http://localhost:7105/api/tokens/refresh - - - 204 - - 19.2558ms
2022-08-07 20:58:50.6870|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 OPTIONS http://localhost:7105/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 20:58:50.6870|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST http://localhost:7105/api/tokens/refresh application/json 608
2022-08-07 20:58:50.6870|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 20:58:50.6870|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 20:58:50.6870|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 OPTIONS http://localhost:7105/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 0.5666ms
2022-08-07 20:58:50.8184|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Failed to validate the token.|Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-07 20:58:50.8184|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 20:58:50.8184|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-08-07 20:58:50.8184|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 20:58:50.8184|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 20:58:50.8184|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Refresh", controller = "Tokens"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] RefreshAsync(EducationalPortal.Application.Models.TokensModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.TokensController (EducationalPortal.API).
2022-08-07 20:58:50.8184|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Failed to validate the token.|Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-07 20:58:50.8184|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-08-07 20:58:50.8184|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 20:58:50.8184|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 20:58:50.8184|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 20:58:50.8184|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Returned data from expired access token.
2022-08-07 20:58:50.8184|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 20:58:50.9518|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE 0 = 1
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 20:58:51.0192|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (175ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 20:58:51.2889|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API) in 469.6629ms
2022-08-07 20:58:51.2889|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 20:58:51.2889|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.TokensController.RefreshAsync (EducationalPortal.API)'
2022-08-07 20:58:51.5308|ERROR|EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware|Something went wrong: Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: SecurityToken has Expired
   at EducationalPortal.Infrastructure.Services.Identity.TokensService.RefreshAsync(TokensModel tokensModel, String email, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\Services\Identity\TokensService.cs:line 39
   at EducationalPortal.API.Controllers.TokensController.RefreshAsync(TokensModel tokensModel, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\Controllers\TokensController.cs:line 20
   at lambda_method24(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\ExceptionHandling\ExceptionMiddleware.cs:line 25
2022-08-07 20:58:51.5308|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST http://localhost:7105/api/tokens/refresh application/json 608 - 500 - application/json 844.9720ms
2022-08-07 20:58:51.5308|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 20:58:51.5308|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 20:58:51.5308|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 714.6068ms
2022-08-07 20:58:51.5356|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 20:58:51.5356|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 717.3745ms
2022-08-07 20:58:58.7560|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 OPTIONS http://localhost:7105/api/account/login - -
2022-08-07 20:58:58.7560|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 20:58:58.7560|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 OPTIONS http://localhost:7105/api/account/login - - - 204 - - 4.3546ms
2022-08-07 20:58:58.7560|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST http://localhost:7105/api/account/login application/json 85
2022-08-07 20:58:58.7560|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 20:58:58.7560|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Failed to validate the token.|Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-07 20:58:58.7560|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-08-07 20:58:58.7560|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API)'
2022-08-07 20:58:58.7743|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] LoginAsync(EducationalPortal.Application.Models.LoginModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 20:58:58.7743|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 20:58:59.0407|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (150ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 20:58:59.3019|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API) in 527.3876ms
2022-08-07 20:58:59.3019|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API)'
2022-08-07 20:58:59.4902|ERROR|EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware|Entity not found: EducationalPortal.Application.Exceptions.NotFoundException: "User" was not found.
   at EducationalPortal.Infrastructure.Services.Identity.UserManager.LoginAsync(LoginModel login, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\Services\Identity\UserManager.cs:line 71
   at EducationalPortal.Infrastructure.Services.AccountService.LoginAsync(LoginModel login, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\Services\AccountService.cs:line 54
   at EducationalPortal.API.Controllers.AccountController.LoginAsync(LoginModel model, CancellationToken cancellationToken) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\Controllers\AccountController.cs:line 86
   at lambda_method669(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\ExceptionHandling\ExceptionMiddleware.cs:line 25
2022-08-07 20:58:59.4902|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST http://localhost:7105/api/account/login application/json 85 - 404 - application/json 728.2572ms
2022-08-07 20:59:24.5468|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 OPTIONS http://localhost:7105/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 20:59:24.5543|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 20:59:24.5543|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 OPTIONS http://localhost:7105/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 8.4099ms
2022-08-07 20:59:24.5794|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 20:59:24.5820|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 20:59:24.5820|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Failed to validate the token.|Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-07 20:59:24.5820|INFO|Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler|Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-08-07 20:59:24.5820|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 20:59:24.5820|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 20:59:24.5820|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 20:59:24.7519|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (148ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 20:59:24.8812|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (128ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 20:59:24.8812|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 20:59:24.8812|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 20:59:24.8812|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 304.5977ms
2022-08-07 20:59:24.8812|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 20:59:24.8812|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 312.3221ms
2022-08-07 22:05:49.8946|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\rareb\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-07 22:05:51.0501|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7106
2022-08-07 22:05:51.0532|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:7105
2022-08-07 22:05:51.0532|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2022-08-07 22:05:51.0532|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2022-08-07 22:05:51.0532|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\
2022-08-07 22:05:55.4700|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger - -
2022-08-07 22:05:56.0755|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger - - - 301 0 - 611.9735ms
2022-08-07 22:05:56.2427|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - -
2022-08-07 22:05:57.2180|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - -
2022-08-07 22:05:57.2593|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 22:05:57.2593|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - -
2022-08-07 22:05:57.2593|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - -
2022-08-07 22:05:57.2765|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - - - 200 - text/html;charset=utf-8 1033.7661ms
2022-08-07 22:05:57.2881|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 22:05:57.2881|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 25.9172ms
2022-08-07 22:05:57.7947|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-07 22:05:57.7947|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 534.9369ms
2022-08-07 22:05:57.7947|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-07 22:05:57.8312|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - - - 200 143943 text/css 613.2011ms
2022-08-07 22:05:57.9975|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-07 22:05:57.9975|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - - - 200 1095087 application/javascript 738.5094ms
2022-08-07 22:05:58.0060|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 717.8784ms
2022-08-07 22:05:58.7541|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - -
2022-08-07 22:05:59.2478|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 493.6811ms
2022-08-07 22:08:23.9603|INFO|Microsoft.AspNetCore.SpaServices|Starting @angular/cli on port 59042...
2022-08-07 22:08:24.5910|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\rareb\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-07 22:08:24.9951|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7106
2022-08-07 22:08:24.9951|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:7105
2022-08-07 22:08:24.9951|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2022-08-07 22:08:24.9951|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2022-08-07 22:08:24.9951|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\
2022-08-07 22:08:27.7532|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger - -
2022-08-07 22:08:27.9392|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger - - - 301 0 - 183.2885ms
2022-08-07 22:08:27.9422|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - -
2022-08-07 22:08:28.4028|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - -
2022-08-07 22:08:28.4028|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - -
2022-08-07 22:08:28.4028|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 22:08:28.4028|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - -
2022-08-07 22:08:28.4130|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 10.0763ms
2022-08-07 22:08:28.4130|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 22:08:28.4664|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - - - 200 - text/html;charset=utf-8 524.1816ms
2022-08-07 22:08:28.5820|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-07 22:08:28.5820|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-07 22:08:28.5820|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - - - 200 143943 text/css 194.6647ms
2022-08-07 22:08:28.6045|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 201.5365ms
2022-08-07 22:08:28.6729|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-07 22:08:28.6772|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - - - 200 1095087 application/javascript 274.3793ms
2022-08-07 22:08:28.6772|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 275.0802ms
2022-08-07 22:08:29.1282|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - -
2022-08-07 22:08:29.6590|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 530.9269ms
2022-08-07 22:08:35.5707|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/courses - -
2022-08-07 22:08:35.6146|ERROR|Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware|An unhandled exception has occurred while executing the request.|System.InvalidOperationException: Failed to start 'npm'. To resolve this:.

[1] Ensure that 'npm' is installed and can be found in one of the PATH directories.
    Current PATH enviroment variable is: C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Windows\System32\OpenSSH\;C:\Program Files\Microsoft SQL Server\150\Tools\Binn\;C:\Program Files\Microsoft SQL Server\Client SDK\ODBC\170\Tools\Binn\;C:\Program Files\dotnet\;C:\Program Files (x86)\Microsoft SQL Server\150\DTS\Binn\;C:\Program Files\Azure Data Studio\bin;C:\Program Files\Docker\Docker\resources\bin;C:\ProgramData\DockerDesktop\version-bin;C:\Program Files\nodejs\;C:\Users\rareb\anaconda3;C:\Users\rareb\anaconda3\Library\mingw-w64\bin;C:\Users\rareb\anaconda3\Library\usr\bin;C:\Users\rareb\anaconda3\Library\bin;C:\Users\rareb\anaconda3\Scripts;C:\Users\rareb\AppData\Local\Microsoft\WindowsApps;C:\Users\rareb\AppData\Local\Programs\Microsoft VS Code\bin;C:\Users\rareb\.dotnet\tools;C:\Program Files\Azure Data Studio\bin;C:\Users\rareb\AppData\Roaming\npm;C:\Users\rareb\AppData\Local\Programs\Azure Data Studio\bin
    Make sure the executable is in one of those directories, or update your PATH.

[2] See the InnerException for further details of the cause.
 ---> System.ComponentModel.Win32Exception (267): An error occurred trying to start process 'cmd' with working directory '../EducationalPortal.App'. The directory name is invalid.
   at System.Diagnostics.Process.StartWithCreateProcess(ProcessStartInfo startInfo)
   at System.Diagnostics.Process.Start()
   at System.Diagnostics.Process.Start(ProcessStartInfo startInfo)
   at Microsoft.AspNetCore.NodeServices.Npm.NodeScriptRunner.LaunchNodeProcess(ProcessStartInfo startInfo, String commandName)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.NodeServices.Npm.NodeScriptRunner.LaunchNodeProcess(ProcessStartInfo startInfo, String commandName)
   at Microsoft.AspNetCore.NodeServices.Npm.NodeScriptRunner..ctor(String workingDirectory, String scriptName, String arguments, IDictionary`2 envVars, String pkgManagerCommand, DiagnosticSource diagnosticSource, CancellationToken applicationStoppingToken)
   at Microsoft.AspNetCore.SpaServices.AngularCli.AngularCliMiddleware.StartAngularCliServerAsync(String sourcePath, String scriptName, String pkgManagerCommand, Int32 portNumber, ILogger logger, DiagnosticSource diagnosticSource, CancellationToken applicationStoppingToken)
2022-08-07 22:08:35.8004|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/courses - - - 500 - text/html;+charset=utf-8 229.6471ms
2022-08-07 22:08:35.8476|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 22:08:35.8482|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 22:08:35.8482|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 0.7681ms
2022-08-07 22:08:35.8851|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 36.8176ms
2022-08-07 22:08:36.0581|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/favicon.ico - -
2022-08-07 22:08:36.0581|ERROR|Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware|An unhandled exception has occurred while executing the request.|System.InvalidOperationException: Failed to start 'npm'. To resolve this:.

[1] Ensure that 'npm' is installed and can be found in one of the PATH directories.
    Current PATH enviroment variable is: C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Windows\System32\OpenSSH\;C:\Program Files\Microsoft SQL Server\150\Tools\Binn\;C:\Program Files\Microsoft SQL Server\Client SDK\ODBC\170\Tools\Binn\;C:\Program Files\dotnet\;C:\Program Files (x86)\Microsoft SQL Server\150\DTS\Binn\;C:\Program Files\Azure Data Studio\bin;C:\Program Files\Docker\Docker\resources\bin;C:\ProgramData\DockerDesktop\version-bin;C:\Program Files\nodejs\;C:\Users\rareb\anaconda3;C:\Users\rareb\anaconda3\Library\mingw-w64\bin;C:\Users\rareb\anaconda3\Library\usr\bin;C:\Users\rareb\anaconda3\Library\bin;C:\Users\rareb\anaconda3\Scripts;C:\Users\rareb\AppData\Local\Microsoft\WindowsApps;C:\Users\rareb\AppData\Local\Programs\Microsoft VS Code\bin;C:\Users\rareb\.dotnet\tools;C:\Program Files\Azure Data Studio\bin;C:\Users\rareb\AppData\Roaming\npm;C:\Users\rareb\AppData\Local\Programs\Azure Data Studio\bin
    Make sure the executable is in one of those directories, or update your PATH.

[2] See the InnerException for further details of the cause.
 ---> System.ComponentModel.Win32Exception (267): An error occurred trying to start process 'cmd' with working directory '../EducationalPortal.App'. The directory name is invalid.
   at System.Diagnostics.Process.StartWithCreateProcess(ProcessStartInfo startInfo)
   at System.Diagnostics.Process.Start()
   at System.Diagnostics.Process.Start(ProcessStartInfo startInfo)
   at Microsoft.AspNetCore.NodeServices.Npm.NodeScriptRunner.LaunchNodeProcess(ProcessStartInfo startInfo, String commandName)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.NodeServices.Npm.NodeScriptRunner.LaunchNodeProcess(ProcessStartInfo startInfo, String commandName)
   at Microsoft.AspNetCore.NodeServices.Npm.NodeScriptRunner..ctor(String workingDirectory, String scriptName, String arguments, IDictionary`2 envVars, String pkgManagerCommand, DiagnosticSource diagnosticSource, CancellationToken applicationStoppingToken)
   at Microsoft.AspNetCore.SpaServices.AngularCli.AngularCliMiddleware.StartAngularCliServerAsync(String sourcePath, String scriptName, String pkgManagerCommand, Int32 portNumber, ILogger logger, DiagnosticSource diagnosticSource, CancellationToken applicationStoppingToken)
2022-08-07 22:08:36.0675|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/favicon.ico - - - 500 - text/plain;+charset=utf-8 9.3768ms
2022-08-07 22:17:38.1206|INFO|Microsoft.AspNetCore.SpaServices|Starting @angular/cli on port 59509...
2022-08-07 22:17:38.8809|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\rareb\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-07 22:17:39.3257|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7106
2022-08-07 22:17:39.3257|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:7105
2022-08-07 22:17:39.3257|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2022-08-07 22:17:39.3257|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2022-08-07 22:17:39.3257|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\
2022-08-07 22:17:39.7717|ERROR|Microsoft.AspNetCore.SpaServices|npm WARN config global `--global`, `--local` are deprecated. Use `--location=global` instead.

2022-08-07 22:17:43.0532|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger - -
2022-08-07 22:17:43.2971|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger - - - 301 0 - 246.1914ms
2022-08-07 22:17:43.3019|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - -
2022-08-07 22:17:43.4792|INFO|Microsoft.AspNetCore.SpaServices|> educational-portal.app@0.0.0 start

2022-08-07 22:17:43.4792|INFO|Microsoft.AspNetCore.SpaServices|> ng serve

2022-08-07 22:17:44.1311|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - - - 200 - text/html;charset=utf-8 829.3222ms
2022-08-07 22:17:44.1911|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - -
2022-08-07 22:17:44.1911|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - -
2022-08-07 22:17:44.1911|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - -
2022-08-07 22:17:44.3158|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 22:17:44.3171|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 22:17:45.6924|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 1376.6018ms
2022-08-07 22:17:46.7011|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-07 22:17:46.7011|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-07 22:17:46.7011|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 2507.1905ms
2022-08-07 22:17:46.7011|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - - - 200 143943 text/css 2507.5866ms
2022-08-07 22:17:48.5422|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-07 22:17:48.5422|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - - - 200 1095087 application/javascript 4351.7001ms
2022-08-07 22:17:48.5582|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 4241.1020ms
2022-08-07 22:17:50.1629|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - -
2022-08-07 22:17:51.0324|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/courses - -
2022-08-07 22:17:52.3405|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 2177.6022ms
2022-08-07 22:18:05.7252|ERROR|Microsoft.AspNetCore.SpaServices|- Generating browser application bundles (phase: setup)...

2022-08-07 22:18:13.0284|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/courses - -
2022-08-07 22:18:18.8145|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/courses - -
2022-08-07 22:18:40.7383|ERROR|Microsoft.AspNetCore.SpaServices|ΓêÜ Browser application bundle generation complete.

2022-08-07 22:18:40.9617|INFO|Microsoft.AspNetCore.SpaServices|Initial Chunk Files   | Names         |  Raw Size

2022-08-07 22:18:40.9617|INFO|Microsoft.AspNetCore.SpaServices|vendor.js             | vendor        |   2.35 MB |

2022-08-07 22:18:40.9617|INFO|Microsoft.AspNetCore.SpaServices|main.js               | main          | 388.06 kB |

2022-08-07 22:18:40.9617|INFO|Microsoft.AspNetCore.SpaServices|polyfills.js          | polyfills     | 294.87 kB |

2022-08-07 22:18:40.9617|INFO|Microsoft.AspNetCore.SpaServices|styles.css, styles.js | styles        | 173.25 kB |

2022-08-07 22:18:40.9617|INFO|Microsoft.AspNetCore.SpaServices|runtime.js            | runtime       |   6.54 kB |

2022-08-07 22:18:40.9617|INFO|Microsoft.AspNetCore.SpaServices|| Initial Total |   3.19 MB

2022-08-07 22:18:40.9617|INFO|Microsoft.AspNetCore.SpaServices|Build at: 2022-08-07T19:18:40.731Z - Hash: f7c13121c88076a8 - Time: 32381ms

2022-08-07 22:18:40.9617|INFO|Microsoft.AspNetCore.SpaServices|** Angular Live Development Server is listening on localhost:59509, open your browser on http://localhost:59509/ **

2022-08-07 22:18:41.5636|INFO|Microsoft.AspNetCore.SpaServices|ΓêÜ Compiled successfully.

2022-08-07 22:18:43.9194|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/courses - - - 0 - - 52887.0344ms
2022-08-07 22:18:43.9194|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/courses - - - 0 - - 30894.6278ms
2022-08-07 22:18:47.3471|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/courses - - - 200 - text/html;+charset=utf-8 28532.4753ms
2022-08-07 22:18:47.5004|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/styles.css - -
2022-08-07 22:18:47.5709|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/runtime.js - -
2022-08-07 22:18:47.5709|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/polyfills.js - -
2022-08-07 22:18:47.5843|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/vendor.js - -
2022-08-07 22:18:47.5843|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/main.js - -
2022-08-07 22:18:47.5990|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/styles.js - -
2022-08-07 22:18:47.5990|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 22:18:47.5990|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 22:18:47.5990|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 0.5727ms
2022-08-07 22:18:47.5990|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/styles.css - - - 200 737 text/css;+charset=utf-8 102.0320ms
2022-08-07 22:18:47.6248|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/runtime.js - - - 200 6696 application/javascript;+charset=utf-8 53.8545ms
2022-08-07 22:18:47.8018|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/polyfills.js - - - 200 301943 application/javascript;+charset=utf-8 230.6012ms
2022-08-07 22:18:48.0136|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/ws - -
2022-08-07 22:18:48.0136|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/runtime.js.map - -
2022-08-07 22:18:48.8066|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/polyfills.js.map - -
2022-08-07 22:18:49.2502|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 1648.4927ms
2022-08-07 22:18:49.2502|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/vendor.js - - - 200 2462581 application/javascript;+charset=utf-8 1666.4066ms
2022-08-07 22:18:49.3590|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/main.js - - - 200 397375 application/javascript;+charset=utf-8 1772.8720ms
2022-08-07 22:18:49.3822|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/styles.js - - - 200 176668 application/javascript;+charset=utf-8 1782.7442ms
2022-08-07 22:18:49.5075|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/runtime.js.map - - - 200 5719 application/json;+charset=utf-8 1494.1796ms
2022-08-07 22:18:49.5075|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/vendor.js.map - -
2022-08-07 22:18:49.5335|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/polyfills.js.map - - - 200 368440 application/json;+charset=utf-8 726.8644ms
2022-08-07 22:18:49.5840|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/main.js.map - -
2022-08-07 22:18:49.6181|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/vendor.js.map - - - 200 3242823 application/json;+charset=utf-8 97.3712ms
2022-08-07 22:18:49.6181|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/main.js.map - - - 200 220820 application/json;+charset=utf-8 38.6162ms
2022-08-07 22:18:49.7771|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 22:18:49.7963|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/api/courses?pageSize=3&pageNumber=1 - - - 404 150 text/html;+charset=utf-8 19.2042ms
2022-08-07 22:18:49.9847|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/favicon.ico - -
2022-08-07 22:18:50.0016|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/favicon.ico - - - 200 948 image/vnd.microsoft.icon 16.9660ms
2022-08-07 22:18:50.7753|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/styles.js.map - -
2022-08-07 22:18:50.7753|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/styles.js.map - - - 200 225660 application/json;+charset=utf-8 9.5144ms
2022-08-07 22:20:55.6722|INFO|Microsoft.AspNetCore.SpaServices|Starting @angular/cli on port 59729...
2022-08-07 22:20:56.4175|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\rareb\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-07 22:20:56.9372|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7106
2022-08-07 22:20:56.9372|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:7105
2022-08-07 22:20:56.9372|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2022-08-07 22:20:56.9372|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2022-08-07 22:20:56.9372|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\
2022-08-07 22:20:57.5755|ERROR|Microsoft.AspNetCore.SpaServices|npm WARN config global `--global`, `--local` are deprecated. Use `--location=global` instead.

2022-08-07 22:20:59.5984|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger - -
2022-08-07 22:20:59.7563|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger - - - 301 0 - 162.7365ms
2022-08-07 22:20:59.7563|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - -
2022-08-07 22:20:59.8892|INFO|Microsoft.AspNetCore.SpaServices|> educational-portal.app@0.0.0 start

2022-08-07 22:20:59.8892|INFO|Microsoft.AspNetCore.SpaServices|> ng serve

2022-08-07 22:21:00.4551|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - -
2022-08-07 22:21:00.4592|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - -
2022-08-07 22:21:00.5228|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - -
2022-08-07 22:21:00.5423|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 22:21:00.5541|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 22:21:00.7173|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - - - 200 - text/html;charset=utf-8 957.5863ms
2022-08-07 22:21:00.7173|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 177.9286ms
2022-08-07 22:21:00.9538|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-07 22:21:00.9538|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-07 22:21:00.9577|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - - - 200 143943 text/css 502.6053ms
2022-08-07 22:21:00.9577|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 435.1475ms
2022-08-07 22:21:01.1322|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-07 22:21:01.1322|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - - - 200 1095087 application/javascript 673.2008ms
2022-08-07 22:21:01.2094|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 655.2749ms
2022-08-07 22:21:01.7243|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - -
2022-08-07 22:21:02.4495|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 725.0759ms
2022-08-07 22:21:11.3824|ERROR|Microsoft.AspNetCore.SpaServices|- Generating browser application bundles (phase: setup)...

2022-08-07 22:21:35.6972|ERROR|Microsoft.AspNetCore.SpaServices|ΓêÜ Browser application bundle generation complete.

2022-08-07 22:21:36.0566|INFO|Microsoft.AspNetCore.SpaServices|Initial Chunk Files   | Names         |  Raw Size

2022-08-07 22:21:36.0566|INFO|Microsoft.AspNetCore.SpaServices|vendor.js             | vendor        |   2.35 MB |

2022-08-07 22:21:36.0566|INFO|Microsoft.AspNetCore.SpaServices|main.js               | main          | 388.04 kB |

2022-08-07 22:21:36.0566|INFO|Microsoft.AspNetCore.SpaServices|polyfills.js          | polyfills     | 294.87 kB |

2022-08-07 22:21:36.0566|INFO|Microsoft.AspNetCore.SpaServices|styles.css, styles.js | styles        | 173.25 kB |

2022-08-07 22:21:36.0566|INFO|Microsoft.AspNetCore.SpaServices|runtime.js            | runtime       |   6.54 kB |

2022-08-07 22:21:36.0566|INFO|Microsoft.AspNetCore.SpaServices|| Initial Total |   3.19 MB

2022-08-07 22:21:36.2939|INFO|Microsoft.AspNetCore.SpaServices|Build at: 2022-08-07T19:21:35.687Z - Hash: b67450d4910cb75e - Time: 23184ms

2022-08-07 22:21:36.3013|INFO|Microsoft.AspNetCore.SpaServices|** Angular Live Development Server is listening on localhost:59729, open your browser on http://localhost:59729/ **

2022-08-07 22:21:36.4694|INFO|Microsoft.AspNetCore.SpaServices|ΓêÜ Compiled successfully.

2022-08-07 22:21:56.2271|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/courses - -
2022-08-07 22:21:58.3960|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/courses - - - 200 - text/html;+charset=utf-8 2169.2300ms
2022-08-07 22:21:58.5063|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/styles.css - -
2022-08-07 22:21:58.5063|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/runtime.js - -
2022-08-07 22:21:58.5063|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/polyfills.js - -
2022-08-07 22:21:58.5063|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/vendor.js - -
2022-08-07 22:21:58.5063|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/styles.css - - - 200 737 text/css;+charset=utf-8 9.4182ms
2022-08-07 22:21:58.5477|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/main.js - -
2022-08-07 22:21:58.5724|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 22:21:58.5724|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 0.9153ms
2022-08-07 22:21:58.5724|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/styles.js - -
2022-08-07 22:21:58.5844|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 22:21:58.5844|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/runtime.js - - - 200 6696 application/javascript;+charset=utf-8 75.5172ms
2022-08-07 22:21:58.6109|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/polyfills.js - - - 200 301943 application/javascript;+charset=utf-8 97.0929ms
2022-08-07 22:21:58.9479|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/ws - -
2022-08-07 22:21:59.0777|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/runtime.js.map - -
2022-08-07 22:21:59.0828|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/polyfills.js.map - -
2022-08-07 22:21:59.0828|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 510.0021ms
2022-08-07 22:21:59.1316|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/vendor.js - - - 200 2462581 application/javascript;+charset=utf-8 617.5668ms
2022-08-07 22:21:59.1715|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/main.js - - - 200 397354 application/javascript;+charset=utf-8 640.6533ms
2022-08-07 22:21:59.1955|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/styles.js - - - 200 176668 application/javascript;+charset=utf-8 622.0368ms
2022-08-07 22:21:59.3274|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/runtime.js.map - - - 200 5719 application/json;+charset=utf-8 249.6967ms
2022-08-07 22:21:59.3403|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/polyfills.js.map - - - 200 368440 application/json;+charset=utf-8 257.4238ms
2022-08-07 22:21:59.3993|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/vendor.js.map - -
2022-08-07 22:21:59.7064|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 22:21:59.7127|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/vendor.js.map - - - 200 3242823 application/json;+charset=utf-8 313.3121ms
2022-08-07 22:21:59.9256|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 404 150 text/html;+charset=utf-8 219.2499ms
2022-08-07 22:22:00.2603|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/main.js.map - -
2022-08-07 22:22:00.3642|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/main.js.map - - - 200 220796 application/json;+charset=utf-8 103.9347ms
2022-08-07 22:22:00.9647|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/styles.js.map - -
2022-08-07 22:22:00.9772|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/styles.js.map - - - 200 225660 application/json;+charset=utf-8 12.4894ms
2022-08-07 22:22:05.5302|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/styles.css - -
2022-08-07 22:22:05.5401|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/styles.css - - - 304 - - 9.9086ms
2022-08-07 22:22:05.6865|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/runtime.js.map - -
2022-08-07 22:22:05.6985|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/runtime.js.map - - - 200 5719 application/json;+charset=utf-8 11.9364ms
2022-08-07 22:22:05.6985|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/polyfills.js.map - -
2022-08-07 22:22:05.6985|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/vendor.js.map - -
2022-08-07 22:22:05.7099|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/main.js.map - -
2022-08-07 22:22:05.7099|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/styles.js.map - -
2022-08-07 22:22:05.8211|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/styles.css.map - -
2022-08-07 22:22:05.9662|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/styles.js.map - - - 200 225660 application/json;+charset=utf-8 252.6908ms
2022-08-07 22:22:05.9662|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/styles.css.map - - - 200 235 application/json;+charset=utf-8 150.5392ms
2022-08-07 22:22:05.9925|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/main.js.map - - - 200 220796 application/json;+charset=utf-8 282.5845ms
2022-08-07 22:22:05.9925|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/polyfills.js.map - - - 200 368440 application/json;+charset=utf-8 288.6342ms
2022-08-07 22:22:06.1817|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/vendor.js.map - - - 200 3242823 application/json;+charset=utf-8 475.8844ms
2022-08-07 22:22:47.3190|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses - -
2022-08-07 22:22:47.3369|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses - - - 200 - text/html;+charset=utf-8 18.1819ms
2022-08-07 22:22:47.4380|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/styles.css - -
2022-08-07 22:22:47.4612|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/runtime.js - -
2022-08-07 22:22:47.4612|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/main.js - -
2022-08-07 22:22:47.5219|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/styles.css - - - 200 737 text/css;+charset=utf-8 83.8755ms
2022-08-07 22:22:47.5219|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 22:22:47.5219|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/styles.js - -
2022-08-07 22:22:47.5400|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/ws - - - 101 - - 48597.7857ms
2022-08-07 22:22:47.5674|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/vendor.js - -
2022-08-07 22:22:47.5674|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 22:22:47.5674|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/polyfills.js - -
2022-08-07 22:22:47.6874|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/styles.css.map - -
2022-08-07 22:22:47.7971|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/runtime.js - - - 200 6696 application/javascript;+charset=utf-8 335.7229ms
2022-08-07 22:22:47.8064|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 226.8653ms
2022-08-07 22:22:47.8614|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/main.js - - - 200 397354 application/javascript;+charset=utf-8 400.1722ms
2022-08-07 22:22:47.8691|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/runtime.js.map - -
2022-08-07 22:22:47.8798|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/runtime.js.map - -
2022-08-07 22:22:47.9167|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/styles.js - - - 200 176668 application/javascript;+charset=utf-8 392.6494ms
2022-08-07 22:22:47.9284|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/styles.css.map - - - 200 235 application/json;+charset=utf-8 241.0326ms
2022-08-07 22:22:47.9550|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/main.js.map - -
2022-08-07 22:22:47.9727|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/main.js.map - -
2022-08-07 22:22:48.3542|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 830.1962ms
2022-08-07 22:22:48.6154|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/vendor.js - - - 200 2462581 application/javascript;+charset=utf-8 1047.8765ms
2022-08-07 22:22:48.6565|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/polyfills.js - - - 200 301943 application/javascript;+charset=utf-8 1075.9537ms
2022-08-07 22:22:48.6658|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/runtime.js.map - - - 200 5719 application/json;+charset=utf-8 796.7284ms
2022-08-07 22:22:48.6984|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/polyfills.js.map - -
2022-08-07 22:22:48.6984|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/polyfills.js.map - -
2022-08-07 22:22:48.6984|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/runtime.js.map - - - 200 5719 application/json;+charset=utf-8 826.7909ms
2022-08-07 22:22:48.7153|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/ws - -
2022-08-07 22:22:48.7230|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/main.js.map - - - 200 220796 application/json;+charset=utf-8 767.9473ms
2022-08-07 22:22:48.7230|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/main.js.map - - - 200 220796 application/json;+charset=utf-8 757.5028ms
2022-08-07 22:22:48.7530|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/polyfills.js.map - - - 200 368440 application/json;+charset=utf-8 54.6380ms
2022-08-07 22:22:48.7646|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/polyfills.js.map - - - 200 368440 application/json;+charset=utf-8 65.8843ms
2022-08-07 22:22:48.8811|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/styles.js.map - -
2022-08-07 22:22:48.9190|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/vendor.js.map - -
2022-08-07 22:22:48.9190|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/styles.js.map - - - 200 225660 application/json;+charset=utf-8 43.6065ms
2022-08-07 22:22:48.9971|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/vendor.js.map - -
2022-08-07 22:22:48.9971|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/styles.js.map - -
2022-08-07 22:22:49.0937|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/vendor.js.map - - - 200 3242823 application/json;+charset=utf-8 174.6679ms
2022-08-07 22:22:49.1897|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/vendor.js.map - - - 200 3242823 application/json;+charset=utf-8 192.6009ms
2022-08-07 22:22:49.1988|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/styles.js.map - - - 200 225660 application/json;+charset=utf-8 198.3674ms
2022-08-07 22:22:56.5213|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/courses - -
2022-08-07 22:22:56.5428|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/courses - - - 200 - text/html;+charset=utf-8 21.4729ms
2022-08-07 22:22:56.6918|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/polyfills.js - -
2022-08-07 22:22:56.6918|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/styles.css - -
2022-08-07 22:22:56.6918|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/runtime.js - -
2022-08-07 22:22:56.7079|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/vendor.js - -
2022-08-07 22:22:56.7079|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/runtime.js - - - 200 6696 application/javascript;+charset=utf-8 16.3479ms
2022-08-07 22:22:56.7605|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/main.js - -
2022-08-07 22:22:56.7605|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 22:22:56.7736|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/styles.js - -
2022-08-07 22:22:56.7736|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 22:22:56.8998|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/runtime.js.map - -
2022-08-07 22:22:56.9284|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/runtime.js.map - -
2022-08-07 22:22:57.0508|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 284.7042ms
2022-08-07 22:22:57.0508|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/runtime.js.map - - - 200 5719 application/json;+charset=utf-8 164.3274ms
2022-08-07 22:22:57.0897|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/ws - - - 101 - - 8374.4632ms
2022-08-07 22:22:57.1999|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/styles.css - - - 200 737 text/css;+charset=utf-8 507.9389ms
2022-08-07 22:22:57.1999|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/styles.js - - - 200 176668 application/javascript;+charset=utf-8 427.5847ms
2022-08-07 22:22:57.2503|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/styles.css.map - -
2022-08-07 22:22:57.2678|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - -
2022-08-07 22:22:57.2774|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/styles.css.map - - - 200 235 application/json;+charset=utf-8 27.1610ms
2022-08-07 22:22:57.3663|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/runtime.js.map - - - 200 5719 application/json;+charset=utf-8 437.9193ms
2022-08-07 22:22:57.3663|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - - - 200 - text/html;charset=utf-8 107.3678ms
2022-08-07 22:22:57.3663|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 603.6995ms
2022-08-07 22:22:57.3663|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/polyfills.js - - - 200 301943 application/javascript;+charset=utf-8 686.2415ms
2022-08-07 22:22:57.3785|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/main.js - - - 200 397354 application/javascript;+charset=utf-8 617.9434ms
2022-08-07 22:22:57.3960|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/vendor.js - - - 200 2462581 application/javascript;+charset=utf-8 688.0712ms
2022-08-07 22:22:57.3960|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - -
2022-08-07 22:22:57.3960|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - -
2022-08-07 22:22:57.3960|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - -
2022-08-07 22:22:57.3960|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 22:22:57.4123|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 22:22:57.4123|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 7.5470ms
2022-08-07 22:22:57.4830|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-07 22:22:57.4946|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - - - 200 143943 text/css 93.3865ms
2022-08-07 22:22:57.4946|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-07 22:22:57.4946|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 95.5263ms
2022-08-07 22:22:57.7014|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-07 22:22:57.7014|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - - - 200 1095087 application/javascript 301.6121ms
2022-08-07 22:22:57.7014|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 292.4470ms
2022-08-07 22:22:58.6547|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - -
2022-08-07 22:22:58.8548|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 200.0303ms
2022-08-07 22:23:07.5160|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses - -
2022-08-07 22:23:07.5217|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses - - - 404 150 text/html;+charset=utf-8 5.7120ms
2022-08-07 22:24:20.1305|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/shopping-cart - -
2022-08-07 22:24:22.1962|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/shopping-cart - - - 404 156 text/html;+charset=utf-8 2065.6182ms
2022-08-07 22:24:30.6688|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/videos - -
2022-08-07 22:24:32.7057|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/videos - - - 404 149 text/html;+charset=utf-8 2036.8114ms
2022-08-07 22:25:55.0680|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/api/courses - -
2022-08-07 22:25:57.1314|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/api/courses - - - 200 - text/html;+charset=utf-8 2062.2315ms
2022-08-07 22:25:57.2015|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/styles.css - -
2022-08-07 22:25:57.2015|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/runtime.js - -
2022-08-07 22:25:57.2129|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/styles.css - - - 200 737 text/css;+charset=utf-8 11.4012ms
2022-08-07 22:25:57.2129|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/vendor.js - -
2022-08-07 22:25:57.2129|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/runtime.js - - - 200 6696 application/javascript;+charset=utf-8 15.6608ms
2022-08-07 22:25:57.2129|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/polyfills.js - -
2022-08-07 22:25:57.2129|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/main.js - -
2022-08-07 22:25:57.2129|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 22:25:57.2129|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 0.3886ms
2022-08-07 22:25:57.2230|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/styles.js - -
2022-08-07 22:25:57.2465|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/_vs/browserLink - -
2022-08-07 22:25:57.2465|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/polyfills.js - - - 200 301943 application/javascript;+charset=utf-8 31.7089ms
2022-08-07 22:25:57.4203|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/ws - -
2022-08-07 22:25:57.4968|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 250.3066ms
2022-08-07 22:25:57.5338|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/vendor.js - - - 200 2462581 application/javascript;+charset=utf-8 320.7861ms
2022-08-07 22:25:57.5531|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/main.js - - - 200 397354 application/javascript;+charset=utf-8 335.0195ms
2022-08-07 22:25:57.5832|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/styles.js - - - 200 176668 application/javascript;+charset=utf-8 360.2134ms
2022-08-07 22:25:57.9441|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/favicon.ico - -
2022-08-07 22:25:57.9441|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/favicon.ico - - - 200 948 image/vnd.microsoft.icon 5.7156ms
2022-08-07 22:26:01.9473|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 22:26:01.9473|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/api/courses?pageSize=3&pageNumber=1 - - - 404 150 text/html;+charset=utf-8 9.0988ms
2022-08-07 22:26:05.0188|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/styles.css - -
2022-08-07 22:26:05.0314|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/styles.css - - - 304 - - 12.5873ms
2022-08-07 22:26:05.8798|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/runtime.js.map - -
2022-08-07 22:26:05.8798|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/polyfills.js.map - -
2022-08-07 22:26:05.8979|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/runtime.js.map - - - 200 5719 application/json;+charset=utf-8 18.0417ms
2022-08-07 22:26:05.9147|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/vendor.js.map - -
2022-08-07 22:26:05.9845|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/styles.js.map - -
2022-08-07 22:26:06.0506|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/main.js.map - -
2022-08-07 22:26:06.0684|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/polyfills.js.map - - - 200 368440 application/json;+charset=utf-8 178.3128ms
2022-08-07 22:26:06.1204|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/styles.js.map - - - 200 225660 application/json;+charset=utf-8 135.8657ms
2022-08-07 22:26:06.1506|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/main.js.map - - - 200 220796 application/json;+charset=utf-8 100.0100ms
2022-08-07 22:26:06.1791|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/vendor.js.map - - - 200 3242823 application/json;+charset=utf-8 262.5106ms
2022-08-07 22:26:06.2056|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/styles.css.map - -
2022-08-07 22:26:06.2147|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/styles.css.map - - - 200 235 application/json;+charset=utf-8 9.1172ms
2022-08-07 22:33:09.8889|INFO|Microsoft.AspNetCore.SpaServices|Starting @angular/cli on port 60454...
2022-08-07 22:33:10.7618|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\rareb\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-07 22:33:11.7184|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7106
2022-08-07 22:33:11.7184|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:7105
2022-08-07 22:33:11.7184|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2022-08-07 22:33:11.7184|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2022-08-07 22:33:11.7184|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\
2022-08-07 22:33:12.1842|ERROR|Microsoft.AspNetCore.SpaServices|npm WARN config global `--global`, `--local` are deprecated. Use `--location=global` instead.

2022-08-07 22:33:15.9399|INFO|Microsoft.AspNetCore.SpaServices|> educational-portal.app@0.0.0 start

2022-08-07 22:33:15.9399|INFO|Microsoft.AspNetCore.SpaServices|> ng serve

2022-08-07 22:33:21.1343|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger - -
2022-08-07 22:33:21.4822|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger - - - 301 0 - 334.6937ms
2022-08-07 22:33:21.9203|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - -
2022-08-07 22:33:23.1111|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - - - 200 - text/html;charset=utf-8 1190.6623ms
2022-08-07 22:33:23.8456|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - -
2022-08-07 22:33:23.8540|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - -
2022-08-07 22:33:23.8540|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - -
2022-08-07 22:33:23.9222|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 22:33:23.9347|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 22:33:23.9726|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 50.3687ms
2022-08-07 22:33:24.1110|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-07 22:33:24.1110|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 257.2956ms
2022-08-07 22:33:24.1110|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-07 22:33:24.1141|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - - - 200 143943 text/css 268.3458ms
2022-08-07 22:33:24.3020|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-07 22:33:24.3020|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - - - 200 1095087 application/javascript 448.2929ms
2022-08-07 22:33:24.4145|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 479.7645ms
2022-08-07 22:33:25.1171|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - -
2022-08-07 22:33:25.8892|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 772.1473ms
2022-08-07 22:33:36.0854|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses - -
2022-08-07 22:33:39.4133|ERROR|Microsoft.AspNetCore.SpaServices|- Generating browser application bundles (phase: setup)...

2022-08-07 22:34:09.7628|ERROR|Microsoft.AspNetCore.SpaServices|ΓêÜ Browser application bundle generation complete.

2022-08-07 22:34:09.9547|INFO|Microsoft.AspNetCore.SpaServices|Initial Chunk Files   | Names         |  Raw Size

2022-08-07 22:34:09.9547|INFO|Microsoft.AspNetCore.SpaServices|vendor.js             | vendor        |   2.35 MB |

2022-08-07 22:34:09.9547|INFO|Microsoft.AspNetCore.SpaServices|main.js               | main          | 388.04 kB |

2022-08-07 22:34:09.9547|INFO|Microsoft.AspNetCore.SpaServices|polyfills.js          | polyfills     | 294.87 kB |

2022-08-07 22:34:09.9547|INFO|Microsoft.AspNetCore.SpaServices|styles.css, styles.js | styles        | 173.25 kB |

2022-08-07 22:34:09.9547|INFO|Microsoft.AspNetCore.SpaServices|runtime.js            | runtime       |   6.54 kB |

2022-08-07 22:34:09.9547|INFO|Microsoft.AspNetCore.SpaServices|| Initial Total |   3.19 MB

2022-08-07 22:34:09.9547|INFO|Microsoft.AspNetCore.SpaServices|Build at: 2022-08-07T19:34:09.747Z - Hash: b67450d4910cb75e - Time: 28802ms

2022-08-07 22:34:09.9569|INFO|Microsoft.AspNetCore.SpaServices|** Angular Live Development Server is listening on localhost:60454, open your browser on http://localhost:60454/ **

2022-08-07 22:34:10.1786|INFO|Microsoft.AspNetCore.SpaServices|ΓêÜ Compiled successfully.

2022-08-07 22:34:15.9234|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses - - - 404 150 text/html;+charset=utf-8 39837.9370ms
2022-08-07 22:34:46.4003|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 OPTIONS http://localhost:7105/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 22:34:46.4152|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 22:34:46.5277|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 OPTIONS http://localhost:7105/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 127.3712ms
2022-08-07 22:34:46.5277|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:7105/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 22:34:46.5277|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 22:34:46.5470|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET http://localhost:7105/api/courses?pageSize=3&pageNumber=1 - - - 307 0 - 16.6541ms
2022-08-07 22:34:46.6263|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 22:34:46.6263|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 22:34:46.6312|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 204 - - 4.7677ms
2022-08-07 22:34:46.6655|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 22:34:46.6655|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 22:34:48.9190|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 404 150 text/html;+charset=utf-8 2253.4721ms
2022-08-07 22:36:58.4053|INFO|Microsoft.AspNetCore.SpaServices|Starting @angular/cli on port 60836...
2022-08-07 22:36:59.1957|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\rareb\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-07 22:36:59.8916|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7106
2022-08-07 22:36:59.8916|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:7105
2022-08-07 22:36:59.8916|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2022-08-07 22:36:59.8916|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2022-08-07 22:36:59.8916|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\
2022-08-07 22:37:01.2107|ERROR|Microsoft.AspNetCore.SpaServices|npm WARN config global `--global`, `--local` are deprecated. Use `--location=global` instead.

2022-08-07 22:37:04.3687|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger - -
2022-08-07 22:37:04.5999|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger - - - 301 0 - 234.5042ms
2022-08-07 22:37:04.6420|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - -
2022-08-07 22:37:05.2696|INFO|Microsoft.AspNetCore.SpaServices|> educational-portal.app@0.0.0 start

2022-08-07 22:37:05.2696|INFO|Microsoft.AspNetCore.SpaServices|> ng serve

2022-08-07 22:37:05.2809|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - - - 200 - text/html;charset=utf-8 638.6693ms
2022-08-07 22:37:05.2809|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - -
2022-08-07 22:37:05.2850|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - -
2022-08-07 22:37:05.2850|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - -
2022-08-07 22:37:05.3968|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 22:37:05.3968|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 22:37:05.4885|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 91.6460ms
2022-08-07 22:37:05.6251|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-07 22:37:05.6251|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - - - 200 143943 text/css 340.4866ms
2022-08-07 22:37:05.6251|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-07 22:37:05.6251|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 340.3056ms
2022-08-07 22:37:05.8657|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-07 22:37:05.8657|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - - - 200 1095087 application/javascript 583.0543ms
2022-08-07 22:37:06.0292|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 632.0958ms
2022-08-07 22:37:06.5925|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - -
2022-08-07 22:37:07.2528|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 661.6147ms
2022-08-07 22:37:15.4043|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses - -
2022-08-07 22:37:16.3648|ERROR|EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware|Something went wrong: System.InvalidOperationException: Endpoint EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) contains authorization metadata, but a middleware was not found that supports authorization.
Configure your application startup by adding app.UseAuthorization() in the application startup code. If there are calls to app.UseRouting() and app.UseEndpoints(...), the call to app.UseAuthorization() must go between them.
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.ThrowMissingAuthMiddlewareException(Endpoint endpoint)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\ExceptionHandling\ExceptionMiddleware.cs:line 25
2022-08-07 22:37:16.8676|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses - - - 500 - application/json 1463.3034ms
2022-08-07 22:37:23.0840|ERROR|Microsoft.AspNetCore.SpaServices|- Generating browser application bundles (phase: setup)...

2022-08-07 22:37:43.0327|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses - -
2022-08-07 22:37:43.1689|ERROR|EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware|Something went wrong: System.InvalidOperationException: Endpoint EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) contains authorization metadata, but a middleware was not found that supports authorization.
Configure your application startup by adding app.UseAuthorization() in the application startup code. If there are calls to app.UseRouting() and app.UseEndpoints(...), the call to app.UseAuthorization() must go between them.
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.ThrowMissingAuthMiddlewareException(Endpoint endpoint)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at EducationalPortal.Infrastructure.ExceptionHandling.ExceptionMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.Infrastructure\ExceptionHandling\ExceptionMiddleware.cs:line 25
2022-08-07 22:37:43.1689|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses - - - 500 - application/json 136.6188ms
2022-08-07 22:38:01.8762|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses - -
2022-08-07 22:38:55.3706|INFO|Microsoft.AspNetCore.SpaServices|Starting @angular/cli on port 60982...
2022-08-07 22:38:55.8100|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\rareb\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-07 22:38:56.4925|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7106
2022-08-07 22:38:56.4925|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:7105
2022-08-07 22:38:56.4925|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2022-08-07 22:38:56.4925|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2022-08-07 22:38:56.4925|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\
2022-08-07 22:38:57.5959|ERROR|Microsoft.AspNetCore.SpaServices|npm WARN config global `--global`, `--local` are deprecated. Use `--location=global` instead.

2022-08-07 22:39:00.1880|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger - -
2022-08-07 22:39:00.4484|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger - - - 301 0 - 291.6569ms
2022-08-07 22:39:00.5170|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - -
2022-08-07 22:39:01.0071|INFO|Microsoft.AspNetCore.SpaServices|> educational-portal.app@0.0.0 start

2022-08-07 22:39:01.0071|INFO|Microsoft.AspNetCore.SpaServices|> ng serve

2022-08-07 22:39:01.2077|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - -
2022-08-07 22:39:01.2077|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - -
2022-08-07 22:39:01.2077|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - -
2022-08-07 22:39:01.2077|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - - - 200 - text/html;charset=utf-8 701.3696ms
2022-08-07 22:39:01.2725|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 22:39:01.2725|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 22:39:01.3028|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 30.3213ms
2022-08-07 22:39:01.3894|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-07 22:39:01.3894|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-07 22:39:01.4048|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 196.5594ms
2022-08-07 22:39:01.4048|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - - - 200 143943 text/css 197.2645ms
2022-08-07 22:39:01.5892|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 316.4688ms
2022-08-07 22:39:01.6024|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-07 22:39:01.6024|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - - - 200 1095087 application/javascript 394.4131ms
2022-08-07 22:39:03.1788|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - -
2022-08-07 22:39:03.6795|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 500.6927ms
2022-08-07 22:39:14.2171|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses - -
2022-08-07 22:39:16.8611|ERROR|Microsoft.AspNetCore.SpaServices|- Generating browser application bundles (phase: setup)...

2022-08-07 22:39:17.1699|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 22:39:17.2561|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 22:39:21.9491|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 22:39:28.2521|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 22:39:28.2596|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 22:39:31.6967|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (396ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 22:39:32.1004|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (136ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 22:39:32.1654|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 22:39:32.5863|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 22:39:32.7151|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 15433.3298ms
2022-08-07 22:39:32.7235|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 22:39:32.7614|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses - - - 200 818 application/json;+charset=utf-8 18544.2670ms
2022-08-07 22:39:39.7026|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/courses - -
2022-08-07 22:39:50.0927|ERROR|Microsoft.AspNetCore.SpaServices|ΓêÜ Browser application bundle generation complete.

2022-08-07 22:39:50.3844|INFO|Microsoft.AspNetCore.SpaServices|Initial Chunk Files   | Names         |  Raw Size

2022-08-07 22:39:50.3844|INFO|Microsoft.AspNetCore.SpaServices|vendor.js             | vendor        |   2.35 MB |

2022-08-07 22:39:50.3844|INFO|Microsoft.AspNetCore.SpaServices|main.js               | main          | 388.04 kB |

2022-08-07 22:39:50.3844|INFO|Microsoft.AspNetCore.SpaServices|polyfills.js          | polyfills     | 294.87 kB |

2022-08-07 22:39:50.3844|INFO|Microsoft.AspNetCore.SpaServices|styles.css, styles.js | styles        | 173.25 kB |

2022-08-07 22:39:50.3844|INFO|Microsoft.AspNetCore.SpaServices|runtime.js            | runtime       |   6.54 kB |

2022-08-07 22:39:50.3844|INFO|Microsoft.AspNetCore.SpaServices|| Initial Total |   3.19 MB

2022-08-07 22:39:50.3844|INFO|Microsoft.AspNetCore.SpaServices|Build at: 2022-08-07T19:39:50.085Z - Hash: b67450d4910cb75e - Time: 33341ms

2022-08-07 22:39:50.3844|INFO|Microsoft.AspNetCore.SpaServices|** Angular Live Development Server is listening on localhost:60982, open your browser on http://localhost:60982/ **

2022-08-07 22:39:50.6320|INFO|Microsoft.AspNetCore.SpaServices|ΓêÜ Compiled successfully.

2022-08-07 22:39:56.2635|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/courses - - - 200 - text/html;+charset=utf-8 16560.9590ms
2022-08-07 22:39:56.6761|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/styles.css - -
2022-08-07 22:39:56.6761|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/styles.css - - - 200 737 text/css;+charset=utf-8 14.3727ms
2022-08-07 22:39:57.0852|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/runtime.js - -
2022-08-07 22:39:57.0852|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 22:39:57.4875|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/polyfills.js - -
2022-08-07 22:39:57.4875|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 22:39:57.5132|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/vendor.js - -
2022-08-07 22:39:57.5132|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 22:39:57.8534|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/runtime.js - - - 200 6696 application/javascript;+charset=utf-8 768.2346ms
2022-08-07 22:39:57.9802|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/polyfills.js - - - 200 301943 application/javascript;+charset=utf-8 492.6514ms
2022-08-07 22:39:57.9902|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/main.js - -
2022-08-07 22:39:57.9902|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 22:39:58.1397|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/vendor.js - - - 200 2462581 application/javascript;+charset=utf-8 626.4243ms
2022-08-07 22:39:58.1719|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/main.js - - - 200 397354 application/javascript;+charset=utf-8 181.7243ms
2022-08-07 22:39:58.3496|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/runtime.js.map - -
2022-08-07 22:39:58.4542|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/runtime.js.map - - - 200 5719 application/json;+charset=utf-8 104.4500ms
2022-08-07 22:39:58.5330|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 22:39:58.5330|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 1.2542ms
2022-08-07 22:39:58.8091|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/polyfills.js.map - -
2022-08-07 22:39:59.9416|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/polyfills.js.map - - - 200 368440 application/json;+charset=utf-8 1132.5494ms
2022-08-07 22:40:01.0550|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/main.js.map - -
2022-08-07 22:40:01.0550|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/main.js.map - - - 200 220796 application/json;+charset=utf-8 8.1861ms
2022-08-07 22:40:01.6625|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/styles.js - -
2022-08-07 22:40:01.6625|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/styles.js - - - 200 176668 application/javascript;+charset=utf-8 11.7741ms
2022-08-07 22:40:01.8030|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 22:40:01.8297|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 26.7182ms
2022-08-07 22:40:02.3804|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/vendor.js.map - -
2022-08-07 22:40:02.4982|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/vendor.js.map - - - 200 3242823 application/json;+charset=utf-8 117.7804ms
2022-08-07 22:40:03.2965|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/ws - -
2022-08-07 22:40:03.2965|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 22:40:03.3914|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/styles.js.map - -
2022-08-07 22:40:03.3965|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/styles.js.map - - - 200 225660 application/json;+charset=utf-8 5.0510ms
2022-08-07 22:40:03.7362|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 22:40:03.7435|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 22:40:03.7435|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 22:40:03.9844|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 22:40:04.2857|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (200ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 22:40:04.4099|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 22:40:04.4169|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 22:40:04.4169|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 22:40:04.4169|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 676.6221ms
2022-08-07 22:40:04.4169|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 22:40:04.4169|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 685.2536ms
2022-08-07 22:40:06.8653|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/2 - -
2022-08-07 22:40:06.8653|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 22:40:06.8653|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseDto] GetCourseAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 22:40:06.9021|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 22:40:07.3211|WARN|Microsoft.EntityFrameworkCore.Query|Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2022-08-07 22:40:07.5326|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (157ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 22:40:08.1669|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 22:40:08.2998|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 22:40:08.4449|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 22:40:08.5766|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (128ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 22:40:08.7239|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 22:40:08.8474|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 22:40:08.9709|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 22:40:09.0938|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 22:40:09.2220|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 22:40:09.3513|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 22:40:09.4921|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (140ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 22:40:09.6255|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (132ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 22:40:09.7520|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 22:40:09.8789|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 22:40:09.8972|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 22:40:09.8972|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 22:40:09.8972|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 22:40:09.8972|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 22:40:10.0116|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (132ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 22:40:10.1493|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 22:40:10.2783|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (128ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 22:40:10.4128|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (132ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 22:40:10.5447|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (129ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 22:40:10.6747|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 22:40:10.8002|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 22:40:10.9364|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 22:40:10.9531|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE 0 = 1
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 22:40:11.0004|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course with id: 2.
2022-08-07 22:40:11.0004|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseDto'.
2022-08-07 22:40:11.0322|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API) in 4158.5131ms
2022-08-07 22:40:11.0322|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 22:40:11.0322|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/2 - - - 200 3435 application/json;+charset=utf-8 4167.3294ms
2022-08-07 22:40:11.0599|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 22:40:11.0599|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 22:40:11.0599|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 22:40:11.0599|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 1166.3607ms
2022-08-07 22:40:11.0599|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 22:40:11.0599|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 1166.9948ms
2022-08-07 22:53:29.9422|INFO|Microsoft.AspNetCore.SpaServices|Starting @angular/cli on port 61359...
2022-08-07 22:53:30.4354|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\rareb\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-07 22:53:31.2418|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7106
2022-08-07 22:53:31.2418|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:7105
2022-08-07 22:53:31.2418|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2022-08-07 22:53:31.2418|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2022-08-07 22:53:31.2418|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\
2022-08-07 22:53:32.0427|ERROR|Microsoft.AspNetCore.SpaServices|npm WARN config global `--global`, `--local` are deprecated. Use `--location=global` instead.

2022-08-07 22:53:35.2611|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger - -
2022-08-07 22:53:35.5670|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger - - - 301 0 - 277.7912ms
2022-08-07 22:53:35.6301|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - -
2022-08-07 22:53:35.7493|INFO|Microsoft.AspNetCore.SpaServices|> educational-portal.app@0.0.0 start

2022-08-07 22:53:35.7493|INFO|Microsoft.AspNetCore.SpaServices|> ng serve

2022-08-07 22:53:36.4396|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - -
2022-08-07 22:53:36.4396|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - -
2022-08-07 22:53:36.4424|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - - - 200 - text/html;charset=utf-8 812.2953ms
2022-08-07 22:53:36.4396|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - -
2022-08-07 22:53:36.7688|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 22:53:36.7688|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 22:53:36.9092|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 140.3952ms
2022-08-07 22:53:37.0030|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-07 22:53:37.1401|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-07 22:53:37.1401|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 700.1769ms
2022-08-07 22:53:37.2096|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - - - 200 143943 text/css 770.0441ms
2022-08-07 22:53:37.2915|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-07 22:53:37.2915|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - - - 200 1095087 application/javascript 851.6691ms
2022-08-07 22:53:37.3151|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 545.5558ms
2022-08-07 22:53:38.0347|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - -
2022-08-07 22:53:38.9261|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 891.3621ms
2022-08-07 22:53:50.5895|ERROR|Microsoft.AspNetCore.SpaServices|- Generating browser application bundles (phase: setup)...

2022-08-07 22:53:51.4686|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses - -
2022-08-07 22:53:51.9398|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 22:53:52.0741|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 22:53:56.7836|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 22:53:58.3710|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 22:53:58.3710|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 22:54:01.7492|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (746ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 22:54:02.2011|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (134ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 22:54:02.2718|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 22:54:03.1543|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 22:54:03.3576|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 11266.8068ms
2022-08-07 22:54:03.3576|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 22:54:03.5026|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses - - - 200 818 application/json;+charset=utf-8 12034.0346ms
2022-08-07 22:54:20.3566|ERROR|Microsoft.AspNetCore.SpaServices|ΓêÜ Browser application bundle generation complete.

2022-08-07 22:54:20.6564|INFO|Microsoft.AspNetCore.SpaServices|Initial Chunk Files   | Names         |  Raw Size

2022-08-07 22:54:20.6564|INFO|Microsoft.AspNetCore.SpaServices|vendor.js             | vendor        |   2.35 MB |

2022-08-07 22:54:20.6564|INFO|Microsoft.AspNetCore.SpaServices|main.js               | main          | 388.04 kB |

2022-08-07 22:54:20.6564|INFO|Microsoft.AspNetCore.SpaServices|polyfills.js          | polyfills     | 294.87 kB |

2022-08-07 22:54:20.6564|INFO|Microsoft.AspNetCore.SpaServices|styles.css, styles.js | styles        | 173.25 kB |

2022-08-07 22:54:20.6564|INFO|Microsoft.AspNetCore.SpaServices|runtime.js            | runtime       |   6.54 kB |

2022-08-07 22:54:20.6564|INFO|Microsoft.AspNetCore.SpaServices|| Initial Total |   3.19 MB

2022-08-07 22:54:20.6564|INFO|Microsoft.AspNetCore.SpaServices|Build at: 2022-08-07T19:54:20.343Z - Hash: b67450d4910cb75e - Time: 27183ms

2022-08-07 22:54:20.6564|INFO|Microsoft.AspNetCore.SpaServices|** Angular Live Development Server is listening on localhost:61359, open your browser on http://localhost:61359/ **

2022-08-07 22:54:20.8346|INFO|Microsoft.AspNetCore.SpaServices|ΓêÜ Compiled successfully.

2022-08-07 22:54:33.7049|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/courses - -
2022-08-07 22:54:35.8812|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/courses - - - 200 - text/html;+charset=utf-8 2177.4916ms
2022-08-07 22:54:35.9544|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/styles.css - -
2022-08-07 22:54:35.9544|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/main.js - -
2022-08-07 22:54:35.9594|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 22:54:35.9786|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/polyfills.js - -
2022-08-07 22:54:35.9786|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/runtime.js - -
2022-08-07 22:54:35.9786|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 22:54:35.9786|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 22:54:36.0251|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/vendor.js - -
2022-08-07 22:54:36.0251|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 22:54:36.0251|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 22:54:36.0527|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 25.3979ms
2022-08-07 22:54:36.0527|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 22:54:36.0993|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/styles.js - -
2022-08-07 22:54:36.2477|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/styles.css - - - 200 737 text/css;+charset=utf-8 293.2675ms
2022-08-07 22:54:36.4093|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/main.js - - - 200 397354 application/javascript;+charset=utf-8 454.2498ms
2022-08-07 22:54:36.4208|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/runtime.js - - - 200 6696 application/javascript;+charset=utf-8 442.2075ms
2022-08-07 22:54:36.4655|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 406.4560ms
2022-08-07 22:54:36.4780|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/polyfills.js - - - 200 301943 application/javascript;+charset=utf-8 499.3887ms
2022-08-07 22:54:36.7886|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/ws - -
2022-08-07 22:54:36.7886|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/main.js.map - -
2022-08-07 22:54:36.7886|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/runtime.js.map - -
2022-08-07 22:54:36.7886|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 22:54:36.7886|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/polyfills.js.map - -
2022-08-07 22:54:36.9640|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/vendor.js - - - 200 2462581 application/javascript;+charset=utf-8 938.8380ms
2022-08-07 22:54:36.9810|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/styles.js - - - 200 176668 application/javascript;+charset=utf-8 882.8218ms
2022-08-07 22:54:36.9952|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/main.js.map - - - 200 220796 application/json;+charset=utf-8 206.4340ms
2022-08-07 22:54:37.0472|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/polyfills.js.map - - - 200 368440 application/json;+charset=utf-8 258.6687ms
2022-08-07 22:54:37.0569|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/runtime.js.map - - - 200 5719 application/json;+charset=utf-8 268.4071ms
2022-08-07 22:54:37.1764|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/vendor.js.map - -
2022-08-07 22:54:37.2172|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/vendor.js.map - - - 200 3242823 application/json;+charset=utf-8 40.7952ms
2022-08-07 22:54:37.4389|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 22:54:37.4578|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 22:54:37.4578|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 22:54:37.6461|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 22:54:37.8505|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (159ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 22:54:37.9828|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (132ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 22:54:38.0010|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 22:54:38.0010|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 22:54:38.0010|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 545.0246ms
2022-08-07 22:54:38.0040|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 22:54:38.0040|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 565.5777ms
2022-08-07 22:54:38.3244|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/styles.js.map - -
2022-08-07 22:54:38.3370|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/styles.js.map - - - 200 225660 application/json;+charset=utf-8 12.4855ms
2022-08-07 22:56:06.5209|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/3 - -
2022-08-07 22:56:06.5209|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 22:56:06.5209|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseDto] GetCourseAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 22:56:06.5639|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 22:56:07.1244|WARN|Microsoft.EntityFrameworkCore.Query|Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2022-08-07 22:56:07.3492|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (166ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 22:56:07.9367|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 23:00:29.8959|INFO|Microsoft.AspNetCore.SpaServices|Starting @angular/cli on port 61511...
2022-08-07 23:00:30.3904|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\rareb\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-07 23:00:31.1074|INFO|Microsoft.Hosting.Lifetime|Now listening on: https://localhost:7106
2022-08-07 23:00:31.1074|INFO|Microsoft.Hosting.Lifetime|Now listening on: http://localhost:7105
2022-08-07 23:00:31.1074|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2022-08-07 23:00:31.1074|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2022-08-07 23:00:31.1074|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\rareb\Desktop\github\educational-portal\EducationalPortal\EducationalPortal.API\
2022-08-07 23:00:32.5485|ERROR|Microsoft.AspNetCore.SpaServices|npm WARN config global `--global`, `--local` are deprecated. Use `--location=global` instead.

2022-08-07 23:00:34.6511|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger - -
2022-08-07 23:00:34.8629|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger - - - 301 0 - 215.8395ms
2022-08-07 23:00:34.8894|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - -
2022-08-07 23:00:35.5956|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - - - 200 - text/html;charset=utf-8 706.2975ms
2022-08-07 23:00:35.6227|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - -
2022-08-07 23:00:35.6227|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - -
2022-08-07 23:00:35.6227|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - -
2022-08-07 23:00:35.7427|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 23:00:35.7427|INFO|Microsoft.AspNetCore.SpaServices|> educational-portal.app@0.0.0 start

2022-08-07 23:00:35.7427|INFO|Microsoft.AspNetCore.SpaServices|> ng serve

2022-08-07 23:00:35.7636|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 23:00:35.8666|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 123.9327ms
2022-08-07 23:00:35.8927|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-07 23:00:35.8927|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - - - 200 143943 text/css 270.2446ms
2022-08-07 23:00:35.9955|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-07 23:00:35.9955|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 371.2665ms
2022-08-07 23:00:36.1308|INFO|Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware|Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-07 23:00:36.1308|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - - - 200 1095087 application/javascript 506.8124ms
2022-08-07 23:00:36.2234|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 459.8569ms
2022-08-07 23:00:36.8622|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - -
2022-08-07 23:00:37.5323|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 670.0835ms
2022-08-07 23:00:46.9197|ERROR|Microsoft.AspNetCore.SpaServices|- Generating browser application bundles (phase: setup)...

2022-08-07 23:01:13.3972|ERROR|Microsoft.AspNetCore.SpaServices|ΓêÜ Browser application bundle generation complete.

2022-08-07 23:01:13.6210|INFO|Microsoft.AspNetCore.SpaServices|Initial Chunk Files   | Names         |  Raw Size

2022-08-07 23:01:13.6210|INFO|Microsoft.AspNetCore.SpaServices|vendor.js             | vendor        |   2.35 MB |

2022-08-07 23:01:13.6210|INFO|Microsoft.AspNetCore.SpaServices|main.js               | main          | 387.86 kB |

2022-08-07 23:01:13.6210|INFO|Microsoft.AspNetCore.SpaServices|polyfills.js          | polyfills     | 294.87 kB |

2022-08-07 23:01:13.6210|INFO|Microsoft.AspNetCore.SpaServices|styles.css, styles.js | styles        | 173.25 kB |

2022-08-07 23:01:13.6210|INFO|Microsoft.AspNetCore.SpaServices|runtime.js            | runtime       |   6.54 kB |

2022-08-07 23:01:13.6210|INFO|Microsoft.AspNetCore.SpaServices|| Initial Total |   3.19 MB

2022-08-07 23:01:13.6387|INFO|Microsoft.AspNetCore.SpaServices|Build at: 2022-08-07T20:01:13.389Z - Hash: 8c0001bd6baece30 - Time: 25322ms

2022-08-07 23:01:13.6804|INFO|Microsoft.AspNetCore.SpaServices|** Angular Live Development Server is listening on localhost:61511, open your browser on http://localhost:61511/ **

2022-08-07 23:01:13.8790|INFO|Microsoft.AspNetCore.SpaServices|ΓêÜ Compiled successfully.

2022-08-07 23:01:15.7281|ERROR|Microsoft.AspNetCore.SpaServices|ΓêÜ Browser application bundle generation complete.

2022-08-07 23:01:15.7516|INFO|Microsoft.AspNetCore.SpaServices|5 unchanged chunks

2022-08-07 23:01:15.7516|INFO|Microsoft.AspNetCore.SpaServices|Build at: 2022-08-07T20:01:15.725Z - Hash: 8c0001bd6baece30 - Time: 1752ms

2022-08-07 23:01:15.7516|INFO|Microsoft.AspNetCore.SpaServices|ΓêÜ Compiled successfully.

2022-08-07 23:01:39.2883|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses - -
2022-08-07 23:01:39.6252|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 23:01:39.6775|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 23:01:42.8041|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 23:01:43.7434|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 23:01:43.7434|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 23:01:45.9512|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (275ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 23:01:46.2211|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (128ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 23:01:46.2685|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 23:01:46.5147|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 23:01:46.6590|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 6970.4879ms
2022-08-07 23:01:46.6610|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 23:01:46.6870|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses - - - 200 818 application/json;+charset=utf-8 7398.7291ms
2022-08-07 23:03:07.4337|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/courses - -
2022-08-07 23:03:09.5735|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/courses - - - 200 - text/html;+charset=utf-8 2139.7434ms
2022-08-07 23:03:09.6586|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/styles.css - -
2022-08-07 23:03:09.6733|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/runtime.js - -
2022-08-07 23:03:09.6999|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/polyfills.js - -
2022-08-07 23:03:09.7258|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 23:03:09.7821|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 23:03:09.7821|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/vendor.js - -
2022-08-07 23:03:09.7898|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 23:03:09.8027|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/main.js - -
2022-08-07 23:03:09.8027|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - -
2022-08-07 23:03:09.8027|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 23:03:09.8027|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 1.5585ms
2022-08-07 23:03:09.8027|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/styles.js - -
2022-08-07 23:03:09.8027|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/styles.css - - - 200 737 text/css;+charset=utf-8 146.1857ms
2022-08-07 23:03:09.8027|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - -
2022-08-07 23:03:09.9705|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/polyfills.js - - - 200 301943 application/javascript;+charset=utf-8 270.5710ms
2022-08-07 23:03:10.0235|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/runtime.js - - - 200 6696 application/javascript;+charset=utf-8 350.1495ms
2022-08-07 23:03:10.1039|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/main.js - - - 200 397165 application/javascript;+charset=utf-8 301.1742ms
2022-08-07 23:03:10.1362|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/ws - -
2022-08-07 23:03:10.1362|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 23:03:10.1362|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/styles.js - - - 200 176668 application/javascript;+charset=utf-8 332.6296ms
2022-08-07 23:03:10.2608|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 450.4421ms
2022-08-07 23:03:10.4569|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/polyfills.js.map - -
2022-08-07 23:03:10.5016|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/styles.js.map - -
2022-08-07 23:03:10.5079|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/vendor.js - - - 200 2462581 application/javascript;+charset=utf-8 722.5497ms
2022-08-07 23:03:10.5351|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/main.js.map - -
2022-08-07 23:03:10.5830|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/polyfills.js.map - - - 200 368440 application/json;+charset=utf-8 126.0923ms
2022-08-07 23:03:10.6595|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/styles.js.map - - - 200 225660 application/json;+charset=utf-8 157.8550ms
2022-08-07 23:03:10.8073|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/runtime.js.map - -
2022-08-07 23:03:10.8692|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:7106/vendor.js.map - -
2022-08-07 23:03:10.8692|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/main.js.map - - - 200 220587 application/json;+charset=utf-8 338.5334ms
2022-08-07 23:03:10.8830|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/runtime.js.map - - - 200 5719 application/json;+charset=utf-8 75.6581ms
2022-08-07 23:03:11.0110|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 23:03:11.0110|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 23:03:11.0110|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 23:03:11.1444|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:7106/vendor.js.map - - - 200 3242823 application/json;+charset=utf-8 275.1146ms
2022-08-07 23:03:11.2147|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 23:03:11.3930|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (141ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 23:03:11.5286|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (135ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 23:03:11.5452|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 23:03:11.5452|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 23:03:11.5511|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 532.9683ms
2022-08-07 23:03:11.5511|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 23:03:11.5511|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 541.2856ms
2022-08-07 23:03:56.0808|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/2 - -
2022-08-07 23:03:56.0847|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 23:03:56.1061|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseDto] GetCourseAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 23:03:56.1324|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 23:03:56.7833|WARN|Microsoft.EntityFrameworkCore.Query|Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2022-08-07 23:03:57.0021|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (130ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 23:03:57.7514|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 23:03:57.8868|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:03:58.0406|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:03:58.1687|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 23:03:58.3172|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:03:58.4409|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:03:58.5654|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 23:03:58.6889|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:03:58.8129|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:03:58.9372|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 23:03:59.0610|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:03:59.1848|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:03:59.3097|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 23:03:59.4324|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:03:59.5570|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:03:59.6905|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 23:03:59.8135|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:03:59.9379|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:04:00.0633|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 23:04:00.1872|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:04:00.3108|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:04:00.5153|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (128ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE 0 = 1
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 23:04:00.5841|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course with id: 2.
2022-08-07 23:04:00.5841|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseDto'.
2022-08-07 23:04:00.6169|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API) in 4510.6623ms
2022-08-07 23:04:00.6169|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 23:04:00.6169|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/2 - - - 200 3435 application/json;+charset=utf-8 4536.6807ms
2022-08-07 23:04:14.5577|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:7106/api/account/login application/json 91
2022-08-07 23:04:14.5577|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 23:04:14.5577|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API)'
2022-08-07 23:04:14.5577|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.TokensModel]] LoginAsync(EducationalPortal.Application.Models.LoginModel, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 23:04:14.5665|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 23:04:14.8666|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 23:04:14.8938|INFO|EducationalPortal.Infrastructure.Services.Identity.PasswordHasher|Checked password.
2022-08-07 23:04:14.8949|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new refresh token.
2022-08-07 23:04:14.8949|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned new refresh token.
2022-08-07 23:04:15.5052|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (129ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserToken] ([RefreshToken], [RefreshTokenExpiryTime])
VALUES (@p0, @p1);
SELECT [Id]
FROM [UserToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 23:04:15.6769|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[@p9='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 450), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p2, [Balance] = @p3, [Email] = @p4, [Name] = @p5, [PasswordHash] = @p6, [Position] = @p7, [UserTokenId] = @p8
WHERE [Id] = @p9;
SELECT @@ROWCOUNT;
2022-08-07 23:04:15.9025|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned claims for user with email: default@gmail.com.
2022-08-07 23:04:16.1120|INFO|EducationalPortal.Infrastructure.Services.Identity.TokensService|Generated new access token.
2022-08-07 23:04:16.1120|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Returned new access and refresh tokens.
2022-08-07 23:04:16.1120|INFO|EducationalPortal.Infrastructure.Services.Identity.UserManager|Logged in user with email: default@gmail.com.
2022-08-07 23:04:16.1120|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.TokensModel'.
2022-08-07 23:04:16.1153|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API) in 1549.9834ms
2022-08-07 23:04:16.1153|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.LoginAsync (EducationalPortal.API)'
2022-08-07 23:04:16.1153|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:7106/api/account/login application/json 91 - 200 595 application/json;+charset=utf-8 1558.1123ms
2022-08-07 23:04:16.1457|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 23:04:16.3419|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 23:04:16.3419|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 23:04:16.3419|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 23:04:16.4745|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 23:04:16.5992|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 23:04:16.5992|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 23:04:16.5992|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 23:04:16.5992|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 265.569ms
2022-08-07 23:04:16.5992|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 23:04:16.5992|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 462.2522ms
2022-08-07 23:04:18.7917|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 23:04:18.8117|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 23:04:18.8117|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "MyLearning", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Core.Entities.JoinEntities.UsersCourses]] MyLearningAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 23:04:18.8117|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 23:04:18.8460|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 23:04:18.8460|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 23:04:18.9950|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (141ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[UserId], [t].[CourseId], [t].[LearnedMaterialsCount], [t].[MaterialsCount], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM (
    SELECT [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
    FROM [UsersCourses] AS [u]
    INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
    WHERE [u0].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c] ON [t].[CourseId] = [c].[Id]
2022-08-07 23:04:19.1531|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE [u0].[Email] = @__email_0
2022-08-07 23:04:19.3849|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (130ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CoursesMaterials] AS [c]
INNER JOIN (
    SELECT [m].[Id]
    FROM [Materials] AS [m]
) AS [t] ON [c].[MaterialId] = [t].[Id]
WHERE ([c].[CourseId] = @__courseId_0) AND EXISTS (
    SELECT 1
    FROM [MaterialsBaseUser] AS [m0]
    INNER JOIN [Users] AS [u] ON [m0].[UsersId] = [u].[Id]
    WHERE ([t].[Id] = [m0].[MaterialsId]) AND ([u].[Id] = (
        SELECT TOP(1) [u0].[Id]
        FROM [Users] AS [u0]
        WHERE [u0].[Email] = @__email_1)))
2022-08-07 23:04:19.6924|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UsersCourses] SET [LearnedMaterialsCount] = @p0, [MaterialsCount] = @p1
WHERE [CourseId] = @p2 AND [UserId] = @p3;
SELECT @@ROWCOUNT;
2022-08-07 23:04:19.8204|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned users courses page 1 from database.
2022-08-07 23:04:19.8204|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Core.Entities.JoinEntities.UsersCourses, EducationalPortal.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 23:04:19.8481|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API) in 1032.5696ms
2022-08-07 23:04:19.8481|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 23:04:19.8481|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 200 1330 application/json;+charset=utf-8 1059.2476ms
2022-08-07 23:04:20.8912|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/learn/1 - -
2022-08-07 23:04:20.9009|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseToLearnAsync (EducationalPortal.API)'
2022-08-07 23:04:20.9009|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourseToLearn", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseLearnDto] GetCourseToLearnAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 23:04:20.9009|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 23:04:21.0469|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (129ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 23:04:21.1802|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 23:04:21.3056|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:04:21.4284|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:04:21.5526|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 23:04:21.6755|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:04:21.8010|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:04:21.9253|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 23:04:22.0524|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:04:22.1758|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:04:22.3101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (133ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 23:04:22.4556|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[CourseId] = @__courseId_0) AND ([u0].[Email] = @__email_1)
2022-08-07 23:04:22.4577|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course learn with id: 1.
2022-08-07 23:04:22.4577|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseLearnDto'.
2022-08-07 23:04:22.4577|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseToLearnAsync (EducationalPortal.API) in 1555.6835ms
2022-08-07 23:04:22.4577|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseToLearnAsync (EducationalPortal.API)'
2022-08-07 23:04:22.4577|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/learn/1 - - - 200 853 application/json;+charset=utf-8 1569.3939ms
2022-08-07 23:04:23.4448|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 PUT https://localhost:7106/api/courses/learned?materialId=2&courseId=1 application/json 34
2022-08-07 23:04:23.4448|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 23:04:23.4448|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API)'
2022-08-07 23:04:23.4592|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Learned", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int32] LearnedAsync(Int32, Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 23:04:23.4592|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 23:04:23.6388|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (140ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[CourseId] = @__courseId_0) AND ([u0].[Email] = @__email_1)
2022-08-07 23:04:23.8877|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UsersCourses] SET [LearnedMaterialsCount] = @p0, [MaterialsCount] = @p1
WHERE [CourseId] = @p2 AND [UserId] = @p3;
SELECT @@ROWCOUNT;
2022-08-07 23:04:24.1433|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 23:04:24.3334|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
    WHEN [v].[Id] IS NOT NULL THEN N'Video'
    WHEN [b].[Id] IS NOT NULL THEN N'Book'
    WHEN [a].[Id] IS NOT NULL THEN N'Article'
END AS [Discriminator]
FROM [Materials] AS [m]
LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
WHERE [m].[Id] = @__id_0
2022-08-07 23:04:24.7180|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [MaterialsBaseUser] ([MaterialsId], [UsersId])
VALUES (@p0, @p1);
2022-08-07 23:04:24.8468|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 23:04:24.9728|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Material with id: 2 added to user with email: default@gmail.com. Material learned.
2022-08-07 23:04:24.9728|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Int32'.
2022-08-07 23:04:24.9728|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API) in 1514.2732ms
2022-08-07 23:04:24.9728|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.LearnedAsync (EducationalPortal.API)'
2022-08-07 23:04:24.9728|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 PUT https://localhost:7106/api/courses/learned?materialId=2&courseId=1 application/json 34 - 200 2 application/json;+charset=utf-8 1529.1659ms
2022-08-07 23:04:25.9705|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - -
2022-08-07 23:04:25.9771|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 23:04:25.9771|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "MyLearning", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Core.Entities.JoinEntities.UsersCourses]] MyLearningAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 23:04:25.9771|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 23:04:26.1658|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (129ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[UserId], [t].[CourseId], [t].[LearnedMaterialsCount], [t].[MaterialsCount], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM (
    SELECT [u].[UserId], [u].[CourseId], [u].[LearnedMaterialsCount], [u].[MaterialsCount]
    FROM [UsersCourses] AS [u]
    INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
    WHERE [u0].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c] ON [t].[CourseId] = [c].[Id]
2022-08-07 23:04:26.2896|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [UsersCourses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE [u0].[Email] = @__email_0
2022-08-07 23:04:26.4321|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (141ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CoursesMaterials] AS [c]
INNER JOIN (
    SELECT [m].[Id]
    FROM [Materials] AS [m]
) AS [t] ON [c].[MaterialId] = [t].[Id]
WHERE ([c].[CourseId] = @__courseId_0) AND EXISTS (
    SELECT 1
    FROM [MaterialsBaseUser] AS [m0]
    INNER JOIN [Users] AS [u] ON [m0].[UsersId] = [u].[Id]
    WHERE ([t].[Id] = [m0].[MaterialsId]) AND ([u].[Id] = (
        SELECT TOP(1) [u0].[Id]
        FROM [Users] AS [u0]
        WHERE [u0].[Email] = @__email_1)))
2022-08-07 23:04:26.6833|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UsersCourses] SET [LearnedMaterialsCount] = @p0, [MaterialsCount] = @p1
WHERE [CourseId] = @p2 AND [UserId] = @p3;
SELECT @@ROWCOUNT;
2022-08-07 23:04:26.8108|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned users courses page 1 from database.
2022-08-07 23:04:26.8108|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Core.Entities.JoinEntities.UsersCourses, EducationalPortal.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 23:04:26.8108|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API) in 834.0433ms
2022-08-07 23:04:26.8108|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.MyLearningAsync (EducationalPortal.API)'
2022-08-07 23:04:26.8108|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account/my-learning?pageSize=3&pageNumber=1 - - - 200 1330 application/json;+charset=utf-8 841.4299ms
2022-08-07 23:04:29.3860|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - -
2022-08-07 23:04:29.3860|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 23:04:29.3860|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.Course.CourseShortDto]] GetCoursesAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 23:04:29.3860|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 23:04:29.5296|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (128ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail]
FROM [Courses] AS [c]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-08-07 23:04:29.6527|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Courses] AS [c]
2022-08-07 23:04:29.6527|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned courses page 1 from database.
2022-08-07 23:04:29.6527|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.Course.CourseShortDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 23:04:29.6527|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API) in 268.2576ms
2022-08-07 23:04:29.6527|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCoursesAsync (EducationalPortal.API)'
2022-08-07 23:04:29.6527|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses?pageSize=3&pageNumber=1 - - - 200 818 application/json;+charset=utf-8 273.8359ms
2022-08-07 23:04:30.5935|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 PUT https://localhost:7106/api/shopping-cart/add-to-cart/2 application/json 2
2022-08-07 23:04:30.5935|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 23:04:30.5935|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.AddToCartAsync (EducationalPortal.API)'
2022-08-07 23:04:30.6015|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "AddToCart", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCartAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 23:04:30.6015|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 23:04:30.7854|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (128ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [CartItems] AS [c]
        INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
        LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
        WHERE ([c0].[Id] = @__courseId_0) AND ([u].[Email] = @__email_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-08-07 23:04:30.9188|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (128ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 23:04:31.1927|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CartItems] ([CourseId], [UserId])
VALUES (@p0, @p1);
SELECT [Id]
FROM [CartItems]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 23:04:31.3241|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Created cart item with id: 1.
2022-08-07 23:04:31.3241|INFO|Microsoft.AspNetCore.Mvc.StatusCodeResult|Executing StatusCodeResult, setting HTTP status code 200
2022-08-07 23:04:31.3241|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.AddToCartAsync (EducationalPortal.API) in 728.9899ms
2022-08-07 23:04:31.3241|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.AddToCartAsync (EducationalPortal.API)'
2022-08-07 23:04:31.3241|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 PUT https://localhost:7106/api/shopping-cart/add-to-cart/2 application/json 2 - 200 0 - 737.4668ms
2022-08-07 23:04:31.3551|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - -
2022-08-07 23:04:31.3551|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API)'
2022-08-07 23:04:31.3551|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/shopping-cart/total-price - -
2022-08-07 23:04:31.3650|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API)'
2022-08-07 23:04:31.3650|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCart", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.CartItemDto]] GetCartAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 23:04:31.3650|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 23:04:31.3650|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetTotalPrice", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int32] GetTotalPriceAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 23:04:31.3650|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 23:04:31.3939|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 23:04:31.3939|WARN|Microsoft.EntityFrameworkCore.Query|The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-08-07 23:04:31.5373|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (137ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[CourseId], [t].[UserId], [c0].[Id], [c0].[AuthorId], [c0].[Description], [c0].[Name], [c0].[Price], [c0].[ShortDescription], [c0].[Thumbnail]
FROM (
    SELECT [c].[Id], [c].[CourseId], [c].[UserId]
    FROM [CartItems] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
    WHERE [u].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c0] ON [t].[CourseId] = [c0].[Id]
2022-08-07 23:04:31.6673|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 23:04:31.6788|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Returned cart items page 1 from database.
2022-08-07 23:04:31.6788|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.CartItemDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 23:04:31.6788|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API) in 315.1133ms
2022-08-07 23:04:31.6788|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API)'
2022-08-07 23:04:31.6788|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - - - 200 286 application/json;+charset=utf-8 329.2244ms
2022-08-07 23:04:32.3308|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (130ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([c0].[Price]), 0)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 23:04:32.3308|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Returned total price 150 for cart from database.
2022-08-07 23:04:32.3308|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Int32'.
2022-08-07 23:04:32.3308|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API) in 958.7724ms
2022-08-07 23:04:32.3308|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API)'
2022-08-07 23:04:32.3308|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/shopping-cart/total-price - - - 200 3 application/json;+charset=utf-8 972.8222ms
2022-08-07 23:04:34.2263|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 PUT https://localhost:7106/api/shopping-cart/buy application/json 2
2022-08-07 23:04:34.2263|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2022-08-07 23:04:34.2263|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.BuyAsync (EducationalPortal.API)'
2022-08-07 23:04:34.2263|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Buy", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BuyAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 23:04:34.2263|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 23:04:34.3728|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t].[Id0], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t0].[RolesId], [t0].[UsersId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId], [u0].[Id] AS [Id0], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime]
    FROM [Users] AS [u]
    LEFT JOIN [UserToken] AS [u0] ON [u].[UserTokenId] = [u0].[Id]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t].[Id0], [t0].[RolesId], [t0].[UsersId]
2022-08-07 23:04:34.5057|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[CourseId], [c].[UserId], [c0].[Id], [c0].[AuthorId], [c0].[Description], [c0].[Name], [c0].[Price], [c0].[ShortDescription], [c0].[Thumbnail]
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 23:04:34.6308|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([c0].[Price]), 0)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 23:04:34.8810|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 23:04:35.0070|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|User with email default@gmail.com payed 150 points.
2022-08-07 23:04:35.1392|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CoursesMaterials] AS [c]
WHERE [c].[CourseId] = @__courseId_0
2022-08-07 23:04:35.2646|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@__courseId_0='?' (DbType = Int32), @__email_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CoursesMaterials] AS [c]
INNER JOIN (
    SELECT [m].[Id]
    FROM [Materials] AS [m]
) AS [t] ON [c].[MaterialId] = [t].[Id]
WHERE ([c].[CourseId] = @__courseId_0) AND EXISTS (
    SELECT 1
    FROM [MaterialsBaseUser] AS [m0]
    INNER JOIN [Users] AS [u] ON [m0].[UsersId] = [u].[Id]
    WHERE ([t].[Id] = [m0].[MaterialsId]) AND ([u].[Id] = (
        SELECT TOP(1) [u0].[Id]
        FROM [Users] AS [u0]
        WHERE [u0].[Email] = @__email_1)))
2022-08-07 23:04:35.5185|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UsersCourses] ([CourseId], [UserId], [LearnedMaterialsCount], [MaterialsCount])
VALUES (@p0, @p1, @p2, @p3);
2022-08-07 23:04:35.6449|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Added course with id: 2 to user with email: default@gmail.com.
2022-08-07 23:04:35.7829|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (130ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
FROM [Users] AS [u]
WHERE EXISTS (
    SELECT 1
    FROM [Courses] AS [c]
    WHERE ([u].[Id] = [c].[AuthorId]) AND ([c].[Id] = @__courseId_0))
2022-08-07 23:04:36.0301|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@p7='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [Avatar] = @p0, [Balance] = @p1, [Email] = @p2, [Name] = @p3, [PasswordHash] = @p4, [Position] = @p5, [UserTokenId] = @p6
WHERE [Id] = @p7;
SELECT @@ROWCOUNT;
2022-08-07 23:04:36.1548|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Added revenue to author with email default@gmail.com for selling course with id: 2.
2022-08-07 23:04:36.4295|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ShoppingHistory] ([CourseId], [Date], [Price], [UserId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [ShoppingHistory]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-07 23:04:36.5589|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Created shopping history with id 1.
2022-08-07 23:04:36.8302|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [CartItems]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-08-07 23:04:36.9684|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|User with email default@gmail.com bought courses.
2022-08-07 23:04:36.9684|INFO|Microsoft.AspNetCore.Mvc.StatusCodeResult|Executing StatusCodeResult, setting HTTP status code 200
2022-08-07 23:04:36.9684|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.BuyAsync (EducationalPortal.API) in 2736.1326ms
2022-08-07 23:04:36.9684|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.BuyAsync (EducationalPortal.API)'
2022-08-07 23:04:36.9684|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 PUT https://localhost:7106/api/shopping-cart/buy application/json 2 - 200 0 - 2742.8468ms
2022-08-07 23:04:36.9837|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - -
2022-08-07 23:04:36.9837|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/shopping-cart/total-price - -
2022-08-07 23:04:36.9837|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API)'
2022-08-07 23:04:36.9837|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API)'
2022-08-07 23:04:36.9837|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetTotalPrice", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int32] GetTotalPriceAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 23:04:36.9837|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCart", controller = "ShoppingCart"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[EducationalPortal.Application.Models.DTO.CartItemDto]] GetCartAsync(EducationalPortal.Application.Paging.PageParameters, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.ShoppingCartController (EducationalPortal.API).
2022-08-07 23:04:36.9885|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 23:04:36.9885|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 23:04:37.1246|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([c0].[Price]), 0)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
INNER JOIN [Courses] AS [c0] ON [c].[CourseId] = [c0].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 23:04:37.1246|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Returned total price 0 for cart from database.
2022-08-07 23:04:37.1246|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Int32'.
2022-08-07 23:04:37.1246|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API) in 138.3512ms
2022-08-07 23:04:37.1246|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetTotalPriceAsync (EducationalPortal.API)'
2022-08-07 23:04:37.1246|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/shopping-cart/total-price - - - 200 1 application/json;+charset=utf-8 141.7529ms
2022-08-07 23:04:37.1471|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@__email_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[CourseId], [t].[UserId], [c0].[Id], [c0].[AuthorId], [c0].[Description], [c0].[Name], [c0].[Price], [c0].[ShortDescription], [c0].[Thumbnail]
FROM (
    SELECT [c].[Id], [c].[CourseId], [c].[UserId]
    FROM [CartItems] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
    WHERE [u].[Email] = @__email_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [Courses] AS [c0] ON [t].[CourseId] = [c0].[Id]
2022-08-07 23:04:37.2741|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [CartItems] AS [c]
LEFT JOIN [Users] AS [u] ON [c].[UserId] = [u].[Id]
WHERE [u].[Email] = @__email_0
2022-08-07 23:04:37.2741|INFO|EducationalPortal.Infrastructure.Services.ShoppingCartService|Returned cart items page 1 from database.
2022-08-07 23:04:37.2741|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Paging.PagedList`1[[EducationalPortal.Application.Models.DTO.CartItemDto, EducationalPortal.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-07 23:04:37.2741|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API) in 291.8542ms
2022-08-07 23:04:37.2741|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.ShoppingCartController.GetCartAsync (EducationalPortal.API)'
2022-08-07 23:04:37.2741|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/shopping-cart?pageSize=10&pageNumber=1 - - - 200 2 application/json;+charset=utf-8 295.9358ms
2022-08-07 23:04:38.4955|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account - -
2022-08-07 23:04:38.4955|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API)'
2022-08-07 23:04:38.5062|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetProfile", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.DTO.UserDto]] GetProfileAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 23:04:38.5062|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 23:04:38.5907|WARN|Microsoft.EntityFrameworkCore.Query|Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2022-08-07 23:04:38.7481|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (149ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [t0].[UserId], [t0].[SkillId], [t0].[Level], [t0].[Id], [t0].[Name], [t1].[RolesId], [t1].[UsersId], [t1].[Id], [t1].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN [Courses] AS [c] ON [t].[Id] = [c].[AuthorId]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[SkillId], [u0].[Level], [s].[Id], [s].[Name]
    FROM [UsersSkills] AS [u0]
    INNER JOIN [Skills] AS [s] ON [u0].[SkillId] = [s].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsersId]
ORDER BY [t].[Id], [c].[Id], [t0].[UserId], [t0].[SkillId], [t0].[Id], [t1].[RolesId], [t1].[UsersId]
2022-08-07 23:04:38.7930|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned user with email: default@gmail.com.
2022-08-07 23:04:38.7930|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.UserDto'.
2022-08-07 23:04:38.7930|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API) in 288.1966ms
2022-08-07 23:04:38.7930|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API)'
2022-08-07 23:04:38.7930|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account - - - 200 1236 application/json;+charset=utf-8 299.3172ms
2022-08-07 23:05:20.2576|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/2 - -
2022-08-07 23:05:20.2576|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 23:05:20.2576|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseDto] GetCourseAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 23:05:20.2710|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 23:05:20.4269|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (131ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 23:05:20.9202|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 23:05:21.0427|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:05:21.1657|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:05:21.2895|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 23:05:21.4136|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:05:21.5374|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:05:21.6609|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 23:05:21.7846|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:05:21.9166|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (131ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:05:22.0411|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 23:05:22.1639|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:05:22.2885|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:05:22.4146|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 23:05:22.5435|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (128ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:05:22.6671|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:05:22.7919|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 23:05:22.9250|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (132ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:05:23.0497|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:05:23.1742|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 23:05:23.2974|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:05:23.4208|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:05:23.5552|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (134ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 23:05:23.5804|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course with id: 2.
2022-08-07 23:05:23.5804|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseDto'.
2022-08-07 23:05:23.5804|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API) in 3314.9606ms
2022-08-07 23:05:23.5804|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 23:05:23.5804|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/2 - - - 200 3435 application/json;+charset=utf-8 3323.7685ms
2022-08-07 23:05:25.2276|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account - -
2022-08-07 23:05:25.2276|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API)'
2022-08-07 23:05:25.2276|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetProfile", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.DTO.UserDto]] GetProfileAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 23:05:25.2276|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 23:05:25.4156|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (138ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [t0].[UserId], [t0].[SkillId], [t0].[Level], [t0].[Id], [t0].[Name], [t1].[RolesId], [t1].[UsersId], [t1].[Id], [t1].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN [Courses] AS [c] ON [t].[Id] = [c].[AuthorId]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[SkillId], [u0].[Level], [s].[Id], [s].[Name]
    FROM [UsersSkills] AS [u0]
    INNER JOIN [Skills] AS [s] ON [u0].[SkillId] = [s].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsersId]
ORDER BY [t].[Id], [c].[Id], [t0].[UserId], [t0].[SkillId], [t0].[Id], [t1].[RolesId], [t1].[UsersId]
2022-08-07 23:05:25.4911|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned user with email: default@gmail.com.
2022-08-07 23:05:25.4911|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.UserDto'.
2022-08-07 23:05:25.4911|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API) in 263.178ms
2022-08-07 23:05:25.4911|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API)'
2022-08-07 23:05:25.4911|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account - - - 200 1236 application/json;+charset=utf-8 265.6877ms
2022-08-07 23:05:28.3256|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/courses/3 - -
2022-08-07 23:05:28.3256|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 23:05:28.3256|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[EducationalPortal.Application.Models.DTO.Course.CourseDto] GetCourseAsync(Int32, System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.CoursesController (EducationalPortal.API).
2022-08-07 23:05:28.3318|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 23:05:28.4770|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (130ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Description], [t].[Name], [t].[Price], [t].[ShortDescription], [t].[Thumbnail], [t].[Id0], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name0], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[CourseId], [t0].[MaterialId], [t0].[Index], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator], [t2].[CourseId], [t2].[SkillId], [t2].[Id], [t2].[Name]
FROM (
    SELECT TOP(1) [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [u].[Id] AS [Id0], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name] AS [Name0], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Courses] AS [c]
    LEFT JOIN [Users] AS [u] ON [c].[AuthorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [c0].[CourseId], [c0].[MaterialId], [c0].[Index], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [CoursesMaterials] AS [c0]
    INNER JOIN (
        SELECT [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m]
        LEFT JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
    ) AS [t1] ON [c0].[MaterialId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[CourseId]
LEFT JOIN (
    SELECT [c1].[CourseId], [c1].[SkillId], [s].[Id], [s].[Name]
    FROM [CoursesSkills] AS [c1]
    INNER JOIN [Skills] AS [s] ON [c1].[SkillId] = [s].[Id]
) AS [t2] ON [t].[Id] = [t2].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t0].[CourseId], [t0].[MaterialId], [t0].[Id], [t2].[CourseId], [t2].[SkillId]
2022-08-07 23:05:28.6124|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 23:05:28.7366|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:05:28.8609|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:05:28.9866|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Link], [t].[Name], [t].[ExtensionId], [t].[PagesCount], [t].[PublicationYear], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId], [t0].[Id], [t0].[FullName], [t].[Name0]
FROM (
    SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [e].[Id] AS [Id0], [e].[Name] AS [Name0]
    FROM [Materials] AS [m]
    INNER JOIN [Books] AS [b] ON [m].[Id] = [b].[Id]
    INNER JOIN [Extensions] AS [e] ON [b].[ExtensionId] = [e].[Id]
    WHERE [m].[Id] = @__cm_MaterialId_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AuthorsId], [a].[BooksId], [a0].[Id], [a0].[FullName]
    FROM [AuthorBook] AS [a]
    INNER JOIN [Authors] AS [a0] ON [a].[AuthorsId] = [a0].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t].[Id0], [t0].[AuthorsId], [t0].[BooksId]
2022-08-07 23:05:29.1092|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [v].[Duration], [v].[QualityId], [q].[Id], [q].[Name]
FROM [Materials] AS [m]
INNER JOIN [Videos] AS [v] ON [m].[Id] = [v].[Id]
INNER JOIN [Qualities] AS [q] ON [v].[QualityId] = [q].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:05:29.2326|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__cm_MaterialId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Link], [m].[Name], [a].[PublicationDate], [a].[ResourceId], [r].[Id], [r].[Name]
FROM [Materials] AS [m]
INNER JOIN [Articles] AS [a] ON [m].[Id] = [a].[Id]
INNER JOIN [Resources] AS [r] ON [a].[ResourceId] = [r].[Id]
WHERE [m].[Id] = @__cm_MaterialId_0
2022-08-07 23:05:29.3567|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (123ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [t0].[MaterialsId], [t0].[UsersId], [t0].[Id], [t0].[Link], [t0].[Name], [t0].[PublicationDate], [t0].[ResourceId], [t0].[ExtensionId], [t0].[PagesCount], [t0].[PublicationYear], [t0].[Duration], [t0].[QualityId], [t0].[Discriminator]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN (
    SELECT [m].[MaterialsId], [m].[UsersId], [t1].[Id], [t1].[Link], [t1].[Name], [t1].[PublicationDate], [t1].[ResourceId], [t1].[ExtensionId], [t1].[PagesCount], [t1].[PublicationYear], [t1].[Duration], [t1].[QualityId], [t1].[Discriminator]
    FROM [MaterialsBaseUser] AS [m]
    INNER JOIN (
        SELECT [m0].[Id], [m0].[Link], [m0].[Name], [a].[PublicationDate], [a].[ResourceId], [b].[ExtensionId], [b].[PagesCount], [b].[PublicationYear], [v].[Duration], [v].[QualityId], CASE
            WHEN [v].[Id] IS NOT NULL THEN N'Video'
            WHEN [b].[Id] IS NOT NULL THEN N'Book'
            WHEN [a].[Id] IS NOT NULL THEN N'Article'
        END AS [Discriminator]
        FROM [Materials] AS [m0]
        LEFT JOIN [Articles] AS [a] ON [m0].[Id] = [a].[Id]
        LEFT JOIN [Books] AS [b] ON [m0].[Id] = [b].[Id]
        LEFT JOIN [Videos] AS [v] ON [m0].[Id] = [v].[Id]
    ) AS [t1] ON [m].[MaterialsId] = [t1].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsersId]
ORDER BY [t].[Id], [t0].[MaterialsId], [t0].[UsersId]
2022-08-07 23:05:29.3786|INFO|EducationalPortal.Infrastructure.Services.CoursesService|Returned course with id: 3.
2022-08-07 23:05:29.3786|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.Course.CourseDto'.
2022-08-07 23:05:29.3786|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API) in 1048.3329ms
2022-08-07 23:05:29.3786|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.CoursesController.GetCourseAsync (EducationalPortal.API)'
2022-08-07 23:05:29.3786|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/courses/3 - - - 200 2269 application/json;+charset=utf-8 1054.0911ms
2022-08-07 23:05:30.9466|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7106/api/account - -
2022-08-07 23:05:30.9466|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API)'
2022-08-07 23:05:30.9466|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetProfile", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EducationalPortal.Application.Models.DTO.UserDto]] GetProfileAsync(System.Threading.CancellationToken) on controller EducationalPortal.API.Controllers.AccountController (EducationalPortal.API).
2022-08-07 23:05:30.9466|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 6.0.3 initialized 'ApplicationContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-08-07 23:05:31.0975|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Avatar], [t].[Balance], [t].[Email], [t].[Name], [t].[PasswordHash], [t].[Position], [t].[UserTokenId], [c].[Id], [c].[AuthorId], [c].[Description], [c].[Name], [c].[Price], [c].[ShortDescription], [c].[Thumbnail], [t0].[UserId], [t0].[SkillId], [t0].[Level], [t0].[Id], [t0].[Name], [t1].[RolesId], [t1].[UsersId], [t1].[Id], [t1].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Avatar], [u].[Balance], [u].[Email], [u].[Name], [u].[PasswordHash], [u].[Position], [u].[UserTokenId]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [t]
LEFT JOIN [Courses] AS [c] ON [t].[Id] = [c].[AuthorId]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[SkillId], [u0].[Level], [s].[Id], [s].[Name]
    FROM [UsersSkills] AS [u0]
    INNER JOIN [Skills] AS [s] ON [u0].[SkillId] = [s].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
LEFT JOIN (
    SELECT [r].[RolesId], [r].[UsersId], [r0].[Id], [r0].[Name]
    FROM [RoleUser] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RolesId] = [r0].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsersId]
ORDER BY [t].[Id], [c].[Id], [t0].[UserId], [t0].[SkillId], [t0].[Id], [t1].[RolesId], [t1].[UsersId]
2022-08-07 23:05:31.1394|INFO|EducationalPortal.Infrastructure.Services.AccountService|Returned user with email: default@gmail.com.
2022-08-07 23:05:31.1394|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'EducationalPortal.Application.Models.DTO.UserDto'.
2022-08-07 23:05:31.1394|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API) in 191.5708ms
2022-08-07 23:05:31.1394|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'EducationalPortal.API.Controllers.AccountController.GetProfileAsync (EducationalPortal.API)'
2022-08-07 23:05:31.1394|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7106/api/account - - - 200 1236 application/json;+charset=utf-8 193.8109ms
